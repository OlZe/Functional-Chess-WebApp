function zG(Z){return!Z}function o(Z,Q,J){if(Z)return Q;else return J()}function NG(Z,Q,J){if(Z)return Q();else return J()}class R{withFields(Z){let Q=Object.keys(this).map((J)=>(J in Z)?Z[J]:this[J]);return new this.constructor(...Q)}}class bQ{static fromArray(Z,Q){let J=Q||new A;for(let W=Z.length-1;W>=0;--W)J=new GQ(Z[W],J);return J}[Symbol.iterator](){return new jG(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof A}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function D(Z,Q){return new GQ(Z,Q)}function I(Z,Q){return bQ.fromArray(Z,Q)}class jG{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof A)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class A extends bQ{}class GQ extends bQ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class gJ{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,J){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=J??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return JJ(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let W=0;W<Q;W++)if(this.rawBuffer[W]!==Z.rawBuffer[W])return!1;let J=this.bitSize%8;if(J){let W=8-J;if(this.rawBuffer[Q]>>W!==Z.rawBuffer[Q]>>W)return!1}}else{for(let W=0;W<Q;W++){let G=JJ(this.rawBuffer,this.bitOffset,W),K=JJ(Z.rawBuffer,Z.bitOffset,W);if(G!==K)return!1}let J=this.bitSize%8;if(J){let W=JJ(this.rawBuffer,this.bitOffset,Q),G=JJ(Z.rawBuffer,Z.bitOffset,Q),K=8-J;if(W>>K!==G>>K)return!1}}return!0}get buffer(){if(DG("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(DG("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function JJ(Z,Q,J){if(Q===0)return Z[J]??0;else{let W=Z[J]<<Q&255,G=Z[J+1]>>8-Q;return W|G}}class y8{constructor(Z){this.value=Z}}var qG={};function DG(Z,Q){if(qG[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),qG[Z]=!0}class WJ extends R{static isResult(Z){return Z instanceof WJ}}class k extends WJ{constructor(Z){super();this[0]=Z}isOk(){return!0}}class b extends WJ{constructor(Z){super();this[0]=Z}isOk(){return!1}}function B(Z,Q){let J=[Z,Q];while(J.length){let W=J.pop(),G=J.pop();if(W===G)continue;if(!OG(W)||!OG(G))return!1;if(!wX(W,G)||PX(W,G)||TX(W,G)||SX(W,G)||CX(W,G)||LX(W,G)||EX(W,G))return!1;let X=Object.getPrototypeOf(W);if(X!==null&&typeof X.equals==="function")try{if(W.equals(G))continue;else return!1}catch{}let[V,Y]=AX(W),H=V(W),M=V(G);if(H.length!==M.length)return!1;for(let U of H)J.push(Y(W,U),Y(G,U))}return!0}function AX(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,J)=>Q.get(J)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(J)=>[...Q,...Object.keys(J)],(J,W)=>J[W]]}}function PX(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function TX(Z,Q){return!(Z instanceof gJ)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((J,W)=>J===Q[W]))}function SX(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function CX(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function LX(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((J)=>!Q.has(J)))}function EX(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function OG(Z){return typeof Z==="object"&&Z!==null}function wX(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((W)=>Z instanceof W))return!1;return Z.constructor===Q.constructor}function v(Z,Q,J,W,G,K,X){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=Q,V.module=J,V.line=W,V.function=G,V.fn=G;for(let Y in X)V[Y]=X[Y];return V}class S extends R{constructor(Z){super();this[0]=Z}}class y extends R{}function xX(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else{let G=J.head;Z=J.tail,Q=D(G,W)}}}function kX(Z){return xX(Z,I([]))}function BG(Z){return B(Z,new y)}function AG(Z,Q){if(Z instanceof S){let J=Z[0];return new k(J)}else return new b(Q)}function b8(Z){if(Z instanceof k){let Q=Z[0];return new S(Q)}else return new y}function f8(Z,Q){if(Z instanceof S){let J=Z[0];return new S(Q(J))}else return Z}function fQ(Z,Q){if(Z instanceof S){let J=Z[0];return Q(J)}else return Z}function GJ(Z,Q){if(Z instanceof S)return Z;else return Q()}function yX(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return kX(W);else{let G=J.head;if(G instanceof S){let K=J.tail,X=G[0];Z=K,Q=D(X,W)}else Z=J.tail,Q=W}}}function iQ(Z){return yX(Z,I([]))}var PG=new WeakMap,h8=new DataView(new ArrayBuffer(8)),v8=0;function g8(Z){let Q=PG.get(Z);if(Q!==void 0)return Q;let J=v8++;if(v8===2147483647)v8=0;return PG.set(Z,J),J}function u8(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function $8(Z){let Q=0,J=Z.length;for(let W=0;W<J;W++)Q=Math.imul(31,Q)+Z.charCodeAt(W)|0;return Q}function SG(Z){h8.setFloat64(0,Z);let Q=h8.getInt32(0),J=h8.getInt32(4);return Math.imul(73244475,Q>>16^Q)^J}function bX(Z){return $8(Z.toString())}function fX(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let W=Z.hashCode(Z);if(typeof W==="number")return W}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return g8(Z);if(Z instanceof Date)return SG(Z.getTime());let J=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let W=0;W<Z.length;W++)J=Math.imul(31,J)+aZ(Z[W])|0;else if(Z instanceof Set)Z.forEach((W)=>{J=J+aZ(W)|0});else if(Z instanceof Map)Z.forEach((W,G)=>{J=J+u8(aZ(W),aZ(G))|0});else{let W=Object.keys(Z);for(let G=0;G<W.length;G++){let K=W[G],X=Z[K];J=J+u8(aZ(X),$8(K))|0}}return J}function aZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return SG(Z);case"string":return $8(Z);case"bigint":return bX(Z);case"object":return fX(Z);case"symbol":return g8(Z);case"function":return g8(Z);default:return 0}}var SQ=5,m8=Math.pow(2,SQ),hX=m8-1,vX=m8/2,gX=m8/4,hZ=0,TQ=1,sZ=2,z9=3,c8={type:sZ,bitmap:0,array:[]};function KJ(Z,Q){return Z>>>Q&hX}function _J(Z,Q){return 1<<KJ(Z,Q)}function uX(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function p8(Z,Q){return uX(Z&Q-1)}function iZ(Z,Q,J){let W=Z.length,G=Array(W);for(let K=0;K<W;++K)G[K]=Z[K];return G[Q]=J,G}function _X(Z,Q,J){let W=Z.length,G=Array(W+1),K=0,X=0;while(K<Q)G[X++]=Z[K++];G[X++]=J;while(K<W)G[X++]=Z[K++];return G}function _8(Z,Q){let J=Z.length,W=Array(J-1),G=0,K=0;while(G<Q)W[K++]=Z[G++];++G;while(G<J)W[K++]=Z[G++];return W}function CG(Z,Q,J,W,G,K){let X=aZ(Q);if(X===W)return{type:z9,hash:X,array:[{type:hZ,k:Q,v:J},{type:hZ,k:G,v:K}]};let V={val:!1};return XJ(d8(c8,Z,X,Q,J,V),Z,W,G,K,V)}function XJ(Z,Q,J,W,G,K){switch(Z.type){case TQ:return $X(Z,Q,J,W,G,K);case sZ:return d8(Z,Q,J,W,G,K);case z9:return mX(Z,Q,J,W,G,K)}}function $X(Z,Q,J,W,G,K){let X=KJ(J,Q),V=Z.array[X];if(V===void 0)return K.val=!0,{type:TQ,size:Z.size+1,array:iZ(Z.array,X,{type:hZ,k:W,v:G})};if(V.type===hZ){if(B(W,V.k)){if(G===V.v)return Z;return{type:TQ,size:Z.size,array:iZ(Z.array,X,{type:hZ,k:W,v:G})}}return K.val=!0,{type:TQ,size:Z.size,array:iZ(Z.array,X,CG(Q+SQ,V.k,V.v,J,W,G))}}let Y=XJ(V,Q+SQ,J,W,G,K);if(Y===V)return Z;return{type:TQ,size:Z.size,array:iZ(Z.array,X,Y)}}function d8(Z,Q,J,W,G,K){let X=_J(J,Q),V=p8(Z.bitmap,X);if((Z.bitmap&X)!==0){let Y=Z.array[V];if(Y.type!==hZ){let M=XJ(Y,Q+SQ,J,W,G,K);if(M===Y)return Z;return{type:sZ,bitmap:Z.bitmap,array:iZ(Z.array,V,M)}}let H=Y.k;if(B(W,H)){if(G===Y.v)return Z;return{type:sZ,bitmap:Z.bitmap,array:iZ(Z.array,V,{type:hZ,k:W,v:G})}}return K.val=!0,{type:sZ,bitmap:Z.bitmap,array:iZ(Z.array,V,CG(Q+SQ,H,Y.v,J,W,G))}}else{let Y=Z.array.length;if(Y>=vX){let H=Array(32),M=KJ(J,Q);H[M]=d8(c8,Q+SQ,J,W,G,K);let U=0,F=Z.bitmap;for(let z=0;z<32;z++){if((F&1)!==0){let N=Z.array[U++];H[z]=N}F=F>>>1}return{type:TQ,size:Y+1,array:H}}else{let H=_X(Z.array,V,{type:hZ,k:W,v:G});return K.val=!0,{type:sZ,bitmap:Z.bitmap|X,array:H}}}}function mX(Z,Q,J,W,G,K){if(J===Z.hash){let X=s8(Z,W);if(X!==-1){if(Z.array[X].v===G)return Z;return{type:z9,hash:J,array:iZ(Z.array,X,{type:hZ,k:W,v:G})}}let V=Z.array.length;return K.val=!0,{type:z9,hash:J,array:iZ(Z.array,V,{type:hZ,k:W,v:G})}}return XJ({type:sZ,bitmap:_J(Z.hash,Q),array:[Z]},Q,J,W,G,K)}function s8(Z,Q){let J=Z.array.length;for(let W=0;W<J;W++)if(B(Q,Z.array[W].k))return W;return-1}function uJ(Z,Q,J,W){switch(Z.type){case TQ:return cX(Z,Q,J,W);case sZ:return pX(Z,Q,J,W);case z9:return dX(Z,W)}}function cX(Z,Q,J,W){let G=KJ(J,Q),K=Z.array[G];if(K===void 0)return;if(K.type!==hZ)return uJ(K,Q+SQ,J,W);if(B(W,K.k))return K;return}function pX(Z,Q,J,W){let G=_J(J,Q);if((Z.bitmap&G)===0)return;let K=p8(Z.bitmap,G),X=Z.array[K];if(X.type!==hZ)return uJ(X,Q+SQ,J,W);if(B(W,X.k))return X;return}function dX(Z,Q){let J=s8(Z,Q);if(J<0)return;return Z.array[J]}function n8(Z,Q,J,W){switch(Z.type){case TQ:return sX(Z,Q,J,W);case sZ:return nX(Z,Q,J,W);case z9:return lX(Z,W)}}function sX(Z,Q,J,W){let G=KJ(J,Q),K=Z.array[G];if(K===void 0)return Z;let X=void 0;if(K.type===hZ){if(!B(K.k,W))return Z}else if(X=n8(K,Q+SQ,J,W),X===K)return Z;if(X===void 0){if(Z.size<=gX){let V=Z.array,Y=Array(Z.size-1),H=0,M=0,U=0;while(H<G){let F=V[H];if(F!==void 0)Y[M]=F,U|=1<<H,++M;++H}++H;while(H<V.length){let F=V[H];if(F!==void 0)Y[M]=F,U|=1<<H,++M;++H}return{type:sZ,bitmap:U,array:Y}}return{type:TQ,size:Z.size-1,array:iZ(Z.array,G,X)}}return{type:TQ,size:Z.size,array:iZ(Z.array,G,X)}}function nX(Z,Q,J,W){let G=_J(J,Q);if((Z.bitmap&G)===0)return Z;let K=p8(Z.bitmap,G),X=Z.array[K];if(X.type!==hZ){let V=n8(X,Q+SQ,J,W);if(V===X)return Z;if(V!==void 0)return{type:sZ,bitmap:Z.bitmap,array:iZ(Z.array,K,V)};if(Z.bitmap===G)return;return{type:sZ,bitmap:Z.bitmap^G,array:_8(Z.array,K)}}if(B(W,X.k)){if(Z.bitmap===G)return;return{type:sZ,bitmap:Z.bitmap^G,array:_8(Z.array,K)}}return Z}function lX(Z,Q){let J=s8(Z,Q);if(J<0)return Z;if(Z.array.length===1)return;return{type:z9,hash:Z.hash,array:_8(Z.array,J)}}function LG(Z,Q){if(Z===void 0)return;let J=Z.array,W=J.length;for(let G=0;G<W;G++){let K=J[G];if(K===void 0)continue;if(K.type===hZ){Q(K.v,K.k);continue}LG(K,Q)}}class dZ{static fromObject(Z){let Q=Object.keys(Z),J=dZ.new();for(let W=0;W<Q.length;W++){let G=Q[W];J=J.set(G,Z[G])}return J}static fromMap(Z){let Q=dZ.new();return Z.forEach((J,W)=>{Q=Q.set(W,J)}),Q}static new(){return new dZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let J=uJ(this.root,0,aZ(Z),Z);if(J===void 0)return Q;return J.v}set(Z,Q){let J={val:!1},W=this.root===void 0?c8:this.root,G=XJ(W,0,aZ(Z),Z,Q,J);if(G===this.root)return this;return new dZ(G,J.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=n8(this.root,0,aZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return dZ.new();return new dZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return uJ(this.root,0,aZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,J)=>Z.push([J,Q])),Z}forEach(Z){LG(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,J)=>{Z=Z+u8(aZ(Q),aZ(J))|0}),Z}equals(Z){if(!(Z instanceof dZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,J)=>{if(!B(Z.get(J,!Q),Q))throw TG}),!0}catch(Q){if(Q===TG)return!1;throw Q}}}var TG=Symbol();class VZ extends R{}class YZ extends R{}class hQ extends R{}function $J(Z,Q){if(Z===Q)return new YZ;else if(Z<Q)return new VZ;else return new hQ}class CZ extends R{}class y9 extends R{}function eX(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else Z=J.tail,Q=W+1}}function bG(Z){return eX(Z,0)}function b9(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else{let G=J.head;Z=J.tail,Q=D(G,W)}}}function e(Z){return b9(Z,I([]))}function fG(Z){return B(Z,I([]))}function Z6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return e(K);else{let{head:X,tail:V}=W,Y;if(G(X))Y=D(X,K);else Y=K;let M=Y;Z=V,Q=G,J=M}}}function f9(Z,Q){return Z6(Z,Q,I([]))}function Q6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return e(K);else{let{head:X,tail:V}=W,Y,H=G(X);if(H instanceof k){let U=H[0];Y=D(U,K)}else Y=K;let M=Y;Z=V,Q=G,J=M}}}function mJ(Z,Q){return Q6(Z,Q,I([]))}function J6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return e(K);else{let X=W.head;Z=W.tail,Q=G,J=D(G(X),K)}}}function LZ(Z,Q){return J6(Z,Q,I([]))}function W6(Z,Q,J,W){while(!0){let G=Z,K=Q,X=J,V=W;if(G instanceof A)return e(V);else{let{head:Y,tail:H}=G,M=D(K(Y,X),V);Z=H,Q=K,J=X+1,W=M}}}function hG(Z,Q){return W6(Z,Q,0,I([]))}function G6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(G<=0)return e(K);else if(W instanceof A)return e(K);else{let V=W.head;Z=W.tail,Q=G-1,J=D(V,K)}}}function vG(Z,Q){return G6(Z,Q,I([]))}function K6(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else{let G=J.head;Z=J.tail,Q=D(G,W)}}}function Z9(Z,Q){return K6(e(Z),Q)}function cJ(Z,Q){return D(Q,Z)}function X6(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return e(W);else{let G=J.head;Z=J.tail,Q=b9(G,W)}}}function V6(Z){return X6(Z,I([]))}function h9(Z,Q){return V6(LZ(Z,Q))}function EZ(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return G;else{let X=W.head;Z=W.tail,Q=K(G,X),J=K}}}function gG(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return new b(void 0);else{let{head:G,tail:K}=J,X=W(G);if(X instanceof k)return X;else Z=K,Q=W}}}function VJ(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return!0;else{let{head:G,tail:K}=J,X=W(G);if(X)Z=K,Q=W;else return X}}}function YJ(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return!1;else{let{head:G,tail:K}=J,X=W(G);if(X)return X;else Z=K,Q=W}}}function Y6(Z,Q,J,W,G,K){while(!0){let X=Z,V=Q,Y=J,H=W,M=G,U=K,F=D(M,Y);if(X instanceof A)if(H instanceof CZ)return D(e(F),U);else return D(F,U);else{let{head:z,tail:N}=X,T=V(M,z);if(H instanceof CZ)if(T instanceof VZ)Z=N,Q=V,J=F,W=H,G=z,K=U;else if(T instanceof YZ)Z=N,Q=V,J=F,W=H,G=z,K=U;else{let O;if(H instanceof CZ)O=D(e(F),U);else O=D(F,U);let C=O;if(N instanceof A)return D(I([z]),C);else{let{head:P,tail:L}=N,E,q=V(z,P);if(q instanceof VZ)E=new CZ;else if(q instanceof YZ)E=new CZ;else E=new y9;let x=E;Z=L,Q=V,J=I([z]),W=x,G=P,K=C}}else if(T instanceof VZ){let O;if(H instanceof CZ)O=D(e(F),U);else O=D(F,U);let C=O;if(N instanceof A)return D(I([z]),C);else{let{head:P,tail:L}=N,E,q=V(z,P);if(q instanceof VZ)E=new CZ;else if(q instanceof YZ)E=new CZ;else E=new y9;let x=E;Z=L,Q=V,J=I([z]),W=x,G=P,K=C}}else if(T instanceof YZ){let O;if(H instanceof CZ)O=D(e(F),U);else O=D(F,U);let C=O;if(N instanceof A)return D(I([z]),C);else{let{head:P,tail:L}=N,E,q=V(z,P);if(q instanceof VZ)E=new CZ;else if(q instanceof YZ)E=new CZ;else E=new y9;let x=E;Z=L,Q=V,J=I([z]),W=x,G=P,K=C}}else Z=N,Q=V,J=F,W=H,G=z,K=U}}}function H6(Z,Q,J,W){while(!0){let G=Z,K=Q,X=J,V=W;if(G instanceof A)return b9(K,V);else if(K instanceof A)return b9(G,V);else{let{head:Y,tail:H}=G,M=K.head,U=K.tail,F=X(Y,M);if(F instanceof VZ)Z=H,Q=K,J=X,W=D(Y,V);else if(F instanceof YZ)Z=G,Q=U,J=X,W=D(M,V);else Z=G,Q=U,J=X,W=D(M,V)}}}function U6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return e(K);else{let X=W.tail;if(X instanceof A){let V=W.head;return e(D(e(V),K))}else{let V=W.head,Y=X.head,H=X.tail,M=H6(V,Y,G,I([]));Z=H,Q=G,J=D(M,K)}}}}function M6(Z,Q,J,W){while(!0){let G=Z,K=Q,X=J,V=W;if(G instanceof A)return b9(K,V);else if(K instanceof A)return b9(G,V);else{let{head:Y,tail:H}=G,M=K.head,U=K.tail,F=X(Y,M);if(F instanceof VZ)Z=G,Q=U,J=X,W=D(M,V);else if(F instanceof YZ)Z=H,Q=K,J=X,W=D(Y,V);else Z=H,Q=K,J=X,W=D(Y,V)}}}function F6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return e(K);else{let X=W.tail;if(X instanceof A){let V=W.head;return e(D(e(V),K))}else{let V=W.head,Y=X.head,H=X.tail,M=M6(V,Y,G,I([]));Z=H,Q=G,J=D(M,K)}}}}function R6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return W;else if(G instanceof CZ)if(W.tail instanceof A)return W.head;else Z=U6(W,K,I([])),Q=new y9,J=K;else if(W.tail instanceof A){let V=W.head;return e(V)}else Z=F6(W,K,I([])),Q=new CZ,J=K}}function uG(Z,Q){if(Z instanceof A)return Z;else{let J=Z.tail;if(J instanceof A)return Z;else{let W=Z.head,G=J.head,K=J.tail,X,V=Q(W,G);if(V instanceof VZ)X=new CZ;else if(V instanceof YZ)X=new CZ;else X=new y9;let Y=X,H=Y6(K,Q,I([W]),Y,G,I([]));return R6(H,new CZ,Q)}}}function _G(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return;else{let{head:G,tail:K}=J;W(G),Z=K,Q=W}}}function j6(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else{let G=J.head;Z=J.tail,Q=W+G}}}function mG(Z){return j6(Z,"")}class a8 extends R{constructor(Z){super();this.function=Z}}function N9(Z,Q){let J=Q.function(Z),W,G;if(W=J[0],G=J[1],G instanceof A)return new k(W);else return new b(G)}function CQ(Z){return new a8((Q)=>{return[Z,I([])]})}function pJ(Z,Q){return new a8((J)=>{let W=Z.function(J),G,K;return G=W[0],K=W[1],[Q(G),K]})}var S6=void 0,pG={};function vQ(Z){return Z.toString()}function r8(Z,Q){return Z.startsWith(Q)}var dG=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),O5=new RegExp(`^[${dG}]*`),j5=new RegExp(`[${dG}]*$`);function oZ(){return dZ.new()}function Q9(Z){return Z.size}function q9(Z){return bQ.fromArray(Z.entries())}function sG(Z,Q){return Q.delete(Z)}function NZ(Z,Q){let J=Z.get(Q,pG);if(J===pG)return new b(S6);return new k(J)}function nG(Z,Q,J){return J.set(Z,Q)}function yG(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let J=Q.indexOf("e");if(J>=0)return Q.slice(0,J)+".0"+Q.slice(J);else return Q+".0"}}class C6{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#K(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return yG(Z);if(Z instanceof y8)return this.#V(Z);if(Z instanceof gJ)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let W=[];for(let G of Array(Z.length).keys())W.push(String.fromCharCode(G+97));return`//fn(${W.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let J;if(Array.isArray(Z))J=`#(${Z.map((W)=>this.inspect(W)).join(", ")})`;else if(Z instanceof bQ)J=this.#Q(Z);else if(Z instanceof R)J=this.#J(Z);else if(Z instanceof dZ)J=this.#W(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((W)=>this.inspect(W)).join(", ")}))`;else J=this.#G(Z);return this.#Z.delete(Z),J}#G(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",J=[];for(let K of Object.keys(Z))J.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let W=J.length?" "+J.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${W}})`}#W(Z){let Q="dict.from_list([",J=!0;return Z.forEach((W,G)=>{if(!J)Q=Q+", ";Q=Q+"#("+this.inspect(G)+", "+this.inspect(W)+")",J=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((J)=>{let W=this.inspect(Z[J]);return isNaN(parseInt(J))?`${J}: ${W}`:W}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof A)return"[]";let Q='charlist.from_string("',J="[",W=Z;while(W instanceof GQ){let G=W.head;if(W=W.tail,J!=="[")J+=", ";if(J+=this.inspect(G),Q)if(Number.isInteger(G)&&G>=32&&G<=126)Q+=String.fromCharCode(G);else Q=null}if(Q)return Q+'")';else return J+"]"}#K(Z){let Q='"';for(let J=0;J<Z.length;J++){let W=Z[J];switch(W){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(W<" "||W>"~"&&W<" ")Q+="\\u{"+W.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=W}}return Q+='"',Q}#V(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let J=0;J<Z.byteSize-1;J++)Q+=Z.byteAt(J).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let J=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-J,Q+=`:size(${J})`}return Q+=">>",Q}}function l8(Z){return Q9(Z)===0}function AZ(Z,Q,J){return nG(Q,J,Z)}function L6(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else{let G=J.tail,K=J.head[0],X=J.head[1];Z=G,Q=AZ(W,K,X)}}}function tQ(Z){return L6(Z,oZ())}function E6(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else{let G=J.head;Z=J.tail,Q=D(G,W)}}}function w6(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return E6(W,I([]));else{let G=J.tail,K=J.head[0];Z=G,Q=D(K,W)}}}function VQ(Z){return w6(q9(Z),I([]))}function eZ(Z,Q){return sG(Q,Z)}function x6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return G;else{let X=W.tail,V=W.head[0],Y=W.head[1];Z=X,Q=K(G,V,Y),J=K}}}function UJ(Z,Q,J){return x6(q9(Z),Q,J)}function k6(Z,Q){let J=(W,G,K)=>{if(Z(G,K))return AZ(W,G,K);else return W};return UJ(Q,oZ(),J)}function lG(Z,Q){return k6(Q,Z)}function rG(Z){if(Z instanceof k)return!0;else return!1}function i8(Z,Q){if(Z instanceof k){let J=Z[0];return new k(Q(J))}else return Z}function D9(Z,Q){if(Z instanceof k)return Z;else{let J=Z[0];return new b(Q(J))}}function uQ(Z,Q){if(Z instanceof k){let J=Z[0];return Q(J)}else return Z}function dJ(Z,Q){if(Z instanceof k)return Z[0];else return Q}function O9(Z,Q){if(Z instanceof k)return Z[0];else return Q()}class MJ extends R{constructor(Z){super();this.dict=Z}}function gZ(){return new MJ(oZ())}function aG(Z){return B(Z,gZ())}function FJ(Z,Q){let J=Z.dict,W=NZ(J,Q);return rG(W)}function j9(Z){return VQ(Z.dict)}function J9(Z,Q,J){return UJ(Z.dict,Q,(W,G,K)=>{return J(W,G)})}function iG(Z,Q){return new MJ(lG(Z.dict,(J,W)=>{return Q(J)}))}function y6(Z,Q){if(Q9(Z.dict)>Q9(Q.dict))return[Z,Q];else return[Q,Z]}var tG=void 0;function RJ(Z,Q){return new MJ(AZ(Z.dict,Q,tG))}function $Z(Z){let Q=EZ(Z,oZ(),(J,W)=>{return AZ(J,W,tG)});return new MJ(Q)}function wZ(Z,Q){return J9(Z,gZ(),(J,W)=>{return RJ(J,Q(W))})}function W9(Z,Q){let J=y6(Z,Q),W,G;return W=J[0],G=J[1],J9(G,W,RJ)}class t8 extends R{constructor(Z){super();this.dict=Z}}function g9(){return new t8(oZ())}function o8(Z,Q){let J=Z.dict,W=NZ(J,Q);return dJ(W,0)}function u9(Z,Q){let J=o8(Z,Q)+1,W=AZ(Z.dict,Q,J);return new t8(W)}var r="src/chess.gleam";class nJ extends R{constructor(Z,Q,J,W){super();this.internal=Z,this.history=Q,this.status=J,this.starting_position=W}}class uZ extends R{constructor(Z,Q,J,W,G,K,X,V,Y){super();this.board=Z,this.moving_player=Q,this.en_passant_possible=J,this.short_castle_disqualified_white=W,this.long_castle_disqualified_white=G,this.short_castle_disqualified_black=K,this.long_castle_disqualified_black=X,this.fifty_move_rule_counter=V,this.threefold_repetition_counter=Y}}class eG extends R{constructor(Z,Q,J,W,G,K,X){super();this.board=Z,this.moving_player=Q,this.en_passant_possible=J,this.short_castle_disqualified_white=W,this.long_castle_disqualified_white=G,this.short_castle_disqualified_black=K,this.long_castle_disqualified_black=X}}class FQ extends R{constructor(Z){super();this.info=Z}}class G9 extends R{constructor(Z){super();this.next_player=Z}}class lJ extends R{constructor(Z,Q){super();this.winner=Z,this.by=Q}}class IJ extends R{constructor(Z){super();this.by=Z}}class rJ extends R{}class Z0 extends R{}class Q0 extends R{}class J0 extends R{}class W0 extends R{}class YQ extends R{constructor(Z,Q,J){super();this.white_king=Z,this.black_king=Q,this.other_figures=J}}class s extends R{}class ZQ extends R{}class mZ extends R{}class qZ extends R{}class QQ extends R{}class _Q extends R{}class f extends R{}class JZ extends R{}class j extends R{constructor(Z,Q){super();this.file=Z,this.row=Q}}class ZZ extends R{}class OZ extends R{}class WZ extends R{}class MZ extends R{}class c extends R{}class FZ extends R{}class GZ extends R{}class TZ extends R{}class h extends R{}class HZ extends R{}class cZ extends R{}class xZ extends R{}class kZ extends R{}class pZ extends R{}class UZ extends R{}class u extends R{}class JQ extends R{constructor(Z,Q){super();this.from=Z,this.to=Q}}class HQ extends R{constructor(Z,Q,J){super();this.from=Z,this.to=Q,this.new_figure=J}}class UQ extends R{constructor(Z,Q){super();this.from=Z,this.to=Q}}class MQ extends R{}class aJ extends R{}class G0 extends R{}class K0 extends R{}class iJ extends R{}class tJ extends R{constructor(Z){super();this.reason=Z}}class X0 extends R{}class V0 extends R{}class Y0 extends R{constructor(Z){super();this.reason=Z}}class yZ extends R{constructor(Z){super();this.to=Z}}class RQ extends R{constructor(Z){super();this.to=Z}}class IQ extends R{constructor(Z){super();this.to=Z}}class zQ extends R{}class ZW extends R{}class H0 extends R{constructor(Z){super();this.passed_move_number=Z}}class U0 extends R{constructor(Z,Q){super();this.passed_move_number=Z,this.allowed_maximum_move_number=Q}}class oJ extends R{constructor(Z,Q,J){super();this.origin=Z,this.offset=Q,this.attacker=J}}class eJ extends R{constructor(Z,Q,J){super();this.origin=Z,this.direction=Q,this.attacker=J}}class M0 extends R{}class F0 extends R{}function QW(Z){return Q9(Z.internal.board.other_figures)+2}function K9(Z){return Z.status}function f6(Z){return Z.fifty_move_rule_counter>=100}function h6(){return new YQ(new j(new c,new h),new j(new c,new u),tQ(I([[new j(new ZZ,new h),[new qZ,new f]],[new j(new OZ,new h),[new ZQ,new f]],[new j(new WZ,new h),[new mZ,new f]],[new j(new MZ,new h),[new QQ,new f]],[new j(new FZ,new h),[new mZ,new f]],[new j(new GZ,new h),[new ZQ,new f]],[new j(new TZ,new h),[new qZ,new f]],[new j(new ZZ,new HZ),[new s,new f]],[new j(new OZ,new HZ),[new s,new f]],[new j(new WZ,new HZ),[new s,new f]],[new j(new MZ,new HZ),[new s,new f]],[new j(new c,new HZ),[new s,new f]],[new j(new FZ,new HZ),[new s,new f]],[new j(new GZ,new HZ),[new s,new f]],[new j(new TZ,new HZ),[new s,new f]],[new j(new ZZ,new u),[new qZ,new JZ]],[new j(new OZ,new u),[new ZQ,new JZ]],[new j(new WZ,new u),[new mZ,new JZ]],[new j(new MZ,new u),[new QQ,new JZ]],[new j(new FZ,new u),[new mZ,new JZ]],[new j(new GZ,new u),[new ZQ,new JZ]],[new j(new TZ,new u),[new qZ,new JZ]],[new j(new ZZ,new UZ),[new s,new JZ]],[new j(new OZ,new UZ),[new s,new JZ]],[new j(new WZ,new UZ),[new s,new JZ]],[new j(new MZ,new UZ),[new s,new JZ]],[new j(new c,new UZ),[new s,new JZ]],[new j(new FZ,new UZ),[new s,new JZ]],[new j(new GZ,new UZ),[new s,new JZ]],[new j(new TZ,new UZ),[new s,new JZ]]])))}function R0(){let Z=new uZ(h6(),new f,new y,!1,!1,!1,!1,0,g9());return new nJ(Z,I([]),new G9(new f),Z)}function l(Z,Q){let J=Z.white_king;if(B(J,Q))return new S([new _Q,new f]);else{let W=Z.black_king;if(B(W,Q))return new S([new _Q,new JZ]);else{let K=Z.other_figures,X=NZ(K,Q);return b8(X)}}}function NQ(Z,Q){let J=Z.internal.board;return l(J,Q)}function oG(Z){let Q,J=Z.file;if(J instanceof ZZ)Q=0;else if(J instanceof OZ)Q=1;else if(J instanceof WZ)Q=2;else if(J instanceof MZ)Q=3;else if(J instanceof c)Q=4;else if(J instanceof FZ)Q=5;else if(J instanceof GZ)Q=6;else Q=7;let W=Q,G,K=Z.row;if(K instanceof h)G=0;else if(K instanceof HZ)G=1;else if(K instanceof cZ)G=2;else if(K instanceof xZ)G=3;else if(K instanceof kZ)G=4;else if(K instanceof pZ)G=5;else if(K instanceof UZ)G=6;else G=7;let V=(W+G)%2;if(V===0)return new F0;else if(V===1)return new M0;else throw v("panic",r,"chess",1828,"coord_colour","`panic` expression evaluated.",{})}function v6(Z){let Q=q9(Z.other_figures);if(Q instanceof A)return!0;else{let J=Q.tail;if(J instanceof A){let W=Q.head[1][0];if(W instanceof ZQ)return!0;else if(W instanceof mZ)return!0;else return!1}else if(J.tail instanceof A)if(J.head[1][0]instanceof mZ)if(Q.head[1][0]instanceof mZ){let X=J.head[1][1],V=Q.head[1][1];if(!B(V,X)){let Y=J.head[0],H=Q.head[0];return B(oG(H),oG(Y))}else return!1}else return!1;else return!1;else return!1}}function g6(Z,Q){while(!0){let J=Z,W=Q,G=$J(W,0);if(G instanceof VZ)if(J instanceof h)return new y;else if(J instanceof HZ)Z=new h,Q=W+1;else if(J instanceof cZ)Z=new HZ,Q=W+1;else if(J instanceof xZ)Z=new cZ,Q=W+1;else if(J instanceof kZ)Z=new xZ,Q=W+1;else if(J instanceof pZ)Z=new kZ,Q=W+1;else if(J instanceof UZ)Z=new pZ,Q=W+1;else Z=new UZ,Q=W+1;else if(G instanceof YZ)return new S(J);else if(J instanceof h)Z=new HZ,Q=W-1;else if(J instanceof HZ)Z=new cZ,Q=W-1;else if(J instanceof cZ)Z=new xZ,Q=W-1;else if(J instanceof xZ)Z=new kZ,Q=W-1;else if(J instanceof kZ)Z=new pZ,Q=W-1;else if(J instanceof pZ)Z=new UZ,Q=W-1;else if(J instanceof UZ)Z=new u,Q=W-1;else return new y}}function e8(Z,Q){while(!0){let J=Z,W=Q,G=$J(W,0);if(G instanceof VZ)if(J instanceof ZZ)return new y;else if(J instanceof OZ)Z=new ZZ,Q=W+1;else if(J instanceof WZ)Z=new OZ,Q=W+1;else if(J instanceof MZ)Z=new WZ,Q=W+1;else if(J instanceof c)Z=new MZ,Q=W+1;else if(J instanceof FZ)Z=new c,Q=W+1;else if(J instanceof GZ)Z=new FZ,Q=W+1;else Z=new GZ,Q=W+1;else if(G instanceof YZ)return new S(J);else if(J instanceof ZZ)Z=new OZ,Q=W-1;else if(J instanceof OZ)Z=new WZ,Q=W-1;else if(J instanceof WZ)Z=new MZ,Q=W-1;else if(J instanceof MZ)Z=new c,Q=W-1;else if(J instanceof c)Z=new FZ,Q=W-1;else if(J instanceof FZ)Z=new GZ,Q=W-1;else if(J instanceof GZ)Z=new TZ,Q=W-1;else return new y}}function u6(Z,Q){return fQ(Z.en_passant_possible,(J)=>{let W=I([e8(J,-1),e8(J,1)]),G=iQ(W),K=gG(G,(X)=>{let V;if(Z.moving_player instanceof f)V=[new j(X,new kZ),new j(J,new pZ)];else V=[new j(X,new xZ),new j(J,new cZ)];let H=V,M,U;if(M=H[0],U=H[1],B(Q,M))return new k(new IQ(U));else return new b(void 0)});return b8(K)})}function _9(Z,Q,J){return fQ(e8(Z.file,Q),(W)=>{return fQ(g6(Z.row,J),(G)=>{return new S(new j(W,G))})})}function _6(Z,Q){let J;if(Z.moving_player instanceof f)J=1;else J=-1;let G=J,K=fQ(_9(Q,0,G),(E)=>{if(l(Z.board,E)instanceof S)return new y;else return new S(E)}),X=fQ(K,(E)=>{let q;if(Z.moving_player instanceof f)q=new xZ;else q=new kZ;let w=q;return fQ(_9(E,0,G),(g)=>{return o(!B(g.row,w),new y,()=>{if(l(Z.board,g)instanceof S)return new y;else return new S(g)})})}),V=fQ(_9(Q,-1,G),(E)=>{let q=l(Z.board,E);if(q instanceof S){let x=q[0][1];if(B(x,Z.moving_player))return new y;else return new S(E)}else return q}),Y=fQ(_9(Q,1,G),(E)=>{let q=l(Z.board,E);if(q instanceof S){let x=q[0][1];if(B(x,Z.moving_player))return new y;else return new S(E)}else return q}),H,M=I([K,X,V,Y]),U=iQ(M),F=LZ(U,(E)=>{let q;if(Z.moving_player instanceof f)q=new u;else q=new h;let w=q,g=E.row;if(B(g,w))return new RQ(E);else return new yZ(E)});H=$Z(F);let z=H,N=u6(Z,Q),T,O=I([N]),C=iQ(O),P=$Z(C);return T=W9(P,z),T}function $6(Z,Q,J,W,G){while(!0){let K=Z,X=Q,V=J,Y=W,H=G,M=_9(X,V[0],V[1]);if(M instanceof S){let U=M[0],F=l(K,U);if(F instanceof S){let z=F[0][1];if(B(z,Y))return H;else return RJ(H,U)}else Z=K,Q=U,J=V,W=Y,G=RJ(H,U)}else return H}}function zJ(Z,Q){if(Q instanceof oJ){let{origin:J,attacker:W}=Q,G=Q.offset[0],K=Q.offset[1],X=_9(J,G,K);if(X instanceof S){let V=X[0],Y=l(Z,V);if(Y instanceof S){let H=Y[0][1];if(B(H,W))return gZ();else return $Z(I([V]))}else return $Z(I([V]))}else return gZ()}else{let{origin:J,direction:W,attacker:G}=Q;return $6(Z,J,W,G,gZ())}}function m6(Z,Q,J){let W=I([[1,2],[2,1],[2,-1],[1,-2],[-1,-2],[-2,-1],[-2,1],[-1,2]]),G=$Z(W),K=wZ(G,(Y)=>{return new oJ(Q,Y,J)}),X=wZ(K,(Y)=>{return zJ(Z,Y)}),V=J9(X,gZ(),W9);return wZ(V,(Y)=>{return new yZ(Y)})}function c6(Z,Q,J){let W=I([[0,1],[1,0],[0,-1],[-1,0]]),G=$Z(W),K=wZ(G,(Y)=>{return new eJ(Q,Y,J)}),X=wZ(K,(Y)=>{return zJ(Z,Y)}),V=J9(X,gZ(),W9);return wZ(V,(Y)=>{return new yZ(Y)})}function p6(Z,Q,J){let W=I([[1,1],[1,-1],[-1,-1],[-1,1]]),G=$Z(W),K=wZ(G,(Y)=>{return new eJ(Q,Y,J)}),X=wZ(K,(Y)=>{return zJ(Z,Y)}),V=J9(X,gZ(),W9);return wZ(V,(Y)=>{return new yZ(Y)})}function d6(Z,Q,J){let W=I([[0,1],[1,0],[0,-1],[-1,0],[1,1],[1,-1],[-1,-1],[-1,1]]),G=$Z(W),K=wZ(G,(Y)=>{return new eJ(Q,Y,J)}),X=wZ(K,(Y)=>{return zJ(Z,Y)}),V=J9(X,gZ(),W9);return wZ(V,(Y)=>{return new yZ(Y)})}function $9(Z){if(Z instanceof f)return new JZ;else return new f}function m9(Z){return new eG(Z.board,Z.moving_player,Z.en_passant_possible,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black)}function s6(Z){let Q=new uZ(Z.board,$9(Z.moving_player),Z.en_passant_possible,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,Z.threefold_repetition_counter),J=m9(Q);return(()=>{let W=Q.threefold_repetition_counter;return o8(W,J)})()>=2}var a=`Critical internal error!
This is not your fault (unless you mutated the internal state!).
If you see this message then this likely means, that something in this package's logic is incorrect.
Please open an issue at https://github.com/OlZe/Functional-Chess with a detailled description to help improve this package.
Sorry for the inconvience.`;function n6(Z,Q,J){let W;if(NZ(Z.board.other_figures,J)instanceof k)W=!0;else W=!1;let K=W,X,V=NZ(Z.board.other_figures,Q);if(V instanceof k)if(V[0][0]instanceof s)X=!0;else X=!1;else X=!1;let Y=X,H=o(Y,0,()=>{return o(K,0,()=>{return Z.fifty_move_rule_counter+1})}),M=o(K,g9(),()=>{return o(Y,g9(),()=>{let z=Z.threefold_repetition_counter;return u9(z,m9(Z))})}),U=Z.board,F=U.white_king;if(B(F,Q)){let{black_king:z,other_figures:N}=U;return new uZ(new YQ(J,z,eZ(N,J)),Z.moving_player,new y,!0,!0,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,H,M)}else{let z=U.black_king;if(B(z,Q)){let{white_king:N,other_figures:T}=U;return new uZ(new YQ(N,J,eZ(T,J)),Z.moving_player,new y,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,!0,!0,H,M)}else{let{white_king:N,black_king:T,other_figures:O}=U,C=NZ(O,Q),P;if(C instanceof k)P=C[0];else throw v("let_assert",r,"chess",1522,"do_move_standard_figure_move",a,{value:C,start:46713,end:46773,pattern_start:46724,pattern_end:46741});let L;if(P[1]instanceof f)if(P[0]instanceof s&&(B(Q.row,new HZ)&&B(J.row,new xZ))&&B(Q.file,J.file))L=new S(J.file);else L=new y;else if(P[0]instanceof s&&(B(Q.row,new UZ)&&B(J.row,new kZ))&&B(Q.file,J.file))L=new S(J.file);else L=new y;let q=L,x=Z.short_castle_disqualified_white||B(Q,new j(new TZ,new h))||B(J,new j(new TZ,new h)),w=Z.long_castle_disqualified_white||B(Q,new j(new ZZ,new h))||B(J,new j(new ZZ,new h)),g=Z.short_castle_disqualified_black||B(Q,new j(new TZ,new u))||B(J,new j(new TZ,new u)),m=Z.long_castle_disqualified_black||B(Q,new j(new ZZ,new u))||B(J,new j(new ZZ,new u));return new uZ(new YQ(N,T,(()=>{let RZ=eZ(O,Q);return AZ(RZ,J,P)})()),Z.moving_player,q,x,w,g,m,H,M)}}}function l6(Z,Q,J,W){let{board:G,moving_player:K}=Z,X=l(G,Q),V=new S([new s,K]);if(!B(X,V))throw v("assert",r,"chess",1588,"do_move_pawn_promotion",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:X,start:48810,end:48832},right:{kind:"expression",value:V,start:48836,end:48864},start:48803,end:48864,expression_start:48810});let Y=Z.short_castle_disqualified_white||B(J,new j(new TZ,new h)),H=Z.long_castle_disqualified_white||B(J,new j(new ZZ,new h)),M=Z.short_castle_disqualified_black||B(J,new j(new TZ,new u)),U=Z.long_castle_disqualified_black||B(J,new j(new ZZ,new u));return new uZ(new YQ(G.white_king,G.black_king,(()=>{let F=G.other_figures,z=eZ(F,Q);return AZ(z,J,[W,K])})()),Z.moving_player,new y,Y,H,M,U,0,g9())}function r6(Z,Q,J){let{board:W,moving_player:G}=Z,K=new j(J.file,Q.row),X=l(W,Q),V=new S([new s,G]);if(!B(X,V))throw v("assert",r,"chess",1634,"do_move_en_passant",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:X,start:50394,end:50416},right:{kind:"expression",value:V,start:50420,end:50448},start:50387,end:50448,expression_start:50394});let Y=l(W,K),H=new S([new s,$9(G)]);if(!B(Y,H))throw v("assert",r,"chess",1637,"do_move_en_passant",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:Y,start:50486,end:50520},right:{kind:"expression",value:H,start:50528,end:50569},start:50479,end:50569,expression_start:50486});let M=l(W,J);if(!B(M,new y))throw v("assert",r,"chess",1641,"do_move_en_passant",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:M,start:50607,end:50627},right:{kind:"literal",value:new y,start:50631,end:50635},start:50600,end:50635,expression_start:50607});return new uZ(new YQ(W.white_king,W.black_king,(()=>{let U=W.other_figures,F=eZ(U,Q),z=eZ(F,K);return AZ(z,J,[new s,G])})()),Z.moving_player,new y,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,0,g9())}function a6(Z){let{board:Q,moving_player:J}=Z,W;if(J instanceof f)W=new h;else W=new u;let G=W,K=new j(new c,G),X=new j(new GZ,G),V=new j(new TZ,G),Y=new j(new FZ,G),H=l(Q,K),M=new S([new _Q,J]);if(!B(H,M))throw v("assert",r,"chess",1674,"do_move_short_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:H,start:51584,end:51611},right:{kind:"expression",value:M,start:51615,end:51643},start:51577,end:51643,expression_start:51584});let U=l(Q,X);if(!B(U,new y))throw v("assert",r,"chess",1676,"do_move_short_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:U,start:51680,end:51705},right:{kind:"literal",value:new y,start:51709,end:51713},start:51673,end:51713,expression_start:51680});let F=l(Q,V),z=new S([new qZ,J]);if(!B(F,z))throw v("assert",r,"chess",1677,"do_move_short_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:F,start:51746,end:51773},right:{kind:"expression",value:z,start:51777,end:51805},start:51739,end:51805,expression_start:51746});let N=l(Q,Y);if(!B(N,new y))throw v("assert",r,"chess",1679,"do_move_short_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:N,start:51842,end:51867},right:{kind:"literal",value:new y,start:51871,end:51875},start:51835,end:51875,expression_start:51842});if(J instanceof f)return new uZ(new YQ(X,Q.black_king,(()=>{let T=Q.other_figures,O=eZ(T,V);return AZ(O,Y,[new qZ,J])})()),Z.moving_player,new y,!0,!0,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,(()=>{let T=Z.threefold_repetition_counter;return u9(T,m9(Z))})());else return new uZ(new YQ(Q.white_king,X,(()=>{let T=Q.other_figures,O=eZ(T,V);return AZ(O,Y,[new qZ,J])})()),Z.moving_player,new y,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,!0,!0,Z.fifty_move_rule_counter,(()=>{let T=Z.threefold_repetition_counter;return u9(T,m9(Z))})())}function i6(Z){let{board:Q,moving_player:J}=Z,W;if(J instanceof f)W=new h;else W=new u;let G=W,K=new j(new c,G),X=new j(new WZ,G),V=new j(new ZZ,G),Y=new j(new MZ,G),H=new j(new OZ,G),M=l(Q,K),U=new S([new _Q,J]);if(!B(M,U))throw v("assert",r,"chess",1737,"do_move_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:M,start:53665,end:53692},right:{kind:"expression",value:U,start:53696,end:53724},start:53658,end:53724,expression_start:53665});let F=l(Q,X);if(!B(F,new y))throw v("assert",r,"chess",1739,"do_move_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:F,start:53761,end:53786},right:{kind:"literal",value:new y,start:53790,end:53794},start:53754,end:53794,expression_start:53761});let z=l(Q,V),N=new S([new qZ,J]);if(!B(z,N))throw v("assert",r,"chess",1740,"do_move_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:z,start:53827,end:53854},right:{kind:"expression",value:N,start:53858,end:53886},start:53820,end:53886,expression_start:53827});let T=l(Q,Y);if(!B(T,new y))throw v("assert",r,"chess",1742,"do_move_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:T,start:53923,end:53948},right:{kind:"literal",value:new y,start:53952,end:53956},start:53916,end:53956,expression_start:53923});let O=l(Q,H);if(!B(O,new y))throw v("assert",r,"chess",1743,"do_move_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:O,start:53989,end:54016},right:{kind:"literal",value:new y,start:54020,end:54024},start:53982,end:54024,expression_start:53989});if(J instanceof f)return new uZ(new YQ(X,Q.black_king,(()=>{let C=Q.other_figures,P=eZ(C,V);return AZ(P,Y,[new qZ,J])})()),Z.moving_player,new y,!0,!0,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,(()=>{let C=Z.threefold_repetition_counter;return u9(C,m9(Z))})());else return new uZ(new YQ(Q.white_king,X,(()=>{let C=Q.other_figures,P=eZ(C,V);return AZ(P,Y,[new qZ,J])})()),Z.moving_player,new y,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,!0,!0,Z.fifty_move_rule_counter,(()=>{let C=Z.threefold_repetition_counter;return u9(C,m9(Z))})())}function JW(Z,Q){if(Q instanceof JQ){let{from:J,to:W}=Q;return n6(Z,J,W)}else if(Q instanceof HQ){let{from:J,to:W,new_figure:G}=Q;return l6(Z,J,W,G)}else if(Q instanceof UQ){let{from:J,to:W}=Q;return r6(Z,J,W)}else if(Q instanceof MQ)return a6(Z);else return i6(Z)}function sJ(Z,Q,J){let W;return W=VJ(Q,(X)=>{let V=l(Z.board,X);return BG(V)}),o(!W,!1,()=>{let X;if(Z.moving_player instanceof f)X=new j(new c,new h);else X=new j(new c,new u);let Y=X,H,U=LZ(J,(N)=>{return new JQ(Y,N)}),F=LZ(U,(N)=>{return JW(Z,N)});return H=YJ(F,Z8),!H})}function Z8(Z){let Q;if(Z.moving_player instanceof f)Q=Z.board.white_king;else Q=Z.board.black_king;let W=Q,G=$9(Z.moving_player),K=Z.board.other_figures,X=q9(K),V=f9(X,(U)=>{return B(U[1][1],G)}),Y=LZ(V,(U)=>{return U[0]}),H=h9(Y,(U)=>{let F=I0(new uZ(Z.board,G,Z.en_passant_possible,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,Z.threefold_repetition_counter),U),z=i8(F,j9);return dJ(z,I([]))}),M=mJ(H,(U)=>{if(U instanceof yZ){let F=U.to;return new k(F)}else if(U instanceof RQ){let F=U.to;return new k(F)}else if(U instanceof IQ)return new b(void 0);else if(U instanceof zQ)return new b(void 0);else return new b(void 0)});return YJ(M,(U)=>{return B(U,W)})}function I0(Z,Q){let J,W=l(Z.board,Q);return J=AG(W,new G0),uQ(J,(K)=>{let X,V;return X=K[0],V=K[1],o(!B(V,Z.moving_player),new b(new K0),()=>{let Y;if(X instanceof s)Y=_6(Z,Q);else if(X instanceof ZQ)Y=m6(Z.board,Q,Z.moving_player);else if(X instanceof mZ)Y=p6(Z.board,Q,Z.moving_player);else if(X instanceof qZ)Y=c6(Z.board,Q,Z.moving_player);else if(X instanceof QQ)Y=d6(Z.board,Q,Z.moving_player);else Y=t6(Z,Q);return new k(Y)})})}function t6(Z,Q){let J,W=I([[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]]),G=$Z(W),K=wZ(G,(E)=>{return new oJ(Q,E,Z.moving_player)}),X=wZ(K,(E)=>{return zJ(Z.board,E)}),V=J9(X,gZ(),W9);J=wZ(V,(E)=>{return new yZ(E)});let Y=J,H;if(o6(Z))H=new S(new zQ);else H=new y;let U=H,F;if(J7(Z))F=new S(new ZW);else F=new y;let N=F,T,O=I([U,N]),C=iQ(O),P=$Z(C);return T=W9(P,Y),T}function o6(Z){if(Z.moving_player instanceof f)return o(Z.short_castle_disqualified_white,!1,()=>{let J=l(Z.board,new j(new c,new h)),W=new S([new _Q,new f]);if(!B(J,W))throw v("assert",r,"chess",1080,"can_short_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:J,start:32415,end:32461},right:{kind:"literal",value:W,start:32473,end:32493},start:32408,end:32493,expression_start:32415});let G=l(Z.board,new j(new TZ,new h)),K=new S([new qZ,new f]);if(!B(G,K))throw v("assert",r,"chess",1084,"can_short_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:32539,end:32585},right:{kind:"literal",value:K,start:32597,end:32617},start:32532,end:32617,expression_start:32539});return sJ(Z,I([new j(new FZ,new h),new j(new GZ,new h)]),I([new j(new c,new h),new j(new FZ,new h),new j(new GZ,new h)]))});else return o(Z.short_castle_disqualified_black,!1,()=>{let J=l(Z.board,new j(new c,new u)),W=new S([new _Q,new JZ]);if(!B(J,W))throw v("assert",r,"chess",1106,"can_short_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:J,start:33208,end:33254},right:{kind:"literal",value:W,start:33266,end:33286},start:33201,end:33286,expression_start:33208});let G=l(Z.board,new j(new TZ,new u)),K=new S([new qZ,new JZ]);if(!B(G,K))throw v("assert",r,"chess",1110,"can_short_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:33332,end:33378},right:{kind:"literal",value:K,start:33390,end:33410},start:33325,end:33410,expression_start:33332});return sJ(Z,I([new j(new FZ,new u),new j(new GZ,new u)]),I([new j(new c,new u),new j(new FZ,new u),new j(new GZ,new u)]))})}function Q8(Z){return Z8(Z.internal)}function WW(Z,Q){return uQ(I0(Z,Q),(J)=>{let G=iG(J,(K)=>{let X;if(K instanceof yZ){let U=K.to;X=new JQ(Q,U)}else if(K instanceof RQ){let U=K.to;X=new HQ(Q,U,new QQ)}else if(K instanceof IQ){let U=K.to;X=new UQ(Q,U)}else if(K instanceof zQ)X=new MQ;else X=new aJ;let H=JW(Z,X),M=Z8(H);return zG(M)});return new k(G)})}function GW(Z,Q){let J=Z.status;if(J instanceof FQ)return new b(new V0);else{let W=Z.internal,G=J.next_player,K=W.moving_player;if(!B(K,G))throw v("assert",r,"chess",486,"get_moves",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:K,start:14480,end:14498},right:{kind:"expression",value:G,start:14502,end:14515},start:14473,end:14515,expression_start:14480});let X=WW(W,Q);return D9(X,(V)=>{return new Y0(V)})}}function z0(Z){let Q;if(Z.moving_player instanceof f)Q=Z.board.white_king;else Q=Z.board.black_king;let W=Q,G,K=Z.board.other_figures,X=q9(K),V=mJ(X,(N)=>{let T,O;if(T=N[0],O=N[1][1],B(O,Z.moving_player))return new k(T);else return new b(void 0)});G=Z9(V,I([W]));let Y=G,H,U=LZ(Y,(N)=>{let T,O=WW(Z,N);return T=O9(O,()=>{throw v("panic",r,"chess",821,"get_all_moves_internal",a,{})}),[N,T]}),F=f9(U,(N)=>{let T;return T=N[1],!aG(T)});return H=tQ(F),H}function N0(Z){let Q=Z.status;if(Q instanceof FQ)return new b(void 0);else{let J=Z.internal,W=Q.next_player,G=J.moving_player;if(!B(G,W))throw v("assert",r,"chess",508,"get_all_moves",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:15284,end:15302},right:{kind:"expression",value:W,start:15306,end:15319},start:15277,end:15319,expression_start:15284});return new k(z0(J))}}function e6(Z){let Q=$9(Z.moving_player),J=new uZ(Z.board,Q,Z.en_passant_possible,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,Z.threefold_repetition_counter),W,G=z0(J);W=l8(G);let K=W,X=Z8(J);if(K)if(X)return new S(new lJ(Z.moving_player,new rJ));else return new S(new IJ(new Z0));else return new y}function Z7(Z){let Q;if(v6(Z.board))Q=new S(new IJ(new Q0));else Q=new y;return GJ(Q,()=>{let G=e6(Z);return GJ(G,()=>{let K;if(s6(Z))K=new S(new IJ(new J0));else K=new y;return GJ(K,()=>{let Y;if(f6(Z))Y=new S(new IJ(new W0));else Y=new y;return GJ(Y,()=>{return new y})})})})}function Q7(Z,Q){{let J,W;{let X;if(Q instanceof JQ)X=Q.from;else if(Q instanceof HQ)X=Q.from;else if(Q instanceof UQ)X=Q.from;else if(Q instanceof MQ)if(Z.moving_player instanceof f)X=new j(new c,new h);else X=new j(new c,new u);else if(Z.moving_player instanceof f)X=new j(new c,new h);else X=new j(new c,new u);W=WW(Z,X)}return J=D9(W,(X)=>{return new tJ(X)}),uQ(J,(X)=>{let V;{let H;if(Q instanceof JQ){let U=Q.to;H=new yZ(U)}else if(Q instanceof HQ){let U=Q.to;H=new RQ(U)}else if(Q instanceof UQ){let U=Q.to;H=new IQ(U)}else if(Q instanceof MQ)H=new zQ;else H=new ZW;V=FJ(X,H)}return o(!V,new b(new X0),()=>{let H=JW(Z,Q),M,U=Z7(H);if(U instanceof S){let N=U[0];M=new FQ(N)}else M=new G9($9(H.moving_player));let F=M,z=new uZ(H.board,$9(H.moving_player),H.en_passant_possible,H.short_castle_disqualified_white,H.long_castle_disqualified_white,H.short_castle_disqualified_black,H.long_castle_disqualified_black,H.fifty_move_rule_counter,H.threefold_repetition_counter);return new k([z,F])})})}}function NJ(Z,Q){let J=Z.status;if(J instanceof FQ)return new b(new iJ);else{let W=Z.internal,G=J.next_player,K=W.moving_player;if(!B(K,G))throw v("assert",r,"chess",418,"player_move",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:K,start:12251,end:12278},right:{kind:"expression",value:G,start:12282,end:12295},start:12244,end:12295,expression_start:12251});return uQ(Q7(W,Q),(X)=>{let V,Y;return V=X[0],Y=X[1],new k(new nJ(V,(()=>{let H=Z.history;return Z9(H,I([[Q,G]]))})(),Y,Z.starting_position))})}}function q0(Z,Q){return o(Q<0,new b(new H0(Q)),()=>{let J=bG(Z.history);return o(Q>J,new b(new U0(Q,J)),()=>{let W=new nJ(Z.starting_position,I([]),new G9(Z.starting_position.moving_player),Z.starting_position),G=Z.history,K=vG(G,Q),X=EZ(K,W,(V,Y)=>{let H,M;H=Y[0],M=Y[1];let U=V.status,F=new G9(M);if(!B(U,F))throw v("assert",r,"chess",570,"get_past_position",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:U,start:17238,end:17249},right:{kind:"expression",value:F,start:17253,end:17279},start:17231,end:17279,expression_start:17238});let z=NJ(V,H),N;if(z instanceof k)N=z[0];else throw v("let_assert",r,"chess",572,"get_past_position","Pattern match failed, no pattern matched the value.",{value:z,start:17308,end:17355,pattern_start:17319,pattern_end:17327});return N});return new k(X)})})}function J7(Z){if(Z.moving_player instanceof f)return o(Z.long_castle_disqualified_white,!1,()=>{let J=l(Z.board,new j(new c,new h)),W=new S([new _Q,new f]);if(!B(J,W))throw v("assert",r,"chess",1138,"can_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:J,start:34151,end:34197},right:{kind:"literal",value:W,start:34209,end:34229},start:34144,end:34229,expression_start:34151});let G=l(Z.board,new j(new ZZ,new h)),K=new S([new qZ,new f]);if(!B(G,K))throw v("assert",r,"chess",1142,"can_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:34275,end:34321},right:{kind:"literal",value:K,start:34333,end:34353},start:34268,end:34353,expression_start:34275});return sJ(Z,I([new j(new MZ,new h),new j(new WZ,new h),new j(new OZ,new h)]),I([new j(new c,new h),new j(new MZ,new h),new j(new WZ,new h)]))});else return o(Z.long_castle_disqualified_black,!1,()=>{let J=l(Z.board,new j(new c,new u)),W=new S([new _Q,new JZ]);if(!B(J,W))throw v("assert",r,"chess",1168,"can_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:J,start:35009,end:35055},right:{kind:"literal",value:W,start:35067,end:35087},start:35002,end:35087,expression_start:35009});let G=l(Z.board,new j(new ZZ,new u)),K=new S([new qZ,new JZ]);if(!B(G,K))throw v("assert",r,"chess",1172,"can_long_castle",a,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:35133,end:35179},right:{kind:"literal",value:K,start:35191,end:35211},start:35126,end:35211,expression_start:35133});return sJ(Z,I([new j(new MZ,new u),new j(new WZ,new u),new j(new OZ,new u)]),I([new j(new c,new u),new j(new MZ,new u),new j(new WZ,new u)]))})}function jZ(Z){return Z}var WQ=()=>globalThis?.document,W8="http://www.w3.org/1999/xhtml",G8=1,XW=3;var B0=!!globalThis.HTMLElement?.prototype?.moveBefore;var _=I([]),K8=new y;var U7=new hQ,M7=new VZ,F7=new YZ;function X8(Z,Q){if(Z.name===Q.name)return F7;else if(Z.name<Q.name)return M7;else return U7}class EQ extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class V8 extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class bZ extends R{constructor(Z,Q,J,W,G,K,X,V,Y){super();this.kind=Z,this.name=Q,this.handler=J,this.include=W,this.prevent_default=G,this.stop_propagation=K,this.immediate=X,this.debounce=V,this.throttle=Y}}class DJ extends R{constructor(Z,Q,J){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=J}}class C0 extends R{constructor(Z){super();this.kind=Z}}class L0 extends R{constructor(Z){super();this.kind=Z}}function D7(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else{let G=J.head;if(G instanceof EQ){let K=G.name;if(K==="")Z=J.tail,Q=W;else if(K==="class"){let X=G.value;if(X==="")Z=J.tail,Q=W;else{let V=J.tail;if(V instanceof A){let Y=G;Z=V,Q=D(Y,W)}else{let Y=V.head;if(Y instanceof EQ)if(Y.name==="class"){let M=G.kind,U=X,F=V.tail,z=Y.value,N=U+" "+z,T=new EQ(M,"class",N);Z=D(T,F),Q=W}else{let M=G;Z=V,Q=D(M,W)}else{let H=G;Z=V,Q=D(H,W)}}}}else if(K==="style"){let X=G.value;if(X==="")Z=J.tail,Q=W;else{let V=J.tail;if(V instanceof A){let Y=G;Z=V,Q=D(Y,W)}else{let Y=V.head;if(Y instanceof EQ)if(Y.name==="style"){let M=G.kind,U=X,F=V.tail,z=Y.value,N=U+";"+z,T=new EQ(M,"style",N);Z=D(T,F),Q=W}else{let M=G;Z=V,Q=D(M,W)}else{let H=G;Z=V,Q=D(H,W)}}}}else{let X=G;Z=J.tail,Q=D(X,W)}}else{let K=G;Z=J.tail,Q=D(K,W)}}}}function E0(Z){if(Z instanceof A)return Z;else if(Z.tail instanceof A)return Z;else{let W=uG(Z,(G,K)=>{return X8(K,G)});return D7(W,_)}}var HW=0;function w0(Z,Q){return new EQ(HW,Z,Q)}var x0=1;var UW=2;function k0(Z,Q,J,W,G,K,X,V){return new bZ(UW,Z,Q,J,W,G,K,X,V)}var MW=0;var FW=new C0(MW);var Y8=2,y0=new L0(Y8);function mQ(Z,Q){return w0(Z,Q)}function PZ(Z){return mQ("class",Z)}function b0(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof A)return W;else if(J.head[1]){let K=J.tail,X=J.head[0];return W+X+" "+b0(K,W)}else Z=J.tail,Q=W}}function wQ(Z){return PZ(b0(Z,""))}function H8(Z){return mQ("draggable",(()=>{if(Z)return"true";else return"false"})())}function U8(Z){return mQ("href",Z)}function M8(Z){return mQ("target",Z)}function F8(Z){return mQ("alt",Z)}function R8(Z){return mQ("src",Z)}class z8 extends R{constructor(Z,Q,J){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=J}}class f0 extends R{constructor(Z,Q,J,W,G){super();this.dispatch=Z,this.emit=Q,this.select=J,this.root=W,this.provide=G}}function h0(Z,Q,J,W,G,K){let X=new f0(Q,J,W,G,K);return _G(Z.synchronous,(V)=>{return V(X)})}var I8=new z8(I([]),I([]),I([]));function OJ(){return I8}function v0(Z){return new z8(I([(J)=>{let W=J.dispatch;return Z(W)}]),I8.before_paint,I8.after_paint)}function g0(Z){return EZ(Z,I8,(Q,J)=>{return new z8(EZ(J.synchronous,Q.synchronous,cJ),EZ(J.before_paint,Q.before_paint,cJ),EZ(J.after_paint,Q.after_paint,cJ))})}function nZ(){return null}function jJ(Z,Q){let J=Z?.get(Q);if(J!=null)return new k(J);else return new b(void 0)}function BJ(Z,Q){return Z&&Z.has(Q)}function B9(Z,Q,J){return Z??=new Map,Z.set(Q,J),Z}function RW(Z,Q){return Z?.delete(Q),Z}class IW extends R{}class zW extends R{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class u0 extends R{constructor(Z,Q){super();this.index=Z,this.parent=Q}}function A7(Z,Q){while(!0){let J=Z,W=Q;if(W instanceof A)return!1;else{let{head:G,tail:K}=W,X=r8(J,G);if(X)return X;else Z=J,Q=K}}}function DQ(Z,Q,J){if(J==="")return new u0(Q,Z);else return new zW(J,Z)}var N8=new IW,PJ="\t";function _0(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof IW)if(W instanceof A)return"";else{let G=W.tail;return mG(G)}else if(J instanceof zW){let G=J.key;Z=J.parent,Q=D(PJ,D(G,W))}else{let G=J.index;Z=J.parent,Q=D(PJ,D(vQ(G),W))}}}function P7(Z){return _0(Z,I([]))}function $0(Z,Q){if(Q instanceof A)return!1;else return A7(P7(Z),Q)}var NW=`
`;function qW(Z,Q){return _0(Z,I([NW,Q]))}class OQ extends R{constructor(Z,Q,J,W,G){super();this.kind=Z,this.key=Q,this.mapper=J,this.children=W,this.keyed_children=G}}class jQ extends R{constructor(Z,Q,J,W,G,K,X,V,Y,H){super();this.kind=Z,this.key=Q,this.mapper=J,this.namespace=W,this.tag=G,this.attributes=K,this.children=X,this.keyed_children=V,this.self_closing=Y,this.void=H}}class BQ extends R{constructor(Z,Q,J,W){super();this.kind=Z,this.key=Q,this.mapper=J,this.content=W}}class s9 extends R{constructor(Z,Q,J,W,G,K,X){super();this.kind=Z,this.key=Q,this.mapper=J,this.namespace=W,this.tag=G,this.attributes=K,this.inner_html=X}}function C7(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function c0(Z,Q){if(Q instanceof OQ)return new OQ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof jQ)return new jQ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof BQ)return new BQ(Q.kind,Z,Q.mapper,Q.content);else return new s9(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}var AQ=0;function DW(Z,Q,J,W){return new OQ(AQ,Z,Q,J,W)}var A9=1;function TJ(Z,Q,J,W,G,K,X,V,Y){return new jQ(A9,Z,Q,J,W,E0(G),K,X,V,Y||C7(W,J))}var n9=2;function OW(Z,Q,J){return new BQ(n9,Z,Q,J)}var p0=3;var jW=(Z,Q)=>Z===Q,T9=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let J=typeof Z;if(J!==typeof Q)return!1;if(J!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return L7(Z,Q);return E7(Z,Q)},L7=(Z,Q)=>{let J=Z.length;if(J!==Q.length)return!1;while(J--)if(!T9(Z[J],Q[J]))return!1;return!0},E7=(Z,Q)=>{let J=Object.keys(Z),W=J.length;if(Object.keys(Q).length!==W)return!1;while(W--){let G=J[W];if(!Object.hasOwn(Q,G))return!1;if(!T9(Z[G],Q[G]))return!1}return!0};class pQ extends R{constructor(Z,Q,J){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=J}}function AW(){return new pQ(nZ(),_,_)}function l0(Z){return new pQ(Z.handlers,Z.next_dispatched_paths,_)}function r0(Z,Q,J){return RW(Z,qW(Q,J))}function SJ(Z,Q,J){let W=r0(Z.handlers,Q,J);return new pQ(W,Z.dispatched_paths,Z.next_dispatched_paths)}function d0(Z,Q,J){return EZ(J,Z,(W,G)=>{if(G instanceof bZ){let K=G.name;return r0(W,Q,K)}else return W})}function CJ(Z,Q,J,W){let G=D(Q,Z.next_dispatched_paths),K=new pQ(Z.handlers,Z.dispatched_paths,G),X=jJ(K.handlers,Q+NW+J);if(X instanceof k){let V=X[0];return[K,N9(W,V)]}else return[K,new b(I([]))]}function q8(Z,Q){return $0(Q,Z.dispatched_paths)}function a0(Z,Q,J,W,G){return B9(Z,qW(J,W),pJ(G,(K)=>{return new DJ(K.prevent_default,K.stop_propagation,jZ(Q)(K.message))}))}function LJ(Z,Q,J,W,G){let K=a0(Z.handlers,Q,J,W,G);return new pQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function s0(Z,Q,J,W){return EZ(W,Z,(G,K)=>{if(K instanceof bZ){let{name:X,handler:V}=K;return a0(G,Q,J,X,V)}else return G})}function X9(Z,Q){let J=jW(Z,jZ);if(jW(Q,jZ))return Z;else if(J)return Q;else return(G)=>{return Z(Q(G))}}function n0(Z,Q,J,W){while(!0){let G=Z,K=Q,X=J,V=W;if(V instanceof A)return G;else{let{head:Y,tail:H}=V;Z=i0(G,K,X,Y),Q=K,J=X+1,W=H}}}function i0(Z,Q,J,W){if(W instanceof OQ){let G=W.children,K=DQ(Q,J,W.key);return n0(Z,K,0,G)}else if(W instanceof jQ){let{attributes:G,children:K}=W,X=DQ(Q,J,W.key),Y=d0(Z,X,G);return n0(Y,X,0,K)}else if(W instanceof BQ)return Z;else{let G=W.attributes,K=DQ(Q,J,W.key);return d0(Z,K,G)}}function dQ(Z,Q,J,W){let G=i0(Z.handlers,Q,J,W);return new pQ(G,Z.dispatched_paths,Z.next_dispatched_paths)}function BW(Z,Q,J,W,G){while(!0){let K=Z,X=Q,V=J,Y=W,H=G;if(H instanceof A)return K;else{let{head:M,tail:U}=H;Z=t0(K,X,V,Y,M),Q=X,J=V,W=Y+1,G=U}}}function t0(Z,Q,J,W,G){if(G instanceof OQ){let K=G.children,X=DQ(J,W,G.key),V=X9(Q,G.mapper);return BW(Z,V,X,0,K)}else if(G instanceof jQ){let{attributes:K,children:X}=G,V=DQ(J,W,G.key),Y=X9(Q,G.mapper),M=s0(Z,Y,V,K);return BW(M,Y,V,0,X)}else if(G instanceof BQ)return Z;else{let K=G.attributes,X=DQ(J,W,G.key),V=X9(Q,G.mapper);return s0(Z,V,X,K)}}function sQ(Z,Q,J,W,G){let K=t0(Z.handlers,Q,J,W,G);return new pQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function o0(Z){return sQ(AW(),jZ,N8,0,Z)}function e0(Z,Q,J,W,G){let K=BW(Z.handlers,Q,J,W,G);return new pQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function xQ(Z,Q,J){return TJ("",jZ,"",Z,Q,J,nZ(),!1,!1)}function D8(Z){return OW("",jZ,Z)}function ZK(){return OW("",jZ,"")}function lZ(Z){return D8(Z)}function QK(Z,Q){return xQ("body",Z,Q)}function JK(Z,Q){return xQ("aside",Z,Q)}function WK(Z,Q){return xQ("main",Z,Q)}function Y9(Z,Q){return xQ("div",Z,Q)}function H9(Z,Q){return xQ("p",Z,Q)}function O8(Z,Q){return xQ("a",Z,Q)}function j8(Z){return xQ("img",Z,_)}function GK(Z,Q){return xQ("button",Z,Q)}class wJ extends R{constructor(Z,Q,J,W){super();this.index=Z,this.removed=Q,this.changes=J,this.children=W}}class KK extends R{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class XK extends R{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class VK extends R{constructor(Z,Q,J){super();this.kind=Z,this.added=Q,this.removed=J}}class YK extends R{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.before=J}}class HK extends R{constructor(Z,Q,J){super();this.kind=Z,this.index=Q,this.with=J}}class UK extends R{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class MK extends R{constructor(Z,Q,J){super();this.kind=Z,this.children=Q,this.before=J}}function PW(Z,Q,J,W){return new wJ(Z,Q,J,W)}var TW=0;function FK(Z){return new KK(TW,Z)}var SW=1;function RK(Z){return new XK(SW,Z)}var CW=2;function LW(Z,Q){return new VK(CW,Z,Q)}var EW=3;function IK(Z,Q){return new YK(EW,Z,Q)}var wW=4;function zK(Z){return new UK(wW,Z)}var xW=5;function S9(Z,Q){return new HK(xW,Z,Q)}var kW=6;function yW(Z,Q){return new MK(kW,Z,Q)}class qK extends R{constructor(Z,Q,J,W,G,K,X,V){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=J,this.observed_attributes=W,this.observed_properties=G,this.requested_contexts=K,this.provided_contexts=X,this.vdom=V}}class DK extends R{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class OK extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.data=J}}class jK extends R{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.value=J}}class B8 extends R{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class A8 extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class P8 extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class T8 extends R{constructor(Z,Q,J,W){super();this.kind=Z,this.path=Q,this.name=J,this.event=W}}class bW extends R{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.value=J}}var b7=0;function BK(Z,Q,J,W,G,K,X){return new qK(b7,Z,Q,J,W,G,K,X)}var f7=1;function fW(Z){return new DK(f7,Z)}var h7=2;function AK(Z,Q){return new OK(h7,Z,Q)}var v7=3;function PK(Z,Q){return new jK(v7,Z,Q)}class S8 extends R{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class CK extends R{constructor(Z,Q,J){super();this.added=Z,this.removed=Q,this.events=J}}function g7(Z,Q,J,W){if(J==="input"&&Q==="")return q8(Z,W);else if(J==="select"&&Q==="")return q8(Z,W);else if(J==="textarea"&&Q==="")return q8(Z,W);else return!1}function SK(Z,Q,J,W,G,K,X,V){while(!0){let Y=Z,H=Q,M=J,U=W,F=G,z=K,N=X,T=V;if(z instanceof A)if(F instanceof A)return new CK(N,T,U);else{let O=F.head;if(O instanceof bZ){let C=O,P=F.tail,L=O.name,E=D(C,T),q=SJ(U,H,L);Z=Y,Q=H,J=M,W=q,G=P,K=z,X=N,V=E}else{let C=O,P=F.tail,L=D(C,T);Z=Y,Q=H,J=M,W=U,G=P,K=z,X=N,V=L}}else if(F instanceof A){let O=z.head;if(O instanceof bZ){let C=O,P=z.tail,L=O.name,E=O.handler,q=D(C,N),x=LJ(U,M,H,L,E);Z=Y,Q=H,J=M,W=x,G=F,K=P,X=q,V=T}else{let C=O,P=z.tail,L=D(C,N);Z=Y,Q=H,J=M,W=U,G=F,K=P,X=L,V=T}}else{let{head:O,tail:C}=z,P=F.head,L=F.tail,E=X8(P,O);if(E instanceof VZ)if(P instanceof bZ){let q=P.name,x=D(P,T),w=SJ(U,H,q);Z=Y,Q=H,J=M,W=w,G=L,K=z,X=N,V=x}else{let q=D(P,T);Z=Y,Q=H,J=M,W=U,G=L,K=z,X=N,V=q}else if(E instanceof YZ)if(O instanceof EQ)if(P instanceof EQ){let q,x=O.name;if(x==="value")q=Y||P.value!==O.value;else if(x==="checked")q=Y||P.value!==O.value;else if(x==="selected")q=Y||P.value!==O.value;else q=P.value!==O.value;let w=q,g;if(w)g=D(O,N);else g=N;let m=g;Z=Y,Q=H,J=M,W=U,G=L,K=C,X=m,V=T}else if(P instanceof bZ){let q=P.name,x=D(O,N),w=D(P,T),g=SJ(U,H,q);Z=Y,Q=H,J=M,W=g,G=L,K=C,X=x,V=w}else{let q=D(O,N),x=D(P,T);Z=Y,Q=H,J=M,W=U,G=L,K=C,X=q,V=x}else if(O instanceof V8)if(P instanceof V8){let q,x=O.name;if(x==="scrollLeft")q=!0;else if(x==="scrollRight")q=!0;else if(x==="value")q=Y||!T9(P.value,O.value);else if(x==="checked")q=Y||!T9(P.value,O.value);else if(x==="selected")q=Y||!T9(P.value,O.value);else q=!T9(P.value,O.value);let w=q,g;if(w)g=D(O,N);else g=N;let m=g;Z=Y,Q=H,J=M,W=U,G=L,K=C,X=m,V=T}else if(P instanceof bZ){let q=P.name,x=D(O,N),w=D(P,T),g=SJ(U,H,q);Z=Y,Q=H,J=M,W=g,G=L,K=C,X=x,V=w}else{let q=D(O,N),x=D(P,T);Z=Y,Q=H,J=M,W=U,G=L,K=C,X=q,V=x}else if(P instanceof bZ){let{name:q,handler:x}=O,w=P.prevent_default.kind!==O.prevent_default.kind||P.stop_propagation.kind!==O.stop_propagation.kind||P.immediate!==O.immediate||P.debounce!==O.debounce||P.throttle!==O.throttle,g;if(w)g=D(O,N);else g=N;let m=g,p=LJ(U,M,H,q,x);Z=Y,Q=H,J=M,W=p,G=L,K=C,X=m,V=T}else{let{name:q,handler:x}=O,w=D(O,N),g=D(P,T),m=LJ(U,M,H,q,x);Z=Y,Q=H,J=M,W=m,G=L,K=C,X=w,V=g}else if(O instanceof bZ){let{name:q,handler:x}=O,w=D(O,N),g=LJ(U,M,H,q,x);Z=Y,Q=H,J=M,W=g,G=F,K=C,X=w,V=T}else{let q=D(O,N);Z=Y,Q=H,J=M,W=U,G=F,K=C,X=q,V=T}}}}function hW(Z,Q,J,W,G,K,X,V,Y,H,M,U,F,z){while(!0){let N=Z,T=Q,O=J,C=W,P=G,L=K,E=X,q=V,x=Y,w=H,g=M,m=U,p=F,RZ=z;if(O instanceof A)if(N instanceof A)return new S8(new wJ(x,E,g,m),RZ);else{let{head:_Z,tail:kQ}=N,IZ;if(_Z.key===""||!BJ(P,_Z.key))IZ=E+1;else IZ=E;let $=IZ,KZ=dQ(RZ,w,q,_Z);Z=kQ,Q=T,J=O,W=C,G=P,K=L,X=$,V=q,Y=x,H=w,M=g,U=m,F=p,z=KZ}else if(N instanceof A){let _Z=e0(RZ,p,w,q,O),kQ=yW(O,q-L),IZ=D(kQ,g);return new S8(new wJ(x,E,IZ,m),_Z)}else{let _Z=O.head,kQ=N.head;if(kQ.key!==_Z.key){let IZ=O.tail,XZ=N.tail,$=jJ(T,_Z.key),KZ=BJ(C,kQ.key);if($ instanceof k)if(KZ){let n=$[0];if(BJ(P,kQ.key))Z=XZ,Q=T,J=O,W=C,G=P,K=L-1,X=E,V=q,Y=x,H=w,M=g,U=m,F=p,z=RZ;else{let QZ=q-L,d=D(IK(_Z.key,QZ),g),zZ=B9(P,_Z.key,void 0),t=L+1;Z=D(n,N),Q=T,J=O,W=C,G=zZ,K=t,X=E,V=q,Y=x,H=w,M=d,U=m,F=p,z=RZ}}else{let n=q-L,i=D(zK(n),g),QZ=dQ(RZ,w,q,kQ),d=L-1;Z=XZ,Q=T,J=O,W=C,G=P,K=d,X=E,V=q,Y=x,H=w,M=i,U=m,F=p,z=QZ}else if(KZ){let n=q-L,i=sQ(RZ,p,w,q,_Z),QZ=yW(I([_Z]),n),d=D(QZ,g);Z=N,Q=T,J=IZ,W=C,G=P,K=L+1,X=E,V=q+1,Y=x,H=w,M=d,U=m,F=p,z=i}else{let n=S9(q-L,_Z),i,d=dQ(RZ,w,q,kQ);i=sQ(d,p,w,q,_Z);let zZ=i;Z=XZ,Q=T,J=IZ,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=D(n,g),U=m,F=p,z=zZ}}else{let IZ=N.head;if(IZ instanceof OQ){let XZ=O.head;if(XZ instanceof OQ){let $=XZ,KZ=O.tail,n=IZ,i=N.tail,QZ=X9(p,$.mapper),d=DQ(w,q,$.key),zZ=hW(n.children,n.keyed_children,$.children,$.keyed_children,nZ(),0,0,0,q,d,_,_,QZ,RZ),t,DZ=zZ.patch;if(DZ.children instanceof A)if(DZ.changes instanceof A)if(DZ.removed===0)t=m;else t=D(zZ.patch,m);else t=D(zZ.patch,m);else t=D(zZ.patch,m);let PQ=t;Z=i,Q=T,J=KZ,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=g,U=PQ,F=p,z=zZ.events}else{let $=XZ,KZ=O.tail,n=IZ,i=N.tail,QZ=S9(q-L,$),d,t=dQ(RZ,w,q,n);d=sQ(t,p,w,q,$);let DZ=d;Z=i,Q=T,J=KZ,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=D(QZ,g),U=m,F=p,z=DZ}}else if(IZ instanceof jQ){let XZ=O.head;if(XZ instanceof jQ){let $=XZ,KZ=IZ;if(KZ.namespace===$.namespace&&KZ.tag===$.tag){let n=O.tail,i=N.tail,QZ=X9(p,$.mapper),d=DQ(w,q,$.key),zZ=g7(RZ,$.namespace,$.tag,d),t=SK(zZ,d,QZ,RZ,KZ.attributes,$.attributes,_,_),DZ,yQ,PQ;DZ=t.added,yQ=t.removed,PQ=t.events;let R9;if(yQ instanceof A&&DZ instanceof A)R9=_;else R9=I([LW(DZ,yQ)]);let x9=R9,k9=hW(KZ.children,KZ.keyed_children,$.children,$.keyed_children,nZ(),0,0,0,q,d,x9,_,QZ,PQ),aQ,I9=k9.patch;if(I9.children instanceof A)if(I9.changes instanceof A)if(I9.removed===0)aQ=m;else aQ=D(k9.patch,m);else aQ=D(k9.patch,m);else aQ=D(k9.patch,m);let BX=aQ;Z=i,Q=T,J=n,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=g,U=BX,F=p,z=k9.events}else{let n=XZ,i=O.tail,QZ=IZ,d=N.tail,zZ=S9(q-L,n),t,yQ=dQ(RZ,w,q,QZ);t=sQ(yQ,p,w,q,n);let PQ=t;Z=d,Q=T,J=i,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=D(zZ,g),U=m,F=p,z=PQ}}else{let $=XZ,KZ=O.tail,n=IZ,i=N.tail,QZ=S9(q-L,$),d,t=dQ(RZ,w,q,n);d=sQ(t,p,w,q,$);let DZ=d;Z=i,Q=T,J=KZ,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=D(QZ,g),U=m,F=p,z=DZ}}else if(IZ instanceof BQ){let XZ=O.head;if(XZ instanceof BQ){let $=XZ;if(IZ.content===$.content){let n=O.tail;Z=N.tail,Q=T,J=n,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=g,U=m,F=p,z=RZ}else{let n=XZ,i=O.tail,QZ=N.tail,d=PW(q,0,I([FK(n.content)]),_);Z=QZ,Q=T,J=i,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=g,U=D(d,m),F=p,z=RZ}}else{let $=XZ,KZ=O.tail,n=IZ,i=N.tail,QZ=S9(q-L,$),d,t=dQ(RZ,w,q,n);d=sQ(t,p,w,q,$);let DZ=d;Z=i,Q=T,J=KZ,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=D(QZ,g),U=m,F=p,z=DZ}}else{let XZ=O.head;if(XZ instanceof s9){let $=XZ,KZ=O.tail,n=IZ,i=N.tail,QZ=X9(p,$.mapper),d=DQ(w,q,$.key),zZ=SK(!1,d,QZ,RZ,n.attributes,$.attributes,_,_),t,DZ,yQ;t=zZ.added,DZ=zZ.removed,yQ=zZ.events;let PQ;if(DZ instanceof A&&t instanceof A)PQ=_;else PQ=I([LW(t,DZ)]);let R9=PQ,x9;if(n.inner_html===$.inner_html)x9=R9;else x9=D(RK($.inner_html),R9);let aQ=x9,I9;if(aQ instanceof A)I9=m;else I9=D(PW(q,0,aQ,I([])),m);let IG=I9;Z=i,Q=T,J=KZ,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=g,U=IG,F=p,z=yQ}else{let $=XZ,KZ=O.tail,n=IZ,i=N.tail,QZ=S9(q-L,$),d,t=dQ(RZ,w,q,n);d=sQ(t,p,w,q,$);let DZ=d;Z=i,Q=T,J=KZ,W=C,G=P,K=L,X=E,V=q+1,Y=x,H=w,M=D(QZ,g),U=m,F=p,z=DZ}}}}}}function r9(Z,Q,J){return hW(I([Q]),nZ(),I([J]),nZ(),nZ(),0,0,0,0,N8,_,_,jZ,l0(Z))}var{setTimeout:u7,clearTimeout:vW}=globalThis,_7=(Z,Q)=>WQ().createElementNS(Z,Q),$7=(Z)=>WQ().createTextNode(Z),m7=()=>WQ().createDocumentFragment(),a9=(Z,Q,J)=>Z.insertBefore(Q,J),EK=B0?(Z,Q,J)=>Z.moveBefore(Q,J):a9,c7=(Z,Q)=>Z.removeChild(Q),p7=(Z,Q)=>Z.getAttribute(Q),wK=(Z,Q,J)=>Z.setAttribute(Q,J),d7=(Z,Q)=>Z.removeAttribute(Q),s7=(Z,Q,J,W)=>Z.addEventListener(Q,J,W),xK=(Z,Q,J)=>Z.removeEventListener(Q,J),n7=(Z,Q)=>Z.innerHTML=Q,l7=(Z,Q)=>Z.data=Q,nQ=Symbol("lustre");class bK{constructor(Z,Q,J,W){this.kind=Z,this.key=W,this.parent=Q,this.children=[],this.node=J,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===AQ?this.node.parentNode:this.node}}var lQ=(Z,Q,J,W,G)=>{let K=new bK(Z,Q,J,G);return J[nQ]=K,Q?.children.splice(W,0,K),K},r7=(Z)=>{let Q="";for(let J=Z[nQ];J.parent;J=J.parent)if(J.key)Q=`${PJ}${J.key}${Q}`;else{let W=J.parent.children.indexOf(J);Q=`${PJ}${W}${Q}`}return Q.slice(1)};class uW{#Z=null;#G=()=>{};#W=!1;#J=!1;constructor(Z,Q,{useServerEvents:J=!1,exposeKeys:W=!1}={}){this.#Z=Z,this.#G=Q,this.#W=J,this.#J=W}mount(Z){lQ(A9,null,this.#Z,0,null),this.#D(this.#Z,null,this.#Z[nQ],0,Z)}push(Z){this.#Q.push({node:this.#Z[nQ],patch:Z}),this.#K()}#Q=[];#K(){let Z=this.#Q;while(Z.length){let{node:Q,patch:J}=Z.pop(),{children:W}=Q,{changes:G,removed:K,children:X}=J;if(C9(G,(V)=>this.#V(Q,V)),K)this.#I(Q,W.length-K,K);C9(X,(V)=>{let Y=W[V.index|0];this.#Q.push({node:Y,patch:V})})}}#V(Z,Q){switch(Q.kind){case TW:this.#P(Z,Q);break;case SW:this.#O(Z,Q);break;case CW:this.#z(Z,Q);break;case EW:this.#U(Z,Q);break;case wW:this.#F(Z,Q);break;case xW:this.#M(Z,Q);break;case kW:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:J}){let W=m7(),G=this.#H(Z,J);this.#q(W,null,Z,J|0,Q),a9(Z.parentNode,W,G)}#M(Z,{index:Q,with:J}){this.#I(Z,Q|0,1);let W=this.#H(Z,Q);this.#D(Z.parentNode,W,Z,Q|0,J)}#H(Z,Q){Q=Q|0;let{children:J}=Z,W=J.length;if(Q<W)return J[Q].node;let G=J[W-1];if(!G&&Z.kind!==AQ)return null;if(!G)G=Z;while(G.kind===AQ&&G.children.length)G=G.children[G.children.length-1];return G.node.nextSibling}#U(Z,{key:Q,before:J}){J=J|0;let{children:W,parentNode:G}=Z,K=W[J].node,X=W[J];for(let M=J+1;M<W.length;++M){let U=W[M];if(W[M]=X,X=U,U.key===Q){W[J]=U;break}}let{kind:V,node:Y,children:H}=X;if(EK(G,Y,K),V===AQ)this.#X(G,H,K)}#X(Z,Q,J){for(let W=0;W<Q.length;++W){let{kind:G,node:K,children:X}=Q[W];if(EK(Z,K,J),G===AQ)this.#X(Z,X,J)}}#F(Z,{index:Q}){this.#I(Z,Q,1)}#I(Z,Q,J){let{children:W,parentNode:G}=Z,K=W.splice(Q,J);for(let X=0;X<K.length;++X){let{kind:V,node:Y,children:H}=K[X];if(c7(G,Y),this.#R(K[X]),V===AQ)K.push(...H)}}#R(Z){let{debouncers:Q,children:J}=Z;for(let{timeout:W}of Q.values())if(W)vW(W);Q.clear(),C9(J,(W)=>this.#R(W))}#z({node:Z,handlers:Q,throttles:J,debouncers:W},{added:G,removed:K}){C9(K,({name:X})=>{if(Q.delete(X))xK(Z,X,gW),this.#N(J,X,0),this.#N(W,X,0);else d7(Z,X),yK[X]?.removed?.(Z,X)}),C9(G,(X)=>this.#A(Z,X))}#P({node:Z},{content:Q}){l7(Z,Q??"")}#O({node:Z},{inner_html:Q}){n7(Z,Q??"")}#q(Z,Q,J,W,G){C9(G,(K)=>this.#D(Z,Q,J,W++,K))}#D(Z,Q,J,W,G){switch(G.kind){case A9:{let K=this.#j(J,W,G);this.#q(K,null,K[nQ],0,G.children),a9(Z,K,Q);break}case n9:{let K=this.#B(J,W,G);a9(Z,K,Q);break}case AQ:{let K=this.#B(J,W,G);a9(Z,K,Q),this.#q(Z,Q,K[nQ],0,G.children);break}case p0:{let K=this.#j(J,W,G);this.#O({node:K},G),a9(Z,K,Q);break}}}#j(Z,Q,{kind:J,key:W,tag:G,namespace:K,attributes:X}){let V=_7(K||W8,G);if(lQ(J,Z,V,Q,W),this.#J&&W)wK(V,"data-lustre-key",W);return C9(X,(Y)=>this.#A(V,Y)),V}#B(Z,Q,{kind:J,key:W,content:G}){let K=$7(G??"");return lQ(J,Z,K,Q,W),K}#A(Z,Q){let{debouncers:J,handlers:W,throttles:G}=Z[nQ],{kind:K,name:X,value:V,prevent_default:Y,debounce:H,throttle:M}=Q;switch(K){case HW:{let U=V??"";if(X==="virtual:defaultValue"){Z.defaultValue=U;return}if(U!==p7(Z,X))wK(Z,X,U);yK[X]?.added?.(Z,U);break}case x0:Z[X]=V;break;case UW:{if(W.has(X))xK(Z,X,gW);let U=Y.kind===MW;s7(Z,X,gW,{passive:U}),this.#N(G,X,M),this.#N(J,X,H),W.set(X,(F)=>this.#T(Q,F));break}}}#N(Z,Q,J){let W=Z.get(Q);if(J>0)if(W)W.delay=J;else Z.set(Q,{delay:J});else if(W){let{timeout:G}=W;if(G)vW(G);Z.delete(Q)}}#T(Z,Q){let{currentTarget:J,type:W}=Q,{debouncers:G,throttles:K}=J[nQ],X=r7(J),{prevent_default:V,stop_propagation:Y,include:H,immediate:M}=Z;if(V.kind===Y8)Q.preventDefault();if(Y.kind===Y8)Q.stopPropagation();if(W==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let U=this.#W?a7(Q,H??[]):Q,F=K.get(W);if(F){let N=Date.now(),T=F.last||0;if(N>T+F.delay)F.last=N,F.lastEvent=Q,this.#G(U,X,W,M)}let z=G.get(W);if(z)vW(z.timeout),z.timeout=u7(()=>{if(Q===K.get(W)?.lastEvent)return;this.#G(U,X,W,M)},z.delay);if(!F&&!z)this.#G(U,X,W,M)}}var C9=(Z,Q)=>{if(Array.isArray(Z))for(let J=0;J<Z.length;J++)Q(Z[J]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},gW=(Z)=>{let{currentTarget:Q,type:J}=Z;Q[nQ].handlers.get(J)(Z)},a7=(Z,Q=[])=>{let J={};if(Z.type==="input"||Z.type==="change")Q.push("target.value");if(Z.type==="submit")Q.push("detail.formData");for(let W of Q){let G=W.split(".");for(let K=0,X=Z,V=J;K<G.length;K++){if(K===G.length-1){V[G[K]]=X[G[K]];break}V=V[G[K]]??={},X=X[G[K]]}}return J},kK=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},i7=(Z)=>{return{added(Q,J){Q[Z]=J}}},yK={checked:kK("checked"),selected:kK("selected"),value:i7("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function t7(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof A)return[G,e(K)];else{let X=W.tail,V=W.head[0],Y=W.head[1],H=c0(V,Y),M;if(V==="")M=G;else M=B9(G,V,H);let U=M,F=D(H,K);Z=X,Q=U,J=F}}}function _W(Z){return t7(Z,nZ(),_)}function fK(Z,Q,J){let W=_W(J),G,K;return G=W[0],K=W[1],TJ("",jZ,"",Z,Q,K,G,!1,!1)}function hK(Z,Q,J,W){let G=_W(W),K,X;return K=G[0],X=G[1],TJ("",jZ,Z,Q,J,X,K,!1,!1)}function vK(Z){let Q=_W(Z),J,W;return J=Q[0],W=Q[1],DW("",jZ,W,J)}var gK=(Z)=>{let Q=lQ(A9,null,Z,0,null),J=0;for(let X=Z.firstChild;X;X=X.nextSibling)if(uK(X))J+=1;if(J===0){let X=WQ().createTextNode("");return lQ(n9,Q,X,0,null),Z.replaceChildren(X),ZK()}if(J===1)return $W(Q,Z).head[1];let W=WQ().createTextNode(""),G=lQ(AQ,Q,W,0,null),K=$W(G,Z);return Z.insertBefore(W,Z.firstChild),vK(K)},uK=(Z)=>{switch(Z.nodeType){case G8:return!0;case XW:return!!Z.data;default:return!1}},o7=(Z,Q,J,W)=>{if(!uK(Q))return null;switch(Q.nodeType){case G8:{let G=lQ(A9,Z,Q,W,J),K=Q.localName,X=Q.namespaceURI,V=!X||X===W8;if(V&&e7.includes(K))ZV(K,Q);let Y=QV(Q),H=$W(G,Q);return V?fK(K,Y,H):hK(X,K,Y,H)}case XW:return lQ(n9,Z,Q,W,null),D8(Q.data);default:return null}},e7=["input","select","textarea"],ZV=(Z,Q)=>{let{value:J,checked:W}=Q;if(Z==="input"&&Q.type==="checkbox"&&!W)return;if(Z==="input"&&Q.type==="radio"&&!W)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!J)return;queueMicrotask(()=>{if(Q.value=J,Q.checked=W,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),WQ().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},$W=(Z,Q)=>{let J=null,W=Q.firstChild,G=null,K=0;while(W){let X=W.nodeType===G8?W.getAttribute("data-lustre-key"):null;if(X!=null)W.removeAttribute("data-lustre-key");let V=o7(Z,W,X,K),Y=W.nextSibling;if(V){let H=new GQ([X??"",V],null);if(G)G=G.tail=H;else G=J=H;K+=1}else Q.removeChild(W);W=Y}if(!G)return _;return G.tail=_,J},QV=(Z)=>{let Q=Z.attributes.length,J=_;while(Q-- >0){let W=Z.attributes[Q];if(W.name==="xmlns")continue;J=new GQ(JV(W),J)}return J},JV=(Z)=>{let{localName:Q,value:J}=Z;return mQ(Q,J)};var xJ=()=>!!WQ();class C8{constructor(Z,[Q,J],W,G){this.root=Z,this.#Z=Q,this.#G=W,this.#W=G,this.root.addEventListener("context-request",(K)=>{if(!(K.context&&K.callback))return;if(!this.#V.has(K.context))return;K.stopImmediatePropagation();let X=this.#V.get(K.context);if(K.subscribe){let V=()=>{X.subscribers=X.subscribers.filter((Y)=>Y!==K.callback)};X.subscribers.push([K.callback,V]),K.callback(X.value,V)}else K.callback(X.value)}),this.#K=new uW(this.root,(K,X,V)=>{let[Y,H]=CJ(this.#Q,X,V,K);if(this.#Q=Y,H.isOk()){let M=H[0];if(M.stop_propagation)K.stopPropagation();if(M.prevent_default)K.preventDefault();this.dispatch(M.message,!1)}}),this.#J=gK(this.root),this.#Q=AW(),this.#F=!0,this.#R(J)}root=null;dispatch(Z,Q=!1){if(this.#F||=Q,this.#Y)this.#M.push(Z);else{let[J,W]=this.#W(this.#Z,Z);this.#Z=J,this.#R(W)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#V.has(Z))this.#V.set(Z,{value:Q,subscribers:[]});else{let J=this.#V.get(Z);J.value=Q;for(let W=J.subscribers.length-1;W>=0;W--){let[G,K]=J.subscribers[W];if(!G){J.subscribers.splice(W,1);continue}G(Q,K)}}}#Z;#G;#W;#J;#Q;#K;#V=new Map;#Y=!1;#M=[];#H=_;#U=_;#X=null;#F=!1;#I={dispatch:(Z,Q)=>this.dispatch(Z,Q),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#R(Z){this.#Y=!0;while(!0){for(let Q=Z.synchronous;Q.tail;Q=Q.tail)Q.head(this.#I);if(this.#H=$K(this.#H,Z.before_paint),this.#U=$K(this.#U,Z.after_paint),!this.#M.length)break;[this.#Z,Z]=this.#W(this.#Z,this.#M.shift())}if(this.#Y=!1,this.#F)cancelAnimationFrame(this.#X),this.#z();else if(!this.#X)this.#X=requestAnimationFrame(()=>{this.#z()})}#z(){this.#F=!1,this.#X=null;let Z=this.#G(this.#Z),{patch:Q,events:J}=r9(this.#Q,this.#J,Z);if(this.#Q=J,this.#J=Z,this.#K.push(Q),this.#H instanceof GQ){let W=_K(this.#H);this.#H=_,queueMicrotask(()=>{this.#F=!0,this.#R(W)})}if(this.#U instanceof GQ){let W=_K(this.#U);this.#U=_,requestAnimationFrame(()=>{this.#F=!0,this.#R(W)})}}}function _K(Z){return{synchronous:Z,after_paint:_,before_paint:_}}function $K(Z,Q){if(Z instanceof A)return Q;else if(Q instanceof A)return Z;else return Z9(Z,Q)}class cW extends R{constructor(Z){super();this.message=Z}}class pW extends R{constructor(Z){super();this.callback=Z}}class dW extends R{constructor(Z){super();this.callback=Z}}class U9 extends R{constructor(Z){super();this.message=Z}}class L9 extends R{constructor(Z,Q){super();this.name=Z,this.data=Q}}class L8 extends R{constructor(Z,Q){super();this.key=Z,this.value=Q}}class E9 extends R{}class cK extends R{constructor(Z,Q,J,W,G,K,X,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=J,this.attributes=W,this.properties=G,this.contexts=K,this.is_form_associated=X,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function pK(Z){let Q=new cK(!0,!0,!1,_,_,_,!1,K8,K8,K8);return EZ(Z,Q,(J,W)=>{return W.apply(J)})}class sK{#Z;constructor(Z,[Q,J],W,G){this.#Z=new C8(Z,[Q,J],G,W)}send(Z){switch(Z.constructor){case U9:{this.dispatch(Z.message,!1);break}case L9:{this.emit(Z.name,Z.data);break}case E9:break}}dispatch(Z,Q){this.#Z.dispatch(Z,Q)}emit(Z,Q){this.#Z.emit(Z,Q)}}var nK=({init:Z,update:Q,view:J},W,G)=>{if(!xJ())return new b(new kJ);let K=W instanceof HTMLElement?W:WQ().querySelector(W);if(!K)return new b(new sW(W));return new k(new sK(K,Z(G),Q,J))};class WV{#Z;#G;#W;#J;#Q;#K;#V=oZ();#Y=new Set;constructor([Z,Q],J,W,G){this.#Z=Z,this.#G=J,this.#W=W,this.#J=G,this.#Q=this.#W(this.#Z),this.#K=o0(this.#Q),this.#X(Q)}send(Z){switch(Z.constructor){case cW:{let{message:Q}=Z,J=this.#M(Q),W=r9(this.#K,this.#Q,J);this.#Q=J,this.#K=W.events,this.broadcast(fW(W.patch));return}case pW:{let{callback:Q}=Z;this.#Y.add(Q),Q(BK(this.#J.open_shadow_root,this.#J.adopt_styles,VQ(this.#J.attributes),VQ(this.#J.properties),VQ(this.#J.contexts),this.#V,this.#Q));return}case dW:{let{callback:Q}=Z;this.#Y.delete(Q);return}case U9:{let{message:Q}=Z,[J,W]=this.#G(this.#Z,Q),G=this.#W(J),K=r9(this.#K,this.#Q,G);this.#X(W),this.#Z=J,this.#Q=G,this.#K=K.events,this.broadcast(fW(K.patch));return}case L9:{let{name:Q,data:J}=Z;this.broadcast(AK(Q,J));return}case L8:{let{key:Q,value:J}=Z;this.#V=AZ(this.#V,Q,J),this.broadcast(PK(Q,J));return}case E9:{this.#Z=null,this.#G=null,this.#W=null,this.#J=null,this.#Q=null,this.#K=null,this.#V=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#M(Z){switch(Z.constructor){case B8:{let{messages:Q}=Z,J=this.#Z,W=OJ();for(let G=Q;G.head;G=G.tail){let K=this.#M(G.head);if(K instanceof k){J=K[0][0],W=g0(bQ.fromArray([W,K[0][1]]));break}}return this.#X(W),this.#Z=J,this.#W(this.#Z)}case A8:{let{name:Q,value:J}=Z,W=this.#H(Q,J);if(W instanceof b)return this.#Q;else{let[G,K]=this.#G(this.#Z,W[0]);return this.#X(K),this.#Z=G,this.#W(this.#Z)}}case P8:{let{name:Q,value:J}=Z,W=this.#U(Q,J);if(W instanceof b)return this.#Q;else{let[G,K]=this.#G(this.#Z,W[0]);return this.#X(K),this.#Z=G,this.#W(this.#Z)}}case T8:{let{path:Q,name:J,event:W}=Z,[G,K]=CJ(this.#K,Q,J,W);if(this.#K=G,K instanceof b)return this.#Q;else{let[X,V]=this.#G(this.#Z,K[0].message);return this.#X(V),this.#Z=X,this.#W(this.#Z)}}case bW:{let{key:Q,value:J}=Z,W=NZ(this.#J.contexts,Q);if(W instanceof b)return this.#Q;if(W=N9(J,W[0]),W instanceof b)return this.#Q;let[G,K]=this.#G(this.#Z,W[0]);return this.#X(K),this.#Z=G,this.#W(this.#Z)}}}#H(Z,Q){let J=NZ(this.#J.attributes,Z);switch(J.constructor){case k:return J[0](Q);case b:return new b(void 0)}}#U(Z,Q){let J=NZ(this.#J.properties,Z);switch(J.constructor){case k:return J[0](Q);case b:return new b(void 0)}}#X(Z){let Q=(X)=>this.send(new U9(X)),J=(X,V)=>this.send(new L9(X,V)),W=()=>{return},G=()=>{return},K=(X,V)=>this.send(new L8(X,V));globalThis.queueMicrotask(()=>{h0(Z,Q,J,W,G,K)})}}class lK extends R{constructor(Z,Q,J,W){super();this.init=Z,this.update=Q,this.view=J,this.config=W}}class sW extends R{constructor(Z){super();this.selector=Z}}class kJ extends R{}function rK(Z,Q,J){return new lK(Z,Q,J,pK(_))}function aK(Z,Q,J){return o(!xJ(),new b(new kJ),()=>{return nK(Z,Q,J)})}var i9="src/chess/algebraic_notation.gleam";class iK extends R{}class aW extends R{}class tW extends R{}class yJ extends R{}class E8 extends R{}function KV(Z){if(Z instanceof tW)return"#";else if(Z instanceof yJ)return"+";else return""}function nW(Z){if(Z)return"x";else return""}function w8(Z){if(Z instanceof s)return"";else if(Z instanceof ZQ)return"N";else if(Z instanceof mZ)return"B";else if(Z instanceof qZ)return"R";else if(Z instanceof QQ)return"Q";else return"K"}function XV(Z){return"="+w8(Z)}function tK(Z){if(Z instanceof h)return"1";else if(Z instanceof HZ)return"2";else if(Z instanceof cZ)return"3";else if(Z instanceof xZ)return"4";else if(Z instanceof kZ)return"5";else if(Z instanceof pZ)return"6";else if(Z instanceof UZ)return"7";else return"8"}function iW(Z){if(Z instanceof ZZ)return"a";else if(Z instanceof OZ)return"b";else if(Z instanceof WZ)return"c";else if(Z instanceof MZ)return"d";else if(Z instanceof c)return"e";else if(Z instanceof FZ)return"f";else if(Z instanceof GZ)return"g";else return"h"}function oK(Z){let Q=iW(Z.file),J=tK(Z.row);return Q+J}function lW(Z){return oK(Z)}function rW(Z,Q,J,W,G){let K=NQ(Z,J),X;if(K instanceof S)X=K[0];else throw v("let_assert",i9,"chess/algebraic_notation",196,"disambiguation","Pattern match failed, no pattern matched the value.",{value:K,start:5423,end:5473,pattern_start:5434,pattern_end:5446});let V=X[0];if(V instanceof s&&G)return iW(J.file);else{let Y=V,H=X[1],M,F=VQ(Q);M=f9(F,(C)=>{return o(B(C,J),!1,()=>{let P=NQ(Z,C);return B(P,new S([Y,H]))})});let z=M,N;N=f9(z,(C)=>{let L=NZ(Q,C),E=O9(L,()=>{throw v("panic",i9,"chess/algebraic_notation",219,"disambiguation","`panic` expression evaluated.",{})}),q=j9(E);return YJ(q,(x)=>{if(x instanceof yZ){let w=x.to;return B(w,W)}else if(x instanceof RQ){let w=x.to;return B(w,W)}else if(x instanceof IQ){let w=x.to;return B(w,W)}else if(x instanceof zQ)return!1;else return!1})});let O=N;return o(fG(O),"",()=>{let C;return C=VJ(O,(E)=>{return!B(E.file,J.file)}),o(C,(()=>{let E=J.file;return iW(E)})(),()=>{let E;return E=VJ(O,(w)=>{return!B(w.row,J.row)}),o(E,(()=>{let w=J.row;return tK(w)})(),()=>{return oK(J)})})})}}function VV(Z,Q,J,W){let G;{let U=QW(Q);G=QW(Z)>U}let K=G,X;if(W instanceof JQ){let{from:U,to:F}=W,z=NQ(Z,U),N;if(z instanceof S)N=z[0][0];else throw v("let_assert",i9,"chess/algebraic_notation",123,"describe_internal","Pattern match failed, no pattern matched the value.",{value:z,start:3633,end:3696,pattern_start:3644,pattern_end:3669});X=w8(N)+rW(Z,J,U,F,K)+nW(K)+lW(F)}else if(W instanceof HQ){let{from:U,to:F,new_figure:z}=W,N=NQ(Z,U),T;if(N instanceof S)T=N[0][0];else throw v("let_assert",i9,"chess/algebraic_notation",137,"describe_internal","Pattern match failed, no pattern matched the value.",{value:N,start:4164,end:4227,pattern_start:4175,pattern_end:4200});X=w8(T)+rW(Z,J,U,F,K)+nW(K)+lW(F)+XV(z)}else if(W instanceof UQ){let{from:U,to:F}=W,z=NQ(Z,U),N;if(z instanceof S)N=z[0][0];else throw v("let_assert",i9,"chess/algebraic_notation",130,"describe_internal","Pattern match failed, no pattern matched the value.",{value:z,start:3890,end:3953,pattern_start:3901,pattern_end:3926});X=w8(N)+rW(Z,J,U,F,K)+nW(K)+lW(F)}else if(W instanceof MQ)X="O-O";else X="O-O-O";let V=X,Y,H=K9(Q);if(H instanceof FQ){let U=H.info;if(U instanceof lJ)if(U.by instanceof rJ)Y=new tW;else{let z;if(z=Q8(Q),z)Y=new yJ;else Y=new E8}else{let F;if(F=Q8(Q),F)Y=new yJ;else Y=new E8}}else{let U;if(U=Q8(Q),U)Y=new yJ;else Y=new E8}return V+KV(Y)}function eK(Z,Q){let J,W=NJ(Z,Q);return J=D9(W,(K)=>{if(K instanceof iJ)return new iK;else if(K instanceof tJ)return new aW;else return new aW}),uQ(J,(K)=>{let X,V=N0(Z);return X=D9(V,(H)=>{throw v("panic",i9,"chess/algebraic_notation",99,"describe","`panic` expression evaluated.",{})}),uQ(X,(H)=>{let M=VV(Z,K,H,Q);return new k(M)})})}var bJ=new j(new WZ,new h);var fJ=new j(new WZ,new u);var oW=new j(new c,new h);var eW=new j(new c,new u);var hJ=new j(new GZ,new h);var vJ=new j(new GZ,new u);var t9="src/web_chess/internal/game_logic.gleam";class fZ extends R{constructor(Z,Q,J,W,G){super();this.root_state=Z,this.state=Q,this.selected_move_history_index=J,this.move_history=W,this.figure_selection_state=G}}class rZ extends R{}class w9 extends R{constructor(Z,Q){super();this.selected_figure=Z,this.moves=Q}}class o9 extends R{constructor(Z,Q,J){super();this.selected_figure=Z,this.moves=Q,this.dragging_over=J}}class M9 extends R{constructor(Z,Q){super();this.white=Z,this.black=Q}}class k8 extends R{constructor(Z){super();this.white=Z}}class x8 extends R{constructor(Z,Q,J){super();this.san_description=Z,this.move=Q,this.index=J}}function JX(){let Z=R0();return new fZ(Z,Z,0,I([]),new rZ)}function WX(Z,Q){let J,W=Z.root_state;J=q0(W,Q);let G=J,K;if(G instanceof k)K=G[0];else throw v("let_assert",t9,"web_chess/internal/game_logic",63,"handle_select_past_position","Pattern match failed, no pattern matched the value.",{value:G,start:1647,end:1733,pattern_start:1658,pattern_end:1676});return new fZ(Z.root_state,K,Q,Z.move_history,Z.figure_selection_state)}function GX(Z,Q){let J=K9(Z.state),W;if(J instanceof G9)W=J.next_player;else throw v("let_assert",t9,"web_chess/internal/game_logic",101,"handle_drag_start","Pattern match failed, no pattern matched the value.",{value:J,start:2908,end:2993,pattern_start:2919,pattern_end:2957});let G=NQ(Z.state,Q);if(G instanceof S){let K=G[0][1];if(B(K,W)){let X,V=GW(Z.state,Q),Y=O9(V,()=>{return gZ()}),H=j9(Y),M=LZ(H,(F)=>{if(F instanceof yZ)return[F.to,F];else if(F instanceof RQ)return[F.to,F];else if(F instanceof IQ)return[F.to,F];else if(F instanceof zQ)if(W instanceof f)return[hJ,F];else return[vJ,F];else if(W instanceof f)return[bJ,F];else return[fJ,F]});X=tQ(M);let U=X;return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new o9(Q,U,new y))}else return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}else return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}function KX(Z,Q){let J=Z.figure_selection_state;if(J instanceof o9){let{selected_figure:W,moves:G}=J;return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new o9(W,G,new S(Q)))}else return Z}function XX(Z){let Q=Z.figure_selection_state;if(Q instanceof o9){let{selected_figure:J,moves:W}=Q;return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new w9(J,W))}else return Z}function HV(Z,Q,J){if(Z instanceof A)return[I([new k8(new x8(Q,J,1))]),1];else{let W=Z.head;if(W instanceof M9){let G=W;return[D(new k8(new x8(Q,J,G.black.index+1)),Z),G.black.index+1]}else{let G=Z.tail,K=W.white;return[D(new M9(K,new x8(Q,J,K.index+1)),G),K.index+1]}}}function ZG(Z,Q){return o(Q===0,I([]),()=>{if(Z instanceof A)throw v("panic",t9,"web_chess/internal/game_logic",299,"take_until_move_history","index too large",{});else{let J=Z.head;if(J instanceof M9)if(J.black.index===Q)return Z;else{let G=J.white;if(G.index===Q){let K=Z.tail;return D(new k8(G),K)}else{let K=Z.tail;return ZG(K,Q)}}else if(J.white.index===Q)return Z;else{let G=Z.tail;return ZG(G,Q)}}})}function VX(Z,Q,J){let W;if(J instanceof yZ){let U=J.to;W=new JQ(Q,U)}else if(J instanceof RQ){let U=J.to;W=new HQ(Q,U,new QQ)}else if(J instanceof IQ){let U=J.to;W=new UQ(Q,U)}else if(J instanceof zQ)W=new MQ;else W=new aJ;let G=W,K=NJ(Z.state,G),X;if(K instanceof k)X=K[0];else throw v("let_assert",t9,"web_chess/internal/game_logic",225,"try_do_move","Pattern match failed, no pattern matched the value.",{value:K,start:6733,end:6803,pattern_start:6744,pattern_end:6757});let V;{let U=eK(Z.state,G),F;if(U instanceof k)F=U[0];else throw v("let_assert",t9,"web_chess/internal/game_logic",228,"try_do_move","Pattern match failed, no pattern matched the value.",{value:U,start:6853,end:6918,pattern_start:6864,pattern_end:6871});let z=Z.move_history,N=ZG(z,Z.selected_move_history_index);V=HV(N,F,G)}let Y=V,H,M;return H=Y[0],M=Y[1],new fZ(X,X,M,H,new rZ)}function YX(Z){let Q=Z.figure_selection_state;if(Q instanceof o9){let{selected_figure:J,moves:W,dragging_over:G}=Q;if(G instanceof S){let K=G[0];return NG(B(K,J),()=>{return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new w9(J,W))},()=>{let X=NZ(W,K);if(X instanceof k){let V=X[0];return VX(Z,J,V)}else return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)})}else return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}else return Z}function QX(Z,Q){let J=K9(Z.state),W;if(J instanceof G9)W=J.next_player;else throw v("let_assert",t9,"web_chess/internal/game_logic",320,"try_select","Pattern match failed, no pattern matched the value.",{value:J,start:9483,end:9574,pattern_start:9494,pattern_end:9532});let G=NQ(Z.state,Q);if(G instanceof S){let K=G[0][1];if(B(K,W)){let X,V=GW(Z.state,Q),Y=O9(V,()=>{return gZ()}),H=j9(Y),M=LZ(H,(F)=>{if(F instanceof yZ)return[F.to,F];else if(F instanceof RQ)return[F.to,F];else if(F instanceof IQ)return[F.to,F];else if(F instanceof zQ)if(W instanceof f)return[hJ,F];else return[vJ,F];else if(W instanceof f)return[bJ,F];else return[fJ,F]});X=tQ(M);let U=X;return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new w9(Q,U))}else return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}else return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}function HX(Z,Q){if((()=>{let W=Z.state;return K9(W)})()instanceof FQ)return Z;else{let W=Z.figure_selection_state;if(W instanceof rZ)return QX(Z,Q);else if(W instanceof w9){let{selected_figure:G,moves:K}=W,X=NZ(K,Q);if(X instanceof k){let V=X[0];return VX(Z,G,V)}else return QX(Z,Q)}else return new fZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}}function JG(Z){window.addEventListener("resize",()=>Z())}function UX(){return[window.innerWidth,window.innerHeight]}function MX(){let Z=parseFloat(getComputedStyle(document.documentElement).fontSize),Q=getComputedStyle(document.documentElement).getPropertyValue("--layout-sidebar-min-width");if(!Q||Q.indexOf("rem")===-1)throw Error("CSS variable --layout-sidebar-min-width missing or invalid format.");return parseFloat(Q.slice(0,Q.indexOf("rem")))*Z}function WG(){let Z=UX(),Q,J;Q=Z[0],J=Z[1];let W=MX();return Q-W>=J}function FV(Z){if(Z==="input")return!0;else if(Z==="change")return!0;else if(Z==="focus")return!0;else if(Z==="focusin")return!0;else if(Z==="focusout")return!0;else if(Z==="blur")return!0;else if(Z==="select")return!0;else return!1}function F9(Z,Q){return k0(Z,pJ(Q,(J)=>{return new DJ(!1,!1,J)}),_,FW,FW,FV(Z),0,0)}function GG(Z){if(Z instanceof bZ)return new bZ(Z.kind,Z.name,Z.handler,Z.include,y0,Z.stop_propagation,Z.immediate,Z.debounce,Z.throttle);else return Z}function FX(Z){return F9("click",CQ(Z))}function RX(Z){return F9("mousedown",CQ(Z))}var zX="src/web_chess/internal/views/board.gleam";class e9 extends R{}class ZJ extends R{}function KG(Z,Q){return o(Q===0,new y,()=>{if(Z instanceof A)throw v("panic",zX,"web_chess/internal/views/board",125,"get_previous_move","`panic` expression evaluated.",{});else{let J=Z.head;if(J instanceof M9){let W=J.white;if(W.index===Q)return new S([W,new f]);else{let G=J.black;if(G.index===Q)return new S([G,new JZ]);else{let K=Z.tail;return KG(K,Q)}}}else{let W=J.white;if(W.index===Q)return new S([W,new f]);else{let G=Z.tail;return KG(G,Q)}}}})}function RV(Z){if(Z)return j8(I([PZ("absolute inset-0 h-full w-full"),R8("./indicators/capture.svg"),F8("This figure can be captured"),H8(!1)]));else return j8(I([PZ("absolute inset-0 h-full w-full"),R8("./indicators/move.svg"),F8("Can move to here"),H8(!1)]))}function IV(Z,Q,J){let W;if(Z[1]instanceof f){let H=Z[0];if(H instanceof s)W=["./figures/pawn_white.svg","White Bishop"];else if(H instanceof ZQ)W=["./figures/knight_white.svg","White Knight"];else if(H instanceof mZ)W=["./figures/bishop_white.svg","White Bishop"];else if(H instanceof qZ)W=["./figures/rook_white.svg","White Rook"];else if(H instanceof QQ)W=["./figures/queen_white.svg","White Queen"];else W=["./figures/king_white.svg","White King"]}else{let H=Z[0];if(H instanceof s)W=["./figures/pawn_black.svg","Black Pawn"];else if(H instanceof ZQ)W=["./figures/knight_black.svg","Black Knight"];else if(H instanceof mZ)W=["./figures/bishop_black.svg","Black Bishop"];else if(H instanceof qZ)W=["./figures/rook_black.svg","Black Rook"];else if(H instanceof QQ)W=["./figures/queen_black.svg","Black Queen"];else W=["./figures/king_black.svg","Black King"]}let K=W,X,V;X=K[0],V=K[1];let Y=Z[1];return j8(I([PZ("absolute inset-0 h-full w-full"),R8(X),F8(V),H8(B(new S(Y),Q)),F9("dragstart",CQ(J()))]))}function zV(Z,Q,J,W,G,K,X,V,Y,H,M,U,F){let z;if(Q instanceof S){let L=Q[0];z=new S(IV(L,J,Y))}else z=Q;let N=z,T;if(G)T=new S(RV(!B(N,new y)));else T=new y;let O=T,C=f8(K,(L)=>{return H9(I([PZ("absolute text-sm right-1.5 bottom-1 font-bold"),wQ(I([["text-[var(--color-square-light)]",B(Z,new ZJ)],["text-[var(--color-square-dark)]",B(Z,new e9)]]))]),I([lZ(L)]))}),P=f8(X,(L)=>{return H9(I([PZ("absolute text-sm left-1.5 top-1 font-bold"),wQ(I([["text-[var(--color-square-light)]",B(Z,new ZJ)],["text-[var(--color-square-dark)]",B(Z,new e9)]]))]),I([lZ(L)]))});return Y9(I([wQ(I([["relative",!0],["bg-[var(--color-square-dark)]",B(Z,new ZJ)&&!W],["bg-[var(--color-square-light)]",B(Z,new e9)&&!W],["bg-[var(--color-square-dark-highlighted)]",B(Z,new ZJ)&&W],["bg-[var(--color-square-light-highlighted)]",B(Z,new e9)&&W]])),RX(V()),(()=>{let L=F9("dragover",CQ(U()));return GG(L)})(),(()=>{let L=F9("drop",CQ(M()));return GG(L)})(),F9("dragenter",CQ(H())),F9("dragend",CQ(F()))]),(()=>{let L=I([N,O,C,P]);return iQ(L)})())}function NV(Z){let Q,J=Z.file;if(J instanceof ZZ)Q=0;else if(J instanceof OZ)Q=1;else if(J instanceof WZ)Q=2;else if(J instanceof MZ)Q=3;else if(J instanceof c)Q=4;else if(J instanceof FZ)Q=5;else if(J instanceof GZ)Q=6;else Q=7;let W=Q,G,K=Z.row;if(K instanceof h)G=0;else if(K instanceof HZ)G=1;else if(K instanceof cZ)G=2;else if(K instanceof xZ)G=3;else if(K instanceof kZ)G=4;else if(K instanceof pZ)G=5;else if(K instanceof UZ)G=6;else G=7;let V=(W+G)%2;if(V===0)return new ZJ;else if(V===1)return new e9;else throw v("panic",zX,"web_chess/internal/views/board",309,"coordinate_colour","`panic` expression evaluated.",{})}function qV(){let Z=I([new ZZ,new OZ,new WZ,new MZ,new c,new FZ,new GZ,new TZ]),J=I([new u,new UZ,new pZ,new kZ,new xZ,new cZ,new HZ,new h]);return h9(J,(W)=>{return LZ(Z,(K)=>{return new j(K,W)})})}function DV(Z){let Q,J=Z.figure_selection_state;if(J instanceof rZ)Q=[I([]),I([])];else if(J instanceof w9){let{selected_figure:Y,moves:H}=J;Q=[I([Y]),(()=>{return VQ(H)})()]}else{let{selected_figure:Y,moves:H,dragging_over:M}=J;Q=[(()=>{let U=I([new S(Y),M]);return iQ(U)})(),(()=>{return VQ(H)})()]}let W=Q,G,K;G=W[0],K=W[1];let X;{let Y=KG(Z.move_history,Z.selected_move_history_index);if(Y instanceof S){let H=Y[0][0],M=Y[0][1],U=H.move;if(U instanceof JQ){let{from:F,to:z}=U;X=I([F,z])}else if(U instanceof HQ){let{from:F,to:z}=U;X=I([F,z])}else if(U instanceof UQ){let{from:F,to:z}=U;X=I([F,z])}else if(U instanceof MQ)if(M instanceof f)X=I([oW,hJ]);else X=I([eW,vJ]);else if(M instanceof f)X=I([oW,bJ]);else X=I([eW,fJ])}else X=I([])}let V=X;return[(()=>{let Y=Z9(G,V);return $Z(Y)})(),(()=>{return $Z(K)})()]}function OV(Z){if(Z instanceof ZZ)return"a";else if(Z instanceof OZ)return"b";else if(Z instanceof WZ)return"c";else if(Z instanceof MZ)return"d";else if(Z instanceof c)return"e";else if(Z instanceof FZ)return"f";else if(Z instanceof GZ)return"g";else return"h"}function jV(Z){if(Z instanceof h)return"1";else if(Z instanceof HZ)return"2";else if(Z instanceof cZ)return"3";else if(Z instanceof xZ)return"4";else if(Z instanceof kZ)return"5";else if(Z instanceof pZ)return"6";else if(Z instanceof UZ)return"7";else return"8"}function NX(Z,Q,J,W,G,K,X){let V=DV(Z),Y,H;Y=V[0],H=V[1];let M,U=(()=>{let z=Z.state;return K9(z)})();if(U instanceof FQ)M=new y;else{let z=U.next_player;M=new S(z)}let F=M;return Y9(I([PZ("grid h-[100vmin] w-[100vmin] grid-cols-8 grid-rows-8 select-none")]),LZ(qV(),(z)=>{let N;if(z.row instanceof h)N=new S(OV(z.file));else N=new y;let O=N,C;if(z.file instanceof ZZ)C=new S(jV(z.row));else C=new y;let L=C;return zV(NV(z),NQ(Z.state,z),F,(()=>{return FJ(Y,z)})(),(()=>{return FJ(H,z)})(),O,L,()=>{return Q(z)},()=>{return J(z)},()=>{return W(z)},G,K,X)}))}function qX(){return H9(I([PZ("m-1 text-xs")]),I([O8(I([PZ("whitespace-nowrap"),U8("https://commons.wikimedia.org/wiki/Category:SVG_chess_pieces"),M8("_blank")]),I([lZ("Chess icons")])),lZ(" by "),O8(I([U8("https://commons.wikimedia.org/wiki/User:Cburnett"),M8("_blank")]),I([lZ("Cburnett")])),lZ(" "),O8(I([PZ("whitespace-nowrap"),U8("https://creativecommons.org/licenses/by-sa/3.0/deed.en"),M8("_blank")]),I([lZ("CC BY-SA 3.0")]))]))}function XG(Z,Q,J){return GK(I([PZ("font-bold cursor-pointer hover:bg-white/8 rounded pt-0.5 pb-0.5 pl-1.5 pr-1.5"),wQ(I([["underline bg-white/8",Q]])),FX(J())]),I([lZ(Z)]))}function DX(Z,Q,J){let W,K=e(Z);W=hG(K,(V,Y)=>{return[Y+1,V]});let X=W;return Y9(I([PZ("grid [grid-template-columns:1.5rem_4.5rem_4.5rem] justify-center place-items-center gap-y-1 gap-x-1.5 pt-2 pb-1")]),(()=>{return h9(X,(Y)=>{let H,M;if(H=Y[0],M=Y[1],M instanceof M9){let{white:U,black:F}=M;return I([H9(I([]),I([lZ(vQ(H)+".")])),XG(U.san_description,U.index===Q,()=>{return J(U.index)}),XG(F.san_description,F.index===Q,()=>{return J(F.index)})])}else{let U=M.white;return I([H9(I([]),I([lZ(vQ(H)+".")])),XG(U.san_description,U.index===Q,()=>{return J(U.index)})])}})})())}var TV="src/app.gleam";class rQ extends R{constructor(Z,Q){super();this.is_layout_sideways=Z,this.game=Q}}class VG extends R{}class YG extends R{constructor(Z){super();this.square=Z}}class HG extends R{constructor(Z){super();this.dragging_figure=Z}}class UG extends R{constructor(Z){super();this.over=Z}}class MG extends R{}class FG extends R{}class RG extends R{constructor(Z){super();this.index=Z}}class OX extends R{}function SV(Z){let Q=new rQ(WG(),JX()),J=v0((W)=>{return JG(()=>{return W(new VG)})});return[Q,J]}function CV(Z){return new rQ(WG(),Z.game)}function LV(Z,Q){let J;if(Q instanceof VG)J=CV(Z);else if(Q instanceof YG){let G=Q.square;J=new rQ(Z.is_layout_sideways,HX(Z.game,G))}else if(Q instanceof HG){let G=Q.dragging_figure;J=new rQ(Z.is_layout_sideways,GX(Z.game,G))}else if(Q instanceof UG){let G=Q.over;J=new rQ(Z.is_layout_sideways,KX(Z.game,G))}else if(Q instanceof MG)J=new rQ(Z.is_layout_sideways,YX(Z.game));else if(Q instanceof FG)J=new rQ(Z.is_layout_sideways,XX(Z.game));else if(Q instanceof RG){let G=Q.index;J=new rQ(Z.is_layout_sideways,WX(Z.game,G))}else J=Z;return[J,OJ()]}function EV(Z){return QK(I([PZ("flex bg-background text-text font-sans h-screen w-screen overflow-x-hidden"),wQ(I([["flex-row items-stretch",Z.is_layout_sideways],["flex-col items-stretch",!Z.is_layout_sideways]]))]),I([Y9(I([PZ("h-[calc(50vh-50vmin)] flex-none")]),I([])),WK(I([wQ(I([["flex justify-center",!0],["flex-1",Z.is_layout_sideways],["h-[100vmin] min-h-[100vmin]",!Z.is_layout_sideways]]))]),I([NX(Z.game,(Q)=>{return new YG(Q)},(Q)=>{return new HG(Q)},(Q)=>{return new UG(Q)},()=>{return new MG},()=>{return new OX},()=>{return new FG})])),JK(I([wQ(I([["flex flex-col justify-between",!0],["h-full w-[var(--layout-sidebar-min-width)] overflow-y-scroll",Z.is_layout_sideways],["w-full flex-1",!Z.is_layout_sideways]]))]),I([DX(Z.game.move_history,Z.game.selected_move_history_index,(Q)=>{return new RG(Q)}),Y9(I([PZ("text-center")]),I([qX()]))]))]))}function jX(){let Z=rK(SV,LV,EV),Q=aK(Z,"#app",void 0);if(!(Q instanceof k))throw v("let_assert",TV,"app",15,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:426,end:475,pattern_start:437,pattern_end:442});return}jX();

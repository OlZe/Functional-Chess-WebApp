function MG(Z){return!Z}function r(Z,Q,J){if(Z)return Q;else return J()}function RG(Z,Q,J){if(Z)return Q();else return J()}class R{withFields(Z){let Q=Object.keys(this).map((J)=>(J in Z)?Z[J]:this[J]);return new this.constructor(...Q)}}class fQ{static fromArray(Z,Q){let J=Q||new P;for(let W=Z.length-1;W>=0;--W)J=new KQ(Z[W],J);return J}[Symbol.iterator](){return new qG(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof P}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function O(Z,Q){return new KQ(Z,Q)}function I(Z,Q){return fQ.fromArray(Z,Q)}class qG{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof P)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class P extends fQ{}class KQ extends fQ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class hJ{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,J){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=J??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return QJ(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let W=0;W<Q;W++)if(this.rawBuffer[W]!==Z.rawBuffer[W])return!1;let J=this.bitSize%8;if(J){let W=8-J;if(this.rawBuffer[Q]>>W!==Z.rawBuffer[Q]>>W)return!1}}else{for(let W=0;W<Q;W++){let G=QJ(this.rawBuffer,this.bitOffset,W),K=QJ(Z.rawBuffer,Z.bitOffset,W);if(G!==K)return!1}let J=this.bitSize%8;if(J){let W=QJ(this.rawBuffer,this.bitOffset,Q),G=QJ(Z.rawBuffer,Z.bitOffset,Q),K=8-J;if(W>>K!==G>>K)return!1}}return!0}get buffer(){if(zG("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(zG("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function QJ(Z,Q,J){if(Q===0)return Z[J]??0;else{let W=Z[J]<<Q&255,G=Z[J+1]>>8-Q;return W|G}}class k8{constructor(Z){this.value=Z}}var IG={};function zG(Z,Q){if(IG[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),IG[Z]=!0}class JJ extends R{static isResult(Z){return Z instanceof JJ}}class x extends JJ{constructor(Z){super();this[0]=Z}isOk(){return!0}}class b extends JJ{constructor(Z){super();this[0]=Z}isOk(){return!1}}function A(Z,Q){let J=[Z,Q];while(J.length){let W=J.pop(),G=J.pop();if(W===G)continue;if(!NG(W)||!NG(G))return!1;if(!EX(W,G)||AX(W,G)||PX(W,G)||TX(W,G)||SX(W,G)||CX(W,G)||LX(W,G))return!1;let X=Object.getPrototypeOf(W);if(X!==null&&typeof X.equals==="function")try{if(W.equals(G))continue;else return!1}catch{}let[V,Y]=BX(W),H=V(W),F=V(G);if(H.length!==F.length)return!1;for(let U of H)J.push(Y(W,U),Y(G,U))}return!0}function BX(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,J)=>Q.get(J)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(J)=>[...Q,...Object.keys(J)],(J,W)=>J[W]]}}function AX(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function PX(Z,Q){return!(Z instanceof hJ)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((J,W)=>J===Q[W]))}function TX(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function SX(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function CX(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((J)=>!Q.has(J)))}function LX(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function NG(Z){return typeof Z==="object"&&Z!==null}function EX(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((W)=>Z instanceof W))return!1;return Z.constructor===Q.constructor}function g(Z,Q,J,W,G,K,X){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=Q,V.module=J,V.line=W,V.function=G,V.fn=G;for(let Y in X)V[Y]=X[Y];return V}class C extends R{constructor(Z){super();this[0]=Z}}class y extends R{}function wX(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else{let G=J.head;Z=J.tail,Q=O(G,W)}}}function xX(Z){return wX(Z,I([]))}function DG(Z){return A(Z,new y)}function y9(Z,Q){if(Z instanceof C){let J=Z[0];return new x(J)}else return new b(Q)}function y8(Z){if(Z instanceof x){let Q=Z[0];return new C(Q)}else return new y}function b8(Z,Q){if(Z instanceof C){let J=Z[0];return new C(Q(J))}else return Z}function hQ(Z,Q){if(Z instanceof C){let J=Z[0];return Q(J)}else return Z}function WJ(Z,Q){if(Z instanceof C)return Z;else return Q()}function kX(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return xX(W);else{let G=J.head;if(G instanceof C){let K=J.tail,X=G[0];Z=K,Q=O(X,W)}else Z=J.tail,Q=W}}}function iQ(Z){return kX(Z,I([]))}var OG=new WeakMap,f8=new DataView(new ArrayBuffer(8)),h8=0;function v8(Z){let Q=OG.get(Z);if(Q!==void 0)return Q;let J=h8++;if(h8===2147483647)h8=0;return OG.set(Z,J),J}function g8(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function _8(Z){let Q=0,J=Z.length;for(let W=0;W<J;W++)Q=Math.imul(31,Q)+Z.charCodeAt(W)|0;return Q}function BG(Z){f8.setFloat64(0,Z);let Q=f8.getInt32(0),J=f8.getInt32(4);return Math.imul(73244475,Q>>16^Q)^J}function yX(Z){return _8(Z.toString())}function bX(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let W=Z.hashCode(Z);if(typeof W==="number")return W}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return v8(Z);if(Z instanceof Date)return BG(Z.getTime());let J=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let W=0;W<Z.length;W++)J=Math.imul(31,J)+aZ(Z[W])|0;else if(Z instanceof Set)Z.forEach((W)=>{J=J+aZ(W)|0});else if(Z instanceof Map)Z.forEach((W,G)=>{J=J+g8(aZ(W),aZ(G))|0});else{let W=Object.keys(Z);for(let G=0;G<W.length;G++){let K=W[G],X=Z[K];J=J+g8(aZ(X),_8(K))|0}}return J}function aZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return BG(Z);case"string":return _8(Z);case"bigint":return yX(Z);case"object":return bX(Z);case"symbol":return v8(Z);case"function":return v8(Z);default:return 0}}var TQ=5,$8=Math.pow(2,TQ),fX=$8-1,hX=$8/2,vX=$8/4,gZ=0,PQ=1,sZ=2,z9=3,m8={type:sZ,bitmap:0,array:[]};function GJ(Z,Q){return Z>>>Q&fX}function gJ(Z,Q){return 1<<GJ(Z,Q)}function gX(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function c8(Z,Q){return gX(Z&Q-1)}function iZ(Z,Q,J){let W=Z.length,G=Array(W);for(let K=0;K<W;++K)G[K]=Z[K];return G[Q]=J,G}function uX(Z,Q,J){let W=Z.length,G=Array(W+1),K=0,X=0;while(K<Q)G[X++]=Z[K++];G[X++]=J;while(K<W)G[X++]=Z[K++];return G}function u8(Z,Q){let J=Z.length,W=Array(J-1),G=0,K=0;while(G<Q)W[K++]=Z[G++];++G;while(G<J)W[K++]=Z[G++];return W}function AG(Z,Q,J,W,G,K){let X=aZ(Q);if(X===W)return{type:z9,hash:X,array:[{type:gZ,k:Q,v:J},{type:gZ,k:G,v:K}]};let V={val:!1};return KJ(p8(m8,Z,X,Q,J,V),Z,W,G,K,V)}function KJ(Z,Q,J,W,G,K){switch(Z.type){case PQ:return _X(Z,Q,J,W,G,K);case sZ:return p8(Z,Q,J,W,G,K);case z9:return $X(Z,Q,J,W,G,K)}}function _X(Z,Q,J,W,G,K){let X=GJ(J,Q),V=Z.array[X];if(V===void 0)return K.val=!0,{type:PQ,size:Z.size+1,array:iZ(Z.array,X,{type:gZ,k:W,v:G})};if(V.type===gZ){if(A(W,V.k)){if(G===V.v)return Z;return{type:PQ,size:Z.size,array:iZ(Z.array,X,{type:gZ,k:W,v:G})}}return K.val=!0,{type:PQ,size:Z.size,array:iZ(Z.array,X,AG(Q+TQ,V.k,V.v,J,W,G))}}let Y=KJ(V,Q+TQ,J,W,G,K);if(Y===V)return Z;return{type:PQ,size:Z.size,array:iZ(Z.array,X,Y)}}function p8(Z,Q,J,W,G,K){let X=gJ(J,Q),V=c8(Z.bitmap,X);if((Z.bitmap&X)!==0){let Y=Z.array[V];if(Y.type!==gZ){let F=KJ(Y,Q+TQ,J,W,G,K);if(F===Y)return Z;return{type:sZ,bitmap:Z.bitmap,array:iZ(Z.array,V,F)}}let H=Y.k;if(A(W,H)){if(G===Y.v)return Z;return{type:sZ,bitmap:Z.bitmap,array:iZ(Z.array,V,{type:gZ,k:W,v:G})}}return K.val=!0,{type:sZ,bitmap:Z.bitmap,array:iZ(Z.array,V,AG(Q+TQ,H,Y.v,J,W,G))}}else{let Y=Z.array.length;if(Y>=hX){let H=Array(32),F=GJ(J,Q);H[F]=p8(m8,Q+TQ,J,W,G,K);let U=0,M=Z.bitmap;for(let z=0;z<32;z++){if((M&1)!==0){let D=Z.array[U++];H[z]=D}M=M>>>1}return{type:PQ,size:Y+1,array:H}}else{let H=uX(Z.array,V,{type:gZ,k:W,v:G});return K.val=!0,{type:sZ,bitmap:Z.bitmap|X,array:H}}}}function $X(Z,Q,J,W,G,K){if(J===Z.hash){let X=d8(Z,W);if(X!==-1){if(Z.array[X].v===G)return Z;return{type:z9,hash:J,array:iZ(Z.array,X,{type:gZ,k:W,v:G})}}let V=Z.array.length;return K.val=!0,{type:z9,hash:J,array:iZ(Z.array,V,{type:gZ,k:W,v:G})}}return KJ({type:sZ,bitmap:gJ(Z.hash,Q),array:[Z]},Q,J,W,G,K)}function d8(Z,Q){let J=Z.array.length;for(let W=0;W<J;W++)if(A(Q,Z.array[W].k))return W;return-1}function vJ(Z,Q,J,W){switch(Z.type){case PQ:return mX(Z,Q,J,W);case sZ:return cX(Z,Q,J,W);case z9:return pX(Z,W)}}function mX(Z,Q,J,W){let G=GJ(J,Q),K=Z.array[G];if(K===void 0)return;if(K.type!==gZ)return vJ(K,Q+TQ,J,W);if(A(W,K.k))return K;return}function cX(Z,Q,J,W){let G=gJ(J,Q);if((Z.bitmap&G)===0)return;let K=c8(Z.bitmap,G),X=Z.array[K];if(X.type!==gZ)return vJ(X,Q+TQ,J,W);if(A(W,X.k))return X;return}function pX(Z,Q){let J=d8(Z,Q);if(J<0)return;return Z.array[J]}function s8(Z,Q,J,W){switch(Z.type){case PQ:return dX(Z,Q,J,W);case sZ:return sX(Z,Q,J,W);case z9:return nX(Z,W)}}function dX(Z,Q,J,W){let G=GJ(J,Q),K=Z.array[G];if(K===void 0)return Z;let X=void 0;if(K.type===gZ){if(!A(K.k,W))return Z}else if(X=s8(K,Q+TQ,J,W),X===K)return Z;if(X===void 0){if(Z.size<=vX){let V=Z.array,Y=Array(Z.size-1),H=0,F=0,U=0;while(H<G){let M=V[H];if(M!==void 0)Y[F]=M,U|=1<<H,++F;++H}++H;while(H<V.length){let M=V[H];if(M!==void 0)Y[F]=M,U|=1<<H,++F;++H}return{type:sZ,bitmap:U,array:Y}}return{type:PQ,size:Z.size-1,array:iZ(Z.array,G,X)}}return{type:PQ,size:Z.size,array:iZ(Z.array,G,X)}}function sX(Z,Q,J,W){let G=gJ(J,Q);if((Z.bitmap&G)===0)return Z;let K=c8(Z.bitmap,G),X=Z.array[K];if(X.type!==gZ){let V=s8(X,Q+TQ,J,W);if(V===X)return Z;if(V!==void 0)return{type:sZ,bitmap:Z.bitmap,array:iZ(Z.array,K,V)};if(Z.bitmap===G)return;return{type:sZ,bitmap:Z.bitmap^G,array:u8(Z.array,K)}}if(A(W,X.k)){if(Z.bitmap===G)return;return{type:sZ,bitmap:Z.bitmap^G,array:u8(Z.array,K)}}return Z}function nX(Z,Q){let J=d8(Z,Q);if(J<0)return Z;if(Z.array.length===1)return;return{type:z9,hash:Z.hash,array:u8(Z.array,J)}}function PG(Z,Q){if(Z===void 0)return;let J=Z.array,W=J.length;for(let G=0;G<W;G++){let K=J[G];if(K===void 0)continue;if(K.type===gZ){Q(K.v,K.k);continue}PG(K,Q)}}class dZ{static fromObject(Z){let Q=Object.keys(Z),J=dZ.new();for(let W=0;W<Q.length;W++){let G=Q[W];J=J.set(G,Z[G])}return J}static fromMap(Z){let Q=dZ.new();return Z.forEach((J,W)=>{Q=Q.set(W,J)}),Q}static new(){return new dZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let J=vJ(this.root,0,aZ(Z),Z);if(J===void 0)return Q;return J.v}set(Z,Q){let J={val:!1},W=this.root===void 0?m8:this.root,G=KJ(W,0,aZ(Z),Z,Q,J);if(G===this.root)return this;return new dZ(G,J.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=s8(this.root,0,aZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return dZ.new();return new dZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return vJ(this.root,0,aZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,J)=>Z.push([J,Q])),Z}forEach(Z){PG(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,J)=>{Z=Z+g8(aZ(Q),aZ(J))|0}),Z}equals(Z){if(!(Z instanceof dZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,J)=>{if(!A(Z.get(J,!Q),Q))throw jG}),!0}catch(Q){if(Q===jG)return!1;throw Q}}}var jG=Symbol();class YZ extends R{}class HZ extends R{}class vQ extends R{}function uJ(Z,Q){if(Z===Q)return new HZ;else if(Z<Q)return new YZ;else return new vQ}class CZ extends R{}class b9 extends R{}function oX(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else Z=J.tail,Q=W+1}}function wG(Z){return oX(Z,0)}function f9(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else{let G=J.head;Z=J.tail,Q=O(G,W)}}}function e(Z){return f9(Z,I([]))}function xG(Z){return A(Z,I([]))}function eX(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return e(K);else{let{head:X,tail:V}=W,Y;if(G(X))Y=O(X,K);else Y=K;let F=Y;Z=V,Q=G,J=F}}}function h9(Z,Q){return eX(Z,Q,I([]))}function ZV(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return e(K);else{let{head:X,tail:V}=W,Y,H=G(X);if(H instanceof x){let U=H[0];Y=O(U,K)}else Y=K;let F=Y;Z=V,Q=G,J=F}}}function _J(Z,Q){return ZV(Z,Q,I([]))}function QV(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return e(K);else{let X=W.head;Z=W.tail,Q=G,J=O(G(X),K)}}}function LZ(Z,Q){return QV(Z,Q,I([]))}function JV(Z,Q,J,W){while(!0){let G=Z,K=Q,X=J,V=W;if(G instanceof P)return e(V);else{let{head:Y,tail:H}=G,F=O(K(Y,X),V);Z=H,Q=K,J=X+1,W=F}}}function kG(Z,Q){return JV(Z,Q,0,I([]))}function WV(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(G<=0)return e(K);else if(W instanceof P)return e(K);else{let V=W.head;Z=W.tail,Q=G-1,J=O(V,K)}}}function yG(Z,Q){return WV(Z,Q,I([]))}function GV(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else{let G=J.head;Z=J.tail,Q=O(G,W)}}}function Z9(Z,Q){return GV(e(Z),Q)}function $J(Z,Q){return O(Q,Z)}function KV(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return e(W);else{let G=J.head;Z=J.tail,Q=f9(G,W)}}}function XV(Z){return KV(Z,I([]))}function v9(Z,Q){return XV(LZ(Z,Q))}function EZ(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return G;else{let X=W.head;Z=W.tail,Q=K(G,X),J=K}}}function bG(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return new b(void 0);else{let{head:G,tail:K}=J,X=W(G);if(X instanceof x)return X;else Z=K,Q=W}}}function XJ(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return!0;else{let{head:G,tail:K}=J,X=W(G);if(X)Z=K,Q=W;else return X}}}function VJ(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return!1;else{let{head:G,tail:K}=J,X=W(G);if(X)return X;else Z=K,Q=W}}}function VV(Z,Q,J,W,G,K){while(!0){let X=Z,V=Q,Y=J,H=W,F=G,U=K,M=O(F,Y);if(X instanceof P)if(H instanceof CZ)return O(e(M),U);else return O(M,U);else{let{head:z,tail:D}=X,S=V(F,z);if(H instanceof CZ)if(S instanceof YZ)Z=D,Q=V,J=M,W=H,G=z,K=U;else if(S instanceof HZ)Z=D,Q=V,J=M,W=H,G=z,K=U;else{let q;if(H instanceof CZ)q=O(e(M),U);else q=O(M,U);let T=q;if(D instanceof P)return O(I([z]),T);else{let{head:j,tail:L}=D,E,N=V(z,j);if(N instanceof YZ)E=new CZ;else if(N instanceof HZ)E=new CZ;else E=new b9;let k=E;Z=L,Q=V,J=I([z]),W=k,G=j,K=T}}else if(S instanceof YZ){let q;if(H instanceof CZ)q=O(e(M),U);else q=O(M,U);let T=q;if(D instanceof P)return O(I([z]),T);else{let{head:j,tail:L}=D,E,N=V(z,j);if(N instanceof YZ)E=new CZ;else if(N instanceof HZ)E=new CZ;else E=new b9;let k=E;Z=L,Q=V,J=I([z]),W=k,G=j,K=T}}else if(S instanceof HZ){let q;if(H instanceof CZ)q=O(e(M),U);else q=O(M,U);let T=q;if(D instanceof P)return O(I([z]),T);else{let{head:j,tail:L}=D,E,N=V(z,j);if(N instanceof YZ)E=new CZ;else if(N instanceof HZ)E=new CZ;else E=new b9;let k=E;Z=L,Q=V,J=I([z]),W=k,G=j,K=T}}else Z=D,Q=V,J=M,W=H,G=z,K=U}}}function YV(Z,Q,J,W){while(!0){let G=Z,K=Q,X=J,V=W;if(G instanceof P)return f9(K,V);else if(K instanceof P)return f9(G,V);else{let{head:Y,tail:H}=G,F=K.head,U=K.tail,M=X(Y,F);if(M instanceof YZ)Z=H,Q=K,J=X,W=O(Y,V);else if(M instanceof HZ)Z=G,Q=U,J=X,W=O(F,V);else Z=G,Q=U,J=X,W=O(F,V)}}}function HV(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return e(K);else{let X=W.tail;if(X instanceof P){let V=W.head;return e(O(e(V),K))}else{let V=W.head,Y=X.head,H=X.tail,F=YV(V,Y,G,I([]));Z=H,Q=G,J=O(F,K)}}}}function UV(Z,Q,J,W){while(!0){let G=Z,K=Q,X=J,V=W;if(G instanceof P)return f9(K,V);else if(K instanceof P)return f9(G,V);else{let{head:Y,tail:H}=G,F=K.head,U=K.tail,M=X(Y,F);if(M instanceof YZ)Z=G,Q=U,J=X,W=O(F,V);else if(M instanceof HZ)Z=H,Q=K,J=X,W=O(Y,V);else Z=H,Q=K,J=X,W=O(Y,V)}}}function FV(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return e(K);else{let X=W.tail;if(X instanceof P){let V=W.head;return e(O(e(V),K))}else{let V=W.head,Y=X.head,H=X.tail,F=UV(V,Y,G,I([]));Z=H,Q=G,J=O(F,K)}}}}function MV(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return W;else if(G instanceof CZ)if(W.tail instanceof P)return W.head;else Z=HV(W,K,I([])),Q=new b9,J=K;else if(W.tail instanceof P){let V=W.head;return e(V)}else Z=FV(W,K,I([])),Q=new CZ,J=K}}function fG(Z,Q){if(Z instanceof P)return Z;else{let J=Z.tail;if(J instanceof P)return Z;else{let W=Z.head,G=J.head,K=J.tail,X,V=Q(W,G);if(V instanceof YZ)X=new CZ;else if(V instanceof HZ)X=new CZ;else X=new b9;let Y=X,H=VV(K,Q,I([W]),Y,G,I([]));return MV(H,new CZ,Q)}}}function hG(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return;else{let{head:G,tail:K}=J;W(G),Z=K,Q=W}}}function OV(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else{let G=J.head;Z=J.tail,Q=W+G}}}function gG(Z){return OV(Z,"")}class r8 extends R{constructor(Z){super();this.function=Z}}function N9(Z,Q){let J=Q.function(Z),W,G;if(W=J[0],G=J[1],G instanceof P)return new x(W);else return new b(G)}function SQ(Z){return new r8((Q)=>{return[Z,I([])]})}function mJ(Z,Q){return new r8((J)=>{let W=Z.function(J),G,K;return G=W[0],K=W[1],[Q(G),K]})}var TV=void 0,_G={};function gQ(Z){return Z.toString()}function l8(Z,Q){return Z.startsWith(Q)}var $G=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),q5=new RegExp(`^[${$G}]*`),D5=new RegExp(`[${$G}]*$`);function oZ(){return dZ.new()}function Q9(Z){return Z.size}function q9(Z){return fQ.fromArray(Z.entries())}function mG(Z,Q){return Q.delete(Z)}function XZ(Z,Q){let J=Z.get(Q,_G);if(J===_G)return new b(TV);return new x(J)}function cG(Z,Q,J){return J.set(Z,Q)}function EG(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let J=Q.indexOf("e");if(J>=0)return Q.slice(0,J)+".0"+Q.slice(J);else return Q+".0"}}class SV{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#K(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return EG(Z);if(Z instanceof k8)return this.#V(Z);if(Z instanceof hJ)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let W=[];for(let G of Array(Z.length).keys())W.push(String.fromCharCode(G+97));return`//fn(${W.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let J;if(Array.isArray(Z))J=`#(${Z.map((W)=>this.inspect(W)).join(", ")})`;else if(Z instanceof fQ)J=this.#Q(Z);else if(Z instanceof R)J=this.#J(Z);else if(Z instanceof dZ)J=this.#W(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((W)=>this.inspect(W)).join(", ")}))`;else J=this.#G(Z);return this.#Z.delete(Z),J}#G(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",J=[];for(let K of Object.keys(Z))J.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let W=J.length?" "+J.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${W}})`}#W(Z){let Q="dict.from_list([",J=!0;return Z.forEach((W,G)=>{if(!J)Q=Q+", ";Q=Q+"#("+this.inspect(G)+", "+this.inspect(W)+")",J=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((J)=>{let W=this.inspect(Z[J]);return isNaN(parseInt(J))?`${J}: ${W}`:W}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof P)return"[]";let Q='charlist.from_string("',J="[",W=Z;while(W instanceof KQ){let G=W.head;if(W=W.tail,J!=="[")J+=", ";if(J+=this.inspect(G),Q)if(Number.isInteger(G)&&G>=32&&G<=126)Q+=String.fromCharCode(G);else Q=null}if(Q)return Q+'")';else return J+"]"}#K(Z){let Q='"';for(let J=0;J<Z.length;J++){let W=Z[J];switch(W){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(W<" "||W>"~"&&W<" ")Q+="\\u{"+W.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=W}}return Q+='"',Q}#V(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let J=0;J<Z.byteSize-1;J++)Q+=Z.byteAt(J).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let J=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-J,Q+=`:size(${J})`}return Q+=">>",Q}}function n8(Z){return Q9(Z)===0}function AZ(Z,Q,J){return cG(Q,J,Z)}function CV(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else{let G=J.tail,K=J.head[0],X=J.head[1];Z=G,Q=AZ(W,K,X)}}}function tQ(Z){return CV(Z,oZ())}function LV(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else{let G=J.head;Z=J.tail,Q=O(G,W)}}}function EV(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return LV(W,I([]));else{let G=J.tail,K=J.head[0];Z=G,Q=O(K,W)}}}function YQ(Z){return EV(q9(Z),I([]))}function eZ(Z,Q){return mG(Q,Z)}function wV(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return G;else{let X=W.tail,V=W.head[0],Y=W.head[1];Z=X,Q=K(G,V,Y),J=K}}}function HJ(Z,Q,J){return wV(q9(Z),Q,J)}function xV(Z,Q){let J=(W,G,K)=>{if(Z(G,K))return AZ(W,G,K);else return W};return HJ(Q,oZ(),J)}function pG(Z,Q){return xV(Q,Z)}function dG(Z){if(Z instanceof x)return!0;else return!1}function a8(Z,Q){if(Z instanceof x){let J=Z[0];return new x(Q(J))}else return Z}function i8(Z,Q){if(Z instanceof x)return Z;else{let J=Z[0];return new b(Q(J))}}function HQ(Z,Q){if(Z instanceof x){let J=Z[0];return Q(J)}else return Z}function cJ(Z,Q){if(Z instanceof x)return Z[0];else return Q}function J9(Z,Q){if(Z instanceof x)return Z[0];else return Q()}class UJ extends R{constructor(Z){super();this.dict=Z}}function wZ(){return new UJ(oZ())}function sG(Z){return A(Z,wZ())}function FJ(Z,Q){let J=Z.dict,W=XZ(J,Q);return dG(W)}function D9(Z){return YQ(Z.dict)}function W9(Z,Q,J){return HJ(Z.dict,Q,(W,G,K)=>{return J(W,G)})}function nG(Z,Q){return new UJ(pG(Z.dict,(J,W)=>{return Q(J)}))}function kV(Z,Q){if(Q9(Z.dict)>Q9(Q.dict))return[Z,Q];else return[Q,Z]}var lG=void 0;function MJ(Z,Q){return new UJ(AZ(Z.dict,Q,lG))}function $Z(Z){let Q=EZ(Z,oZ(),(J,W)=>{return AZ(J,W,lG)});return new UJ(Q)}function xZ(Z,Q){return W9(Z,wZ(),(J,W)=>{return MJ(J,Q(W))})}function G9(Z,Q){let J=kV(Z,Q),W,G;return W=J[0],G=J[1],W9(G,W,MJ)}class t8 extends R{constructor(Z){super();this.dict=Z}}function u9(){return new t8(oZ())}function o8(Z,Q){let J=Z.dict,W=XZ(J,Q);return cJ(W,0)}function _9(Z,Q){let J=o8(Z,Q)+1,W=AZ(Z.dict,Q,J);return new t8(W)}var a="src/chess.gleam";class dJ extends R{constructor(Z,Q,J,W,G){super();this.internal=Z,this.history=Q,this.status=J,this.starting_position=W,this.all_moves=G}}class bZ extends R{constructor(Z,Q,J,W,G,K,X,V,Y){super();this.board=Z,this.moving_player=Q,this.en_passant_possible=J,this.short_castle_disqualified_white=W,this.long_castle_disqualified_white=G,this.short_castle_disqualified_black=K,this.long_castle_disqualified_black=X,this.fifty_move_rule_counter=V,this.threefold_repetition_counter=Y}}class aG extends R{constructor(Z,Q,J,W,G,K,X){super();this.board=Z,this.moving_player=Q,this.en_passant_possible=J,this.short_castle_disqualified_white=W,this.long_castle_disqualified_white=G,this.short_castle_disqualified_black=K,this.long_castle_disqualified_black=X}}class JQ extends R{constructor(Z){super();this.info=Z}}class j9 extends R{constructor(Z){super();this.next_player=Z}}class sJ extends R{constructor(Z,Q){super();this.winner=Z,this.by=Q}}class RJ extends R{constructor(Z){super();this.by=Z}}class nJ extends R{}class iG extends R{}class tG extends R{}class oG extends R{}class eG extends R{}class UQ extends R{constructor(Z,Q,J){super();this.white_king=Z,this.black_king=Q,this.other_figures=J}}class s extends R{}class ZQ extends R{}class mZ extends R{}class qZ extends R{}class QQ extends R{}class _Q extends R{}class f extends R{}class JZ extends R{}class B extends R{constructor(Z,Q){super();this.file=Z,this.row=Q}}class ZZ extends R{}class OZ extends R{}class WZ extends R{}class MZ extends R{}class c extends R{}class RZ extends R{}class GZ extends R{}class TZ extends R{}class h extends R{}class UZ extends R{}class cZ extends R{}class kZ extends R{}class yZ extends R{}class pZ extends R{}class FZ extends R{}class u extends R{}class FQ extends R{constructor(Z,Q){super();this.from=Z,this.to=Q}}class MQ extends R{constructor(Z,Q,J){super();this.from=Z,this.to=Q,this.new_figure=J}}class LQ extends R{constructor(Z,Q){super();this.from=Z,this.to=Q}}class EQ extends R{}class lJ extends R{}class Z0 extends R{}class Q0 extends R{}class J0 extends R{}class W0 extends R{}class G0 extends R{}class K0 extends R{}class fZ extends R{constructor(Z){super();this.to=Z}}class RQ extends R{constructor(Z){super();this.to=Z}}class IQ extends R{constructor(Z){super();this.to=Z}}class zQ extends R{}class ZW extends R{}class X0 extends R{constructor(Z){super();this.passed_move_number=Z}}class V0 extends R{constructor(Z,Q){super();this.passed_move_number=Z,this.allowed_maximum_move_number=Q}}class rJ extends R{constructor(Z,Q,J){super();this.origin=Z,this.offset=Q,this.attacker=J}}class aJ extends R{constructor(Z,Q,J){super();this.origin=Z,this.direction=Q,this.attacker=J}}class Y0 extends R{}class H0 extends R{}function QW(Z){return Q9(Z.internal.board.other_figures)+2}function K9(Z){return Z.status}function bV(Z){return Z.fifty_move_rule_counter>=100}function fV(){return new UQ(new B(new c,new h),new B(new c,new u),tQ(I([[new B(new ZZ,new h),[new qZ,new f]],[new B(new OZ,new h),[new ZQ,new f]],[new B(new WZ,new h),[new mZ,new f]],[new B(new MZ,new h),[new QQ,new f]],[new B(new RZ,new h),[new mZ,new f]],[new B(new GZ,new h),[new ZQ,new f]],[new B(new TZ,new h),[new qZ,new f]],[new B(new ZZ,new UZ),[new s,new f]],[new B(new OZ,new UZ),[new s,new f]],[new B(new WZ,new UZ),[new s,new f]],[new B(new MZ,new UZ),[new s,new f]],[new B(new c,new UZ),[new s,new f]],[new B(new RZ,new UZ),[new s,new f]],[new B(new GZ,new UZ),[new s,new f]],[new B(new TZ,new UZ),[new s,new f]],[new B(new ZZ,new u),[new qZ,new JZ]],[new B(new OZ,new u),[new ZQ,new JZ]],[new B(new WZ,new u),[new mZ,new JZ]],[new B(new MZ,new u),[new QQ,new JZ]],[new B(new RZ,new u),[new mZ,new JZ]],[new B(new GZ,new u),[new ZQ,new JZ]],[new B(new TZ,new u),[new qZ,new JZ]],[new B(new ZZ,new FZ),[new s,new JZ]],[new B(new OZ,new FZ),[new s,new JZ]],[new B(new WZ,new FZ),[new s,new JZ]],[new B(new MZ,new FZ),[new s,new JZ]],[new B(new c,new FZ),[new s,new JZ]],[new B(new RZ,new FZ),[new s,new JZ]],[new B(new GZ,new FZ),[new s,new JZ]],[new B(new TZ,new FZ),[new s,new JZ]]])))}function l(Z,Q){let J=Z.white_king;if(A(J,Q))return new C([new _Q,new f]);else{let W=Z.black_king;if(A(W,Q))return new C([new _Q,new JZ]);else{let K=Z.other_figures,X=XZ(K,Q);return y8(X)}}}function WQ(Z,Q){let J=Z.internal.board;return l(J,Q)}function rG(Z){let Q,J=Z.file;if(J instanceof ZZ)Q=0;else if(J instanceof OZ)Q=1;else if(J instanceof WZ)Q=2;else if(J instanceof MZ)Q=3;else if(J instanceof c)Q=4;else if(J instanceof RZ)Q=5;else if(J instanceof GZ)Q=6;else Q=7;let W=Q,G,K=Z.row;if(K instanceof h)G=0;else if(K instanceof UZ)G=1;else if(K instanceof cZ)G=2;else if(K instanceof kZ)G=3;else if(K instanceof yZ)G=4;else if(K instanceof pZ)G=5;else if(K instanceof FZ)G=6;else G=7;let V=(W+G)%2;if(V===0)return new H0;else if(V===1)return new Y0;else throw g("panic",a,"chess",1860,"coord_colour","`panic` expression evaluated.",{})}function hV(Z){let Q=q9(Z.other_figures);if(Q instanceof P)return!0;else{let J=Q.tail;if(J instanceof P){let W=Q.head[1][0];if(W instanceof ZQ)return!0;else if(W instanceof mZ)return!0;else return!1}else if(J.tail instanceof P)if(J.head[1][0]instanceof mZ)if(Q.head[1][0]instanceof mZ){let X=J.head[1][1],V=Q.head[1][1];if(!A(V,X)){let Y=J.head[0],H=Q.head[0];return A(rG(H),rG(Y))}else return!1}else return!1;else return!1;else return!1}}function vV(Z,Q){while(!0){let J=Z,W=Q,G=uJ(W,0);if(G instanceof YZ)if(J instanceof h)return new y;else if(J instanceof UZ)Z=new h,Q=W+1;else if(J instanceof cZ)Z=new UZ,Q=W+1;else if(J instanceof kZ)Z=new cZ,Q=W+1;else if(J instanceof yZ)Z=new kZ,Q=W+1;else if(J instanceof pZ)Z=new yZ,Q=W+1;else if(J instanceof FZ)Z=new pZ,Q=W+1;else Z=new FZ,Q=W+1;else if(G instanceof HZ)return new C(J);else if(J instanceof h)Z=new UZ,Q=W-1;else if(J instanceof UZ)Z=new cZ,Q=W-1;else if(J instanceof cZ)Z=new kZ,Q=W-1;else if(J instanceof kZ)Z=new yZ,Q=W-1;else if(J instanceof yZ)Z=new pZ,Q=W-1;else if(J instanceof pZ)Z=new FZ,Q=W-1;else if(J instanceof FZ)Z=new u,Q=W-1;else return new y}}function e8(Z,Q){while(!0){let J=Z,W=Q,G=uJ(W,0);if(G instanceof YZ)if(J instanceof ZZ)return new y;else if(J instanceof OZ)Z=new ZZ,Q=W+1;else if(J instanceof WZ)Z=new OZ,Q=W+1;else if(J instanceof MZ)Z=new WZ,Q=W+1;else if(J instanceof c)Z=new MZ,Q=W+1;else if(J instanceof RZ)Z=new c,Q=W+1;else if(J instanceof GZ)Z=new RZ,Q=W+1;else Z=new GZ,Q=W+1;else if(G instanceof HZ)return new C(J);else if(J instanceof ZZ)Z=new OZ,Q=W-1;else if(J instanceof OZ)Z=new WZ,Q=W-1;else if(J instanceof WZ)Z=new MZ,Q=W-1;else if(J instanceof MZ)Z=new c,Q=W-1;else if(J instanceof c)Z=new RZ,Q=W-1;else if(J instanceof RZ)Z=new GZ,Q=W-1;else if(J instanceof GZ)Z=new TZ,Q=W-1;else return new y}}function gV(Z,Q){return hQ(Z.en_passant_possible,(J)=>{let W=I([e8(J,-1),e8(J,1)]),G=iQ(W),K=bG(G,(X)=>{let V;if(Z.moving_player instanceof f)V=[new B(X,new yZ),new B(J,new pZ)];else V=[new B(X,new kZ),new B(J,new cZ)];let H=V,F,U;if(F=H[0],U=H[1],A(Q,F))return new x(new IQ(U));else return new b(void 0)});return y8(K)})}function $9(Z,Q,J){return hQ(e8(Z.file,Q),(W)=>{return hQ(vV(Z.row,J),(G)=>{return new C(new B(W,G))})})}function uV(Z,Q){let J;if(Z.moving_player instanceof f)J=1;else J=-1;let G=J,K=hQ($9(Q,0,G),(E)=>{if(l(Z.board,E)instanceof C)return new y;else return new C(E)}),X=hQ(K,(E)=>{let N;if(Z.moving_player instanceof f)N=new kZ;else N=new yZ;let w=N;return hQ($9(E,0,G),(v)=>{return r(!A(v.row,w),new y,()=>{if(l(Z.board,v)instanceof C)return new y;else return new C(v)})})}),V=hQ($9(Q,-1,G),(E)=>{let N=l(Z.board,E);if(N instanceof C){let k=N[0][1];if(A(k,Z.moving_player))return new y;else return new C(E)}else return N}),Y=hQ($9(Q,1,G),(E)=>{let N=l(Z.board,E);if(N instanceof C){let k=N[0][1];if(A(k,Z.moving_player))return new y;else return new C(E)}else return N}),H,F=I([K,X,V,Y]),U=iQ(F),M=LZ(U,(E)=>{let N;if(Z.moving_player instanceof f)N=new u;else N=new h;let w=N,v=E.row;if(A(v,w))return new RQ(E);else return new fZ(E)});H=$Z(M);let z=H,D=gV(Z,Q),S,q=I([D]),T=iQ(q),j=$Z(T);return S=G9(j,z),S}function _V(Z,Q,J,W,G){while(!0){let K=Z,X=Q,V=J,Y=W,H=G,F=$9(X,V[0],V[1]);if(F instanceof C){let U=F[0],M=l(K,U);if(M instanceof C){let z=M[0][1];if(A(z,Y))return H;else return MJ(H,U)}else Z=K,Q=U,J=V,W=Y,G=MJ(H,U)}else return H}}function IJ(Z,Q){if(Q instanceof rJ){let{origin:J,attacker:W}=Q,G=Q.offset[0],K=Q.offset[1],X=$9(J,G,K);if(X instanceof C){let V=X[0],Y=l(Z,V);if(Y instanceof C){let H=Y[0][1];if(A(H,W))return wZ();else return $Z(I([V]))}else return $Z(I([V]))}else return wZ()}else{let{origin:J,direction:W,attacker:G}=Q;return _V(Z,J,W,G,wZ())}}function $V(Z,Q,J){let W=I([[1,2],[2,1],[2,-1],[1,-2],[-1,-2],[-2,-1],[-2,1],[-1,2]]),G=$Z(W),K=xZ(G,(Y)=>{return new rJ(Q,Y,J)}),X=xZ(K,(Y)=>{return IJ(Z,Y)}),V=W9(X,wZ(),G9);return xZ(V,(Y)=>{return new fZ(Y)})}function mV(Z,Q,J){let W=I([[0,1],[1,0],[0,-1],[-1,0]]),G=$Z(W),K=xZ(G,(Y)=>{return new aJ(Q,Y,J)}),X=xZ(K,(Y)=>{return IJ(Z,Y)}),V=W9(X,wZ(),G9);return xZ(V,(Y)=>{return new fZ(Y)})}function cV(Z,Q,J){let W=I([[1,1],[1,-1],[-1,-1],[-1,1]]),G=$Z(W),K=xZ(G,(Y)=>{return new aJ(Q,Y,J)}),X=xZ(K,(Y)=>{return IJ(Z,Y)}),V=W9(X,wZ(),G9);return xZ(V,(Y)=>{return new fZ(Y)})}function pV(Z,Q,J){let W=I([[0,1],[1,0],[0,-1],[-1,0],[1,1],[1,-1],[-1,-1],[-1,1]]),G=$Z(W),K=xZ(G,(Y)=>{return new aJ(Q,Y,J)}),X=xZ(K,(Y)=>{return IJ(Z,Y)}),V=W9(X,wZ(),G9);return xZ(V,(Y)=>{return new fZ(Y)})}function O9(Z){if(Z instanceof f)return new JZ;else return new f}function m9(Z){return new aG(Z.board,Z.moving_player,Z.en_passant_possible,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black)}function dV(Z){let Q=new bZ(Z.board,O9(Z.moving_player),Z.en_passant_possible,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,Z.threefold_repetition_counter),J=m9(Q);return(()=>{let W=Q.threefold_repetition_counter;return o8(W,J)})()>=2}var i=`Critical internal error!
This is not your fault (unless you mutated the internal state!).
If you see this message then this likely means, that something in this package's logic is incorrect.
Please open an issue at https://github.com/OlZe/Functional-Chess with a detailled description to help improve this package.
Sorry for the inconvience.`;function JW(Z,Q){let J=Z.status;if(J instanceof JQ)return new b(new G0);else{let W=J.next_player,G=Z.internal.moving_player;if(!A(G,W))throw g("assert",a,"chess",490,"get_moves",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:14613,end:14640},right:{kind:"expression",value:W,start:14644,end:14657},start:14606,end:14657,expression_start:14613});let K,X=WQ(Z,Q);if(X instanceof C){let Y=X[0][1];if(A(Y,W))K=!0;else K=!1}else K=!1;return r(!K,new b(new K0),()=>{let Y=Z.all_moves,H=XZ(Y,Q),F=J9(H,()=>{return wZ()});return new x(F)})}}function U0(Z){let Q=Z.status;if(Q instanceof JQ)return new b(void 0);else{let J=Q.next_player,W=Z.internal.moving_player;if(!A(W,J))throw g("assert",a,"chess",522,"get_all_moves",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:W,start:15709,end:15736},right:{kind:"expression",value:J,start:15740,end:15753},start:15702,end:15753,expression_start:15709});return new x(Z.all_moves)}}function sV(Z,Q,J){let W;if(XZ(Z.board.other_figures,J)instanceof x)W=!0;else W=!1;let K=W,X,V=XZ(Z.board.other_figures,Q);if(V instanceof x)if(V[0][0]instanceof s)X=!0;else X=!1;else X=!1;let Y=X,H=r(Y,0,()=>{return r(K,0,()=>{return Z.fifty_move_rule_counter+1})}),F=r(K,u9(),()=>{return r(Y,u9(),()=>{let z=Z.threefold_repetition_counter;return _9(z,m9(Z))})}),U=Z.board,M=U.white_king;if(A(M,Q)){let{black_king:z,other_figures:D}=U;return new bZ(new UQ(J,z,eZ(D,J)),Z.moving_player,new y,!0,!0,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,H,F)}else{let z=U.black_king;if(A(z,Q)){let{white_king:D,other_figures:S}=U;return new bZ(new UQ(D,J,eZ(S,J)),Z.moving_player,new y,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,!0,!0,H,F)}else{let{white_king:D,black_king:S,other_figures:q}=U,T=XZ(q,Q),j;if(T instanceof x)j=T[0];else throw g("let_assert",a,"chess",1554,"do_move_standard_figure_move",i,{value:T,start:47556,end:47616,pattern_start:47567,pattern_end:47584});let L;if(j[1]instanceof f)if(j[0]instanceof s&&(A(Q.row,new UZ)&&A(J.row,new kZ))&&A(Q.file,J.file))L=new C(J.file);else L=new y;else if(j[0]instanceof s&&(A(Q.row,new FZ)&&A(J.row,new yZ))&&A(Q.file,J.file))L=new C(J.file);else L=new y;let N=L,k=Z.short_castle_disqualified_white||A(Q,new B(new TZ,new h))||A(J,new B(new TZ,new h)),w=Z.long_castle_disqualified_white||A(Q,new B(new ZZ,new h))||A(J,new B(new ZZ,new h)),v=Z.short_castle_disqualified_black||A(Q,new B(new TZ,new u))||A(J,new B(new TZ,new u)),m=Z.long_castle_disqualified_black||A(Q,new B(new ZZ,new u))||A(J,new B(new ZZ,new u));return new bZ(new UQ(D,S,(()=>{let IZ=eZ(q,Q);return AZ(IZ,J,j)})()),Z.moving_player,N,k,w,v,m,H,F)}}}function nV(Z,Q,J,W){let{board:G,moving_player:K}=Z,X=l(G,Q),V=new C([new s,K]);if(!A(X,V))throw g("assert",a,"chess",1620,"do_move_pawn_promotion",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:X,start:49653,end:49675},right:{kind:"expression",value:V,start:49679,end:49707},start:49646,end:49707,expression_start:49653});let Y=Z.short_castle_disqualified_white||A(J,new B(new TZ,new h)),H=Z.long_castle_disqualified_white||A(J,new B(new ZZ,new h)),F=Z.short_castle_disqualified_black||A(J,new B(new TZ,new u)),U=Z.long_castle_disqualified_black||A(J,new B(new ZZ,new u));return new bZ(new UQ(G.white_king,G.black_king,(()=>{let M=G.other_figures,z=eZ(M,Q);return AZ(z,J,[W,K])})()),Z.moving_player,new y,Y,H,F,U,0,u9())}function lV(Z,Q,J){let{board:W,moving_player:G}=Z,K=new B(J.file,Q.row),X=l(W,Q),V=new C([new s,G]);if(!A(X,V))throw g("assert",a,"chess",1666,"do_move_en_passant",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:X,start:51237,end:51259},right:{kind:"expression",value:V,start:51263,end:51291},start:51230,end:51291,expression_start:51237});let Y=l(W,K),H=new C([new s,O9(G)]);if(!A(Y,H))throw g("assert",a,"chess",1669,"do_move_en_passant",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:Y,start:51329,end:51363},right:{kind:"expression",value:H,start:51371,end:51412},start:51322,end:51412,expression_start:51329});let F=l(W,J);if(!A(F,new y))throw g("assert",a,"chess",1673,"do_move_en_passant",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:F,start:51450,end:51470},right:{kind:"literal",value:new y,start:51474,end:51478},start:51443,end:51478,expression_start:51450});return new bZ(new UQ(W.white_king,W.black_king,(()=>{let U=W.other_figures,M=eZ(U,Q),z=eZ(M,K);return AZ(z,J,[new s,G])})()),Z.moving_player,new y,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,0,u9())}function rV(Z){let{board:Q,moving_player:J}=Z,W;if(J instanceof f)W=new h;else W=new u;let G=W,K=new B(new c,G),X=new B(new GZ,G),V=new B(new TZ,G),Y=new B(new RZ,G),H=l(Q,K),F=new C([new _Q,J]);if(!A(H,F))throw g("assert",a,"chess",1706,"do_move_short_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:H,start:52427,end:52454},right:{kind:"expression",value:F,start:52458,end:52486},start:52420,end:52486,expression_start:52427});let U=l(Q,X);if(!A(U,new y))throw g("assert",a,"chess",1708,"do_move_short_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:U,start:52523,end:52548},right:{kind:"literal",value:new y,start:52552,end:52556},start:52516,end:52556,expression_start:52523});let M=l(Q,V),z=new C([new qZ,J]);if(!A(M,z))throw g("assert",a,"chess",1709,"do_move_short_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:M,start:52589,end:52616},right:{kind:"expression",value:z,start:52620,end:52648},start:52582,end:52648,expression_start:52589});let D=l(Q,Y);if(!A(D,new y))throw g("assert",a,"chess",1711,"do_move_short_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:D,start:52685,end:52710},right:{kind:"literal",value:new y,start:52714,end:52718},start:52678,end:52718,expression_start:52685});if(J instanceof f)return new bZ(new UQ(X,Q.black_king,(()=>{let S=Q.other_figures,q=eZ(S,V);return AZ(q,Y,[new qZ,J])})()),Z.moving_player,new y,!0,!0,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,(()=>{let S=Z.threefold_repetition_counter;return _9(S,m9(Z))})());else return new bZ(new UQ(Q.white_king,X,(()=>{let S=Q.other_figures,q=eZ(S,V);return AZ(q,Y,[new qZ,J])})()),Z.moving_player,new y,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,!0,!0,Z.fifty_move_rule_counter,(()=>{let S=Z.threefold_repetition_counter;return _9(S,m9(Z))})())}function aV(Z){let{board:Q,moving_player:J}=Z,W;if(J instanceof f)W=new h;else W=new u;let G=W,K=new B(new c,G),X=new B(new WZ,G),V=new B(new ZZ,G),Y=new B(new MZ,G),H=new B(new OZ,G),F=l(Q,K),U=new C([new _Q,J]);if(!A(F,U))throw g("assert",a,"chess",1769,"do_move_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:F,start:54508,end:54535},right:{kind:"expression",value:U,start:54539,end:54567},start:54501,end:54567,expression_start:54508});let M=l(Q,X);if(!A(M,new y))throw g("assert",a,"chess",1771,"do_move_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:M,start:54604,end:54629},right:{kind:"literal",value:new y,start:54633,end:54637},start:54597,end:54637,expression_start:54604});let z=l(Q,V),D=new C([new qZ,J]);if(!A(z,D))throw g("assert",a,"chess",1772,"do_move_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:z,start:54670,end:54697},right:{kind:"expression",value:D,start:54701,end:54729},start:54663,end:54729,expression_start:54670});let S=l(Q,Y);if(!A(S,new y))throw g("assert",a,"chess",1774,"do_move_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:S,start:54766,end:54791},right:{kind:"literal",value:new y,start:54795,end:54799},start:54759,end:54799,expression_start:54766});let q=l(Q,H);if(!A(q,new y))throw g("assert",a,"chess",1775,"do_move_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:q,start:54832,end:54859},right:{kind:"literal",value:new y,start:54863,end:54867},start:54825,end:54867,expression_start:54832});if(J instanceof f)return new bZ(new UQ(X,Q.black_king,(()=>{let T=Q.other_figures,j=eZ(T,V);return AZ(j,Y,[new qZ,J])})()),Z.moving_player,new y,!0,!0,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,(()=>{let T=Z.threefold_repetition_counter;return _9(T,m9(Z))})());else return new bZ(new UQ(Q.white_king,X,(()=>{let T=Q.other_figures,j=eZ(T,V);return AZ(j,Y,[new qZ,J])})()),Z.moving_player,new y,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,!0,!0,Z.fifty_move_rule_counter,(()=>{let T=Z.threefold_repetition_counter;return _9(T,m9(Z))})())}function iJ(Z,Q){if(Q instanceof FQ){let{from:J,to:W}=Q;return sV(Z,J,W)}else if(Q instanceof MQ){let{from:J,to:W,new_figure:G}=Q;return nV(Z,J,W,G)}else if(Q instanceof LQ){let{from:J,to:W}=Q;return lV(Z,J,W)}else if(Q instanceof EQ)return rV(Z);else return aV(Z)}function tJ(Z){let Q;if(Z.moving_player instanceof f)Q=Z.board.white_king;else Q=Z.board.black_king;let W=Q,G=O9(Z.moving_player),K=Z.board.other_figures,X=q9(K),V=h9(X,(U)=>{return A(U[1][1],G)}),Y=LZ(V,(U)=>{return U[0]}),H=v9(Y,(U)=>{let M=F0(new bZ(Z.board,G,Z.en_passant_possible,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,Z.threefold_repetition_counter),U),z=a8(M,D9);return cJ(z,I([]))}),F=_J(H,(U)=>{if(U instanceof fZ){let M=U.to;return new x(M)}else if(U instanceof RQ){let M=U.to;return new x(M)}else if(U instanceof IQ)return new b(void 0);else if(U instanceof zQ)return new b(void 0);else return new b(void 0)});return VJ(F,(U)=>{return A(U,W)})}function F0(Z,Q){let J,W=l(Z.board,Q);return J=y9(W,new Z0),HQ(J,(K)=>{let X,V;return X=K[0],V=K[1],r(!A(V,Z.moving_player),new b(new Q0),()=>{let Y;if(X instanceof s)Y=uV(Z,Q);else if(X instanceof ZQ)Y=$V(Z.board,Q,Z.moving_player);else if(X instanceof mZ)Y=cV(Z.board,Q,Z.moving_player);else if(X instanceof qZ)Y=mV(Z.board,Q,Z.moving_player);else if(X instanceof QQ)Y=pV(Z.board,Q,Z.moving_player);else Y=iV(Z,Q);return new x(Y)})})}function iV(Z,Q){let J,W=I([[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]]),G=$Z(W),K=xZ(G,(E)=>{return new rJ(Q,E,Z.moving_player)}),X=xZ(K,(E)=>{return IJ(Z.board,E)}),V=W9(X,wZ(),G9);J=xZ(V,(E)=>{return new fZ(E)});let Y=J,H;if(tV(Z))H=new C(new zQ);else H=new y;let U=H,M;if(Q6(Z))M=new C(new ZW);else M=new y;let D=M,S,q=I([U,D]),T=iQ(q),j=$Z(T);return S=G9(j,Y),S}function tV(Z){if(Z.moving_player instanceof f)return r(Z.short_castle_disqualified_white,!1,()=>{let J=l(Z.board,new B(new c,new h)),W=new C([new _Q,new f]);if(!A(J,W))throw g("assert",a,"chess",1112,"can_short_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:J,start:33258,end:33304},right:{kind:"literal",value:W,start:33316,end:33336},start:33251,end:33336,expression_start:33258});let G=l(Z.board,new B(new TZ,new h)),K=new C([new qZ,new f]);if(!A(G,K))throw g("assert",a,"chess",1116,"can_short_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:33382,end:33428},right:{kind:"literal",value:K,start:33440,end:33460},start:33375,end:33460,expression_start:33382});return pJ(Z,I([new B(new RZ,new h),new B(new GZ,new h)]),I([new B(new c,new h),new B(new RZ,new h),new B(new GZ,new h)]))});else return r(Z.short_castle_disqualified_black,!1,()=>{let J=l(Z.board,new B(new c,new u)),W=new C([new _Q,new JZ]);if(!A(J,W))throw g("assert",a,"chess",1138,"can_short_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:J,start:34051,end:34097},right:{kind:"literal",value:W,start:34109,end:34129},start:34044,end:34129,expression_start:34051});let G=l(Z.board,new B(new TZ,new u)),K=new C([new qZ,new JZ]);if(!A(G,K))throw g("assert",a,"chess",1142,"can_short_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:34175,end:34221},right:{kind:"literal",value:K,start:34233,end:34253},start:34168,end:34253,expression_start:34175});return pJ(Z,I([new B(new RZ,new u),new B(new GZ,new u)]),I([new B(new c,new u),new B(new RZ,new u),new B(new GZ,new u)]))})}function pJ(Z,Q,J){let W;return W=XJ(Q,(X)=>{let V=l(Z.board,X);return DG(V)}),r(!W,!1,()=>{let X;if(Z.moving_player instanceof f)X=new B(new c,new h);else X=new B(new c,new u);let Y=X,H,U=LZ(J,(D)=>{return new FQ(Y,D)}),M=LZ(U,(D)=>{return iJ(Z,D)});return H=VJ(M,tJ),!H})}function oJ(Z){return tJ(Z.internal)}function oV(Z,Q){return HQ(F0(Z,Q),(J)=>{let G=nG(J,(K)=>{let X;if(K instanceof fZ){let U=K.to;X=new FQ(Q,U)}else if(K instanceof RQ){let U=K.to;X=new MQ(Q,U,new QQ)}else if(K instanceof IQ){let U=K.to;X=new LQ(Q,U)}else if(K instanceof zQ)X=new EQ;else X=new lJ;let H=iJ(Z,X),F=tJ(H);return MG(F)});return new x(G)})}function eJ(Z){let Q;if(Z.moving_player instanceof f)Q=Z.board.white_king;else Q=Z.board.black_king;let W=Q,G,K=Z.board.other_figures,X=q9(K),V=_J(X,(D)=>{let S,q;if(S=D[0],q=D[1][1],A(q,Z.moving_player))return new x(S);else return new b(void 0)});G=Z9(V,I([W]));let Y=G,H,U=LZ(Y,(D)=>{let S,q=oV(Z,D);return S=J9(q,()=>{throw g("panic",a,"chess",854,"find_all_moves_internal",i,{})}),[D,S]}),M=h9(U,(D)=>{let S;return S=D[1],!sG(S)});return H=tQ(M),H}function M0(){let Z=new bZ(fV(),new f,new y,!1,!1,!1,!1,0,u9());return new dJ(Z,I([]),new j9(new f),Z,eJ(Z))}function eV(Z){let Q=O9(Z.moving_player),J=new bZ(Z.board,Q,Z.en_passant_possible,Z.short_castle_disqualified_white,Z.long_castle_disqualified_white,Z.short_castle_disqualified_black,Z.long_castle_disqualified_black,Z.fifty_move_rule_counter,Z.threefold_repetition_counter),W,G=eJ(J);W=n8(G);let K=W,X=tJ(J);if(K)if(X)return new C(new sJ(Z.moving_player,new nJ));else return new C(new RJ(new iG));else return new y}function R0(Z){let Q;if(hV(Z.board))Q=new C(new RJ(new tG));else Q=new y;return WJ(Q,()=>{let G=eV(Z);return WJ(G,()=>{let K;if(dV(Z))K=new C(new RJ(new oG));else K=new y;return WJ(K,()=>{let Y;if(bV(Z))Y=new C(new RJ(new eG));else Y=new y;return WJ(Y,()=>{return new y})})})})}function I0(Z,Q){return r(Q<0,new b(new X0(Q)),()=>{let J=wG(Z.history);return r(Q>J,new b(new V0(Q,J)),()=>{return r(Q===J,new x(Z),()=>{let W,G=Z.history;W=yG(G,Q);let K=W,X;X=EZ(K,Z.starting_position,(M,z)=>{let D,S;D=z[0],S=z[1];let q=M.moving_player;if(!A(q,S))throw g("assert",a,"chess",584,"get_past_position",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:q,start:17766,end:17784},right:{kind:"expression",value:S,start:17788,end:17801},start:17759,end:17801,expression_start:17766});let T=iJ(M,D);return new bZ(T.board,O9(T.moving_player),T.en_passant_possible,T.short_castle_disqualified_white,T.long_castle_disqualified_white,T.short_castle_disqualified_black,T.long_castle_disqualified_black,T.fifty_move_rule_counter,T.threefold_repetition_counter)});let Y=X,H,F=R0(Y);if(F instanceof C){let M=F[0];H=new JQ(M)}else H=new j9(Y.moving_player);return new x(new dJ(Y,K,H,Z.starting_position,eJ(Y)))})})})}function Z6(Z,Q,J){{let W;{let K;if(J instanceof FQ){let{from:F,to:U}=J;K=[F,new fZ(U)]}else if(J instanceof MQ){let{from:F,to:U}=J;K=[F,new RQ(U)]}else if(J instanceof LQ){let{from:F,to:U}=J;K=[F,new IQ(U)]}else if(J instanceof EQ){let F;if(Z.moving_player instanceof f)F=new B(new c,new h);else F=new B(new c,new u);K=[F,new zQ]}else{let F;if(Z.moving_player instanceof f)F=new B(new c,new h);else F=new B(new c,new u);K=[F,new ZW]}let X=K,V,Y;V=X[0],Y=X[1];let H=(()=>{return XZ(Q,V)})();if(H instanceof x){let F=H[0];W=FJ(F,Y)}else W=!1}return r(!W,new b(new W0),()=>{let K=iJ(Z,J),X,V=R0(K);if(V instanceof C){let F=V[0];X=new JQ(F)}else X=new j9(O9(K.moving_player));let Y=X,H=new bZ(K.board,O9(K.moving_player),K.en_passant_possible,K.short_castle_disqualified_white,K.long_castle_disqualified_white,K.short_castle_disqualified_black,K.long_castle_disqualified_black,K.fifty_move_rule_counter,K.threefold_repetition_counter);return new x([H,Y])})}}function z0(Z,Q){let J=Z.status;if(J instanceof JQ)return new b(new J0);else{let W=J.next_player,G=Z.internal.moving_player;if(!A(G,W))throw g("assert",a,"chess",418,"player_move",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:12247,end:12274},right:{kind:"expression",value:W,start:12278,end:12291},start:12240,end:12291,expression_start:12247});return HQ(Z6(Z.internal,Z.all_moves,Q),(K)=>{let X,V;return X=K[0],V=K[1],new x(new dJ(X,(()=>{let Y=Z.history;return Z9(Y,I([[Q,W]]))})(),V,Z.starting_position,eJ(X)))})}}function Q6(Z){if(Z.moving_player instanceof f)return r(Z.long_castle_disqualified_white,!1,()=>{let J=l(Z.board,new B(new c,new h)),W=new C([new _Q,new f]);if(!A(J,W))throw g("assert",a,"chess",1170,"can_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:J,start:34994,end:35040},right:{kind:"literal",value:W,start:35052,end:35072},start:34987,end:35072,expression_start:34994});let G=l(Z.board,new B(new ZZ,new h)),K=new C([new qZ,new f]);if(!A(G,K))throw g("assert",a,"chess",1174,"can_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:35118,end:35164},right:{kind:"literal",value:K,start:35176,end:35196},start:35111,end:35196,expression_start:35118});return pJ(Z,I([new B(new MZ,new h),new B(new WZ,new h),new B(new OZ,new h)]),I([new B(new c,new h),new B(new MZ,new h),new B(new WZ,new h)]))});else return r(Z.long_castle_disqualified_black,!1,()=>{let J=l(Z.board,new B(new c,new u)),W=new C([new _Q,new JZ]);if(!A(J,W))throw g("assert",a,"chess",1200,"can_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:J,start:35852,end:35898},right:{kind:"literal",value:W,start:35910,end:35930},start:35845,end:35930,expression_start:35852});let G=l(Z.board,new B(new ZZ,new u)),K=new C([new qZ,new JZ]);if(!A(G,K))throw g("assert",a,"chess",1204,"can_long_castle",i,{kind:"binary_operator",operator:"==",left:{kind:"expression",value:G,start:35976,end:36022},right:{kind:"literal",value:K,start:36034,end:36054},start:35969,end:36054,expression_start:35976});return pJ(Z,I([new B(new MZ,new u),new B(new WZ,new u),new B(new OZ,new u)]),I([new B(new c,new u),new B(new MZ,new u),new B(new WZ,new u)]))})}function jZ(Z){return Z}var GQ=()=>globalThis?.document,Q8="http://www.w3.org/1999/xhtml",J8=1,GW=3;var O0=!!globalThis.HTMLElement?.prototype?.moveBefore;var _=I([]),W8=new y;var H6=new vQ,U6=new YZ,F6=new HZ;function G8(Z,Q){if(Z.name===Q.name)return F6;else if(Z.name<Q.name)return U6;else return H6}class wQ extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class K8 extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class hZ extends R{constructor(Z,Q,J,W,G,K,X,V,Y){super();this.kind=Z,this.name=Q,this.handler=J,this.include=W,this.prevent_default=G,this.stop_propagation=K,this.immediate=X,this.debounce=V,this.throttle=Y}}class NJ extends R{constructor(Z,Q,J){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=J}}class T0 extends R{constructor(Z){super();this.kind=Z}}class S0 extends R{constructor(Z){super();this.kind=Z}}function q6(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else{let G=J.head;if(G instanceof wQ){let K=G.name;if(K==="")Z=J.tail,Q=W;else if(K==="class"){let X=G.value;if(X==="")Z=J.tail,Q=W;else{let V=J.tail;if(V instanceof P){let Y=G;Z=V,Q=O(Y,W)}else{let Y=V.head;if(Y instanceof wQ)if(Y.name==="class"){let F=G.kind,U=X,M=V.tail,z=Y.value,D=U+" "+z,S=new wQ(F,"class",D);Z=O(S,M),Q=W}else{let F=G;Z=V,Q=O(F,W)}else{let H=G;Z=V,Q=O(H,W)}}}}else if(K==="style"){let X=G.value;if(X==="")Z=J.tail,Q=W;else{let V=J.tail;if(V instanceof P){let Y=G;Z=V,Q=O(Y,W)}else{let Y=V.head;if(Y instanceof wQ)if(Y.name==="style"){let F=G.kind,U=X,M=V.tail,z=Y.value,D=U+";"+z,S=new wQ(F,"style",D);Z=O(S,M),Q=W}else{let F=G;Z=V,Q=O(F,W)}else{let H=G;Z=V,Q=O(H,W)}}}}else{let X=G;Z=J.tail,Q=O(X,W)}}else{let K=G;Z=J.tail,Q=O(K,W)}}}}function C0(Z){if(Z instanceof P)return Z;else if(Z.tail instanceof P)return Z;else{let W=fG(Z,(G,K)=>{return G8(K,G)});return q6(W,_)}}var VW=0;function L0(Z,Q){return new wQ(VW,Z,Q)}var E0=1;var YW=2;function w0(Z,Q,J,W,G,K,X,V){return new hZ(YW,Z,Q,J,W,G,K,X,V)}var HW=0;var UW=new T0(HW);var X8=2,x0=new S0(X8);function mQ(Z,Q){return L0(Z,Q)}function PZ(Z){return mQ("class",Z)}function k0(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof P)return W;else if(J.head[1]){let K=J.tail,X=J.head[0];return W+X+" "+k0(K,W)}else Z=J.tail,Q=W}}function xQ(Z){return PZ(k0(Z,""))}function V8(Z){return mQ("draggable",(()=>{if(Z)return"true";else return"false"})())}function Y8(Z){return mQ("href",Z)}function H8(Z){return mQ("target",Z)}function U8(Z){return mQ("alt",Z)}function F8(Z){return mQ("src",Z)}class R8 extends R{constructor(Z,Q,J){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=J}}class y0 extends R{constructor(Z,Q,J,W,G){super();this.dispatch=Z,this.emit=Q,this.select=J,this.root=W,this.provide=G}}function b0(Z,Q,J,W,G,K){let X=new y0(Q,J,W,G,K);return hG(Z.synchronous,(V)=>{return V(X)})}var M8=new R8(I([]),I([]),I([]));function qJ(){return M8}function f0(Z){return new R8(I([(J)=>{let W=J.dispatch;return Z(W)}]),M8.before_paint,M8.after_paint)}function h0(Z){return EZ(Z,M8,(Q,J)=>{return new R8(EZ(J.synchronous,Q.synchronous,$J),EZ(J.before_paint,Q.before_paint,$J),EZ(J.after_paint,Q.after_paint,$J))})}function nZ(){return null}function DJ(Z,Q){let J=Z?.get(Q);if(J!=null)return new x(J);else return new b(void 0)}function OJ(Z,Q){return Z&&Z.has(Q)}function B9(Z,Q,J){return Z??=new Map,Z.set(Q,J),Z}function FW(Z,Q){return Z?.delete(Q),Z}class MW extends R{}class RW extends R{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class v0 extends R{constructor(Z,Q){super();this.index=Z,this.parent=Q}}function B6(Z,Q){while(!0){let J=Z,W=Q;if(W instanceof P)return!1;else{let{head:G,tail:K}=W,X=l8(J,G);if(X)return X;else Z=J,Q=K}}}function qQ(Z,Q,J){if(J==="")return new v0(Q,Z);else return new RW(J,Z)}var I8=new MW,BJ="\t";function g0(Z,Q){while(!0){let J=Z,W=Q;if(J instanceof MW)if(W instanceof P)return"";else{let G=W.tail;return gG(G)}else if(J instanceof RW){let G=J.key;Z=J.parent,Q=O(BJ,O(G,W))}else{let G=J.index;Z=J.parent,Q=O(BJ,O(gQ(G),W))}}}function A6(Z){return g0(Z,I([]))}function u0(Z,Q){if(Q instanceof P)return!1;else return B6(A6(Z),Q)}var IW=`
`;function zW(Z,Q){return g0(Z,I([IW,Q]))}class DQ extends R{constructor(Z,Q,J,W,G){super();this.kind=Z,this.key=Q,this.mapper=J,this.children=W,this.keyed_children=G}}class OQ extends R{constructor(Z,Q,J,W,G,K,X,V,Y,H){super();this.kind=Z,this.key=Q,this.mapper=J,this.namespace=W,this.tag=G,this.attributes=K,this.children=X,this.keyed_children=V,this.self_closing=Y,this.void=H}}class jQ extends R{constructor(Z,Q,J,W){super();this.kind=Z,this.key=Q,this.mapper=J,this.content=W}}class s9 extends R{constructor(Z,Q,J,W,G,K,X){super();this.kind=Z,this.key=Q,this.mapper=J,this.namespace=W,this.tag=G,this.attributes=K,this.inner_html=X}}function S6(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function $0(Z,Q){if(Q instanceof DQ)return new DQ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof OQ)return new OQ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof jQ)return new jQ(Q.kind,Z,Q.mapper,Q.content);else return new s9(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}var BQ=0;function NW(Z,Q,J,W){return new DQ(BQ,Z,Q,J,W)}var A9=1;function AJ(Z,Q,J,W,G,K,X,V,Y){return new OQ(A9,Z,Q,J,W,C0(G),K,X,V,Y||S6(W,J))}var n9=2;function qW(Z,Q,J){return new jQ(n9,Z,Q,J)}var m0=3;var DW=(Z,Q)=>Z===Q,T9=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let J=typeof Z;if(J!==typeof Q)return!1;if(J!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return C6(Z,Q);return L6(Z,Q)},C6=(Z,Q)=>{let J=Z.length;if(J!==Q.length)return!1;while(J--)if(!T9(Z[J],Q[J]))return!1;return!0},L6=(Z,Q)=>{let J=Object.keys(Z),W=J.length;if(Object.keys(Q).length!==W)return!1;while(W--){let G=J[W];if(!Object.hasOwn(Q,G))return!1;if(!T9(Z[G],Q[G]))return!1}return!0};class pQ extends R{constructor(Z,Q,J){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=J}}function jW(){return new pQ(nZ(),_,_)}function s0(Z){return new pQ(Z.handlers,Z.next_dispatched_paths,_)}function n0(Z,Q,J){return FW(Z,zW(Q,J))}function PJ(Z,Q,J){let W=n0(Z.handlers,Q,J);return new pQ(W,Z.dispatched_paths,Z.next_dispatched_paths)}function c0(Z,Q,J){return EZ(J,Z,(W,G)=>{if(G instanceof hZ){let K=G.name;return n0(W,Q,K)}else return W})}function TJ(Z,Q,J,W){let G=O(Q,Z.next_dispatched_paths),K=new pQ(Z.handlers,Z.dispatched_paths,G),X=DJ(K.handlers,Q+IW+J);if(X instanceof x){let V=X[0];return[K,N9(W,V)]}else return[K,new b(I([]))]}function z8(Z,Q){return u0(Q,Z.dispatched_paths)}function l0(Z,Q,J,W,G){return B9(Z,zW(J,W),mJ(G,(K)=>{return new NJ(K.prevent_default,K.stop_propagation,jZ(Q)(K.message))}))}function SJ(Z,Q,J,W,G){let K=l0(Z.handlers,Q,J,W,G);return new pQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function p0(Z,Q,J,W){return EZ(W,Z,(G,K)=>{if(K instanceof hZ){let{name:X,handler:V}=K;return l0(G,Q,J,X,V)}else return G})}function X9(Z,Q){let J=DW(Z,jZ);if(DW(Q,jZ))return Z;else if(J)return Q;else return(G)=>{return Z(Q(G))}}function d0(Z,Q,J,W){while(!0){let G=Z,K=Q,X=J,V=W;if(V instanceof P)return G;else{let{head:Y,tail:H}=V;Z=r0(G,K,X,Y),Q=K,J=X+1,W=H}}}function r0(Z,Q,J,W){if(W instanceof DQ){let G=W.children,K=qQ(Q,J,W.key);return d0(Z,K,0,G)}else if(W instanceof OQ){let{attributes:G,children:K}=W,X=qQ(Q,J,W.key),Y=c0(Z,X,G);return d0(Y,X,0,K)}else if(W instanceof jQ)return Z;else{let G=W.attributes,K=qQ(Q,J,W.key);return c0(Z,K,G)}}function dQ(Z,Q,J,W){let G=r0(Z.handlers,Q,J,W);return new pQ(G,Z.dispatched_paths,Z.next_dispatched_paths)}function OW(Z,Q,J,W,G){while(!0){let K=Z,X=Q,V=J,Y=W,H=G;if(H instanceof P)return K;else{let{head:F,tail:U}=H;Z=a0(K,X,V,Y,F),Q=X,J=V,W=Y+1,G=U}}}function a0(Z,Q,J,W,G){if(G instanceof DQ){let K=G.children,X=qQ(J,W,G.key),V=X9(Q,G.mapper);return OW(Z,V,X,0,K)}else if(G instanceof OQ){let{attributes:K,children:X}=G,V=qQ(J,W,G.key),Y=X9(Q,G.mapper),F=p0(Z,Y,V,K);return OW(F,Y,V,0,X)}else if(G instanceof jQ)return Z;else{let K=G.attributes,X=qQ(J,W,G.key),V=X9(Q,G.mapper);return p0(Z,V,X,K)}}function sQ(Z,Q,J,W,G){let K=a0(Z.handlers,Q,J,W,G);return new pQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function i0(Z){return sQ(jW(),jZ,I8,0,Z)}function t0(Z,Q,J,W,G){let K=OW(Z.handlers,Q,J,W,G);return new pQ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function kQ(Z,Q,J){return AJ("",jZ,"",Z,Q,J,nZ(),!1,!1)}function N8(Z){return qW("",jZ,Z)}function o0(){return qW("",jZ,"")}function lZ(Z){return N8(Z)}function e0(Z,Q){return kQ("body",Z,Q)}function ZK(Z,Q){return kQ("aside",Z,Q)}function QK(Z,Q){return kQ("main",Z,Q)}function Y9(Z,Q){return kQ("div",Z,Q)}function H9(Z,Q){return kQ("p",Z,Q)}function q8(Z,Q){return kQ("a",Z,Q)}function D8(Z){return kQ("img",Z,_)}function JK(Z,Q){return kQ("button",Z,Q)}class LJ extends R{constructor(Z,Q,J,W){super();this.index=Z,this.removed=Q,this.changes=J,this.children=W}}class WK extends R{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class GK extends R{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class KK extends R{constructor(Z,Q,J){super();this.kind=Z,this.added=Q,this.removed=J}}class XK extends R{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.before=J}}class VK extends R{constructor(Z,Q,J){super();this.kind=Z,this.index=Q,this.with=J}}class YK extends R{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class HK extends R{constructor(Z,Q,J){super();this.kind=Z,this.children=Q,this.before=J}}function BW(Z,Q,J,W){return new LJ(Z,Q,J,W)}var AW=0;function UK(Z){return new WK(AW,Z)}var PW=1;function FK(Z){return new GK(PW,Z)}var TW=2;function SW(Z,Q){return new KK(TW,Z,Q)}var CW=3;function MK(Z,Q){return new XK(CW,Z,Q)}var LW=4;function RK(Z){return new YK(LW,Z)}var EW=5;function S9(Z,Q){return new VK(EW,Z,Q)}var wW=6;function xW(Z,Q){return new HK(wW,Z,Q)}class zK extends R{constructor(Z,Q,J,W,G,K,X,V){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=J,this.observed_attributes=W,this.observed_properties=G,this.requested_contexts=K,this.provided_contexts=X,this.vdom=V}}class NK extends R{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class qK extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.data=J}}class DK extends R{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.value=J}}class O8 extends R{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class j8 extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class B8 extends R{constructor(Z,Q,J){super();this.kind=Z,this.name=Q,this.value=J}}class A8 extends R{constructor(Z,Q,J,W){super();this.kind=Z,this.path=Q,this.name=J,this.event=W}}class kW extends R{constructor(Z,Q,J){super();this.kind=Z,this.key=Q,this.value=J}}var y6=0;function OK(Z,Q,J,W,G,K,X){return new zK(y6,Z,Q,J,W,G,K,X)}var b6=1;function yW(Z){return new NK(b6,Z)}var f6=2;function jK(Z,Q){return new qK(f6,Z,Q)}var h6=3;function BK(Z,Q){return new DK(h6,Z,Q)}class P8 extends R{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class TK extends R{constructor(Z,Q,J){super();this.added=Z,this.removed=Q,this.events=J}}function v6(Z,Q,J,W){if(J==="input"&&Q==="")return z8(Z,W);else if(J==="select"&&Q==="")return z8(Z,W);else if(J==="textarea"&&Q==="")return z8(Z,W);else return!1}function PK(Z,Q,J,W,G,K,X,V){while(!0){let Y=Z,H=Q,F=J,U=W,M=G,z=K,D=X,S=V;if(z instanceof P)if(M instanceof P)return new TK(D,S,U);else{let q=M.head;if(q instanceof hZ){let T=q,j=M.tail,L=q.name,E=O(T,S),N=PJ(U,H,L);Z=Y,Q=H,J=F,W=N,G=j,K=z,X=D,V=E}else{let T=q,j=M.tail,L=O(T,S);Z=Y,Q=H,J=F,W=U,G=j,K=z,X=D,V=L}}else if(M instanceof P){let q=z.head;if(q instanceof hZ){let T=q,j=z.tail,L=q.name,E=q.handler,N=O(T,D),k=SJ(U,F,H,L,E);Z=Y,Q=H,J=F,W=k,G=M,K=j,X=N,V=S}else{let T=q,j=z.tail,L=O(T,D);Z=Y,Q=H,J=F,W=U,G=M,K=j,X=L,V=S}}else{let{head:q,tail:T}=z,j=M.head,L=M.tail,E=G8(j,q);if(E instanceof YZ)if(j instanceof hZ){let N=j.name,k=O(j,S),w=PJ(U,H,N);Z=Y,Q=H,J=F,W=w,G=L,K=z,X=D,V=k}else{let N=O(j,S);Z=Y,Q=H,J=F,W=U,G=L,K=z,X=D,V=N}else if(E instanceof HZ)if(q instanceof wQ)if(j instanceof wQ){let N,k=q.name;if(k==="value")N=Y||j.value!==q.value;else if(k==="checked")N=Y||j.value!==q.value;else if(k==="selected")N=Y||j.value!==q.value;else N=j.value!==q.value;let w=N,v;if(w)v=O(q,D);else v=D;let m=v;Z=Y,Q=H,J=F,W=U,G=L,K=T,X=m,V=S}else if(j instanceof hZ){let N=j.name,k=O(q,D),w=O(j,S),v=PJ(U,H,N);Z=Y,Q=H,J=F,W=v,G=L,K=T,X=k,V=w}else{let N=O(q,D),k=O(j,S);Z=Y,Q=H,J=F,W=U,G=L,K=T,X=N,V=k}else if(q instanceof K8)if(j instanceof K8){let N,k=q.name;if(k==="scrollLeft")N=!0;else if(k==="scrollRight")N=!0;else if(k==="value")N=Y||!T9(j.value,q.value);else if(k==="checked")N=Y||!T9(j.value,q.value);else if(k==="selected")N=Y||!T9(j.value,q.value);else N=!T9(j.value,q.value);let w=N,v;if(w)v=O(q,D);else v=D;let m=v;Z=Y,Q=H,J=F,W=U,G=L,K=T,X=m,V=S}else if(j instanceof hZ){let N=j.name,k=O(q,D),w=O(j,S),v=PJ(U,H,N);Z=Y,Q=H,J=F,W=v,G=L,K=T,X=k,V=w}else{let N=O(q,D),k=O(j,S);Z=Y,Q=H,J=F,W=U,G=L,K=T,X=N,V=k}else if(j instanceof hZ){let{name:N,handler:k}=q,w=j.prevent_default.kind!==q.prevent_default.kind||j.stop_propagation.kind!==q.stop_propagation.kind||j.immediate!==q.immediate||j.debounce!==q.debounce||j.throttle!==q.throttle,v;if(w)v=O(q,D);else v=D;let m=v,p=SJ(U,F,H,N,k);Z=Y,Q=H,J=F,W=p,G=L,K=T,X=m,V=S}else{let{name:N,handler:k}=q,w=O(q,D),v=O(j,S),m=SJ(U,F,H,N,k);Z=Y,Q=H,J=F,W=m,G=L,K=T,X=w,V=v}else if(q instanceof hZ){let{name:N,handler:k}=q,w=O(q,D),v=SJ(U,F,H,N,k);Z=Y,Q=H,J=F,W=v,G=M,K=T,X=w,V=S}else{let N=O(q,D);Z=Y,Q=H,J=F,W=U,G=M,K=T,X=N,V=S}}}}function bW(Z,Q,J,W,G,K,X,V,Y,H,F,U,M,z){while(!0){let D=Z,S=Q,q=J,T=W,j=G,L=K,E=X,N=V,k=Y,w=H,v=F,m=U,p=M,IZ=z;if(q instanceof P)if(D instanceof P)return new P8(new LJ(k,E,v,m),IZ);else{let{head:_Z,tail:yQ}=D,zZ;if(_Z.key===""||!OJ(j,_Z.key))zZ=E+1;else zZ=E;let $=zZ,KZ=dQ(IZ,w,N,_Z);Z=yQ,Q=S,J=q,W=T,G=j,K=L,X=$,V=N,Y=k,H=w,F=v,U=m,M=p,z=KZ}else if(D instanceof P){let _Z=t0(IZ,p,w,N,q),yQ=xW(q,N-L),zZ=O(yQ,v);return new P8(new LJ(k,E,zZ,m),_Z)}else{let _Z=q.head,yQ=D.head;if(yQ.key!==_Z.key){let zZ=q.tail,VZ=D.tail,$=DJ(S,_Z.key),KZ=OJ(T,yQ.key);if($ instanceof x)if(KZ){let n=$[0];if(OJ(j,yQ.key))Z=VZ,Q=S,J=q,W=T,G=j,K=L-1,X=E,V=N,Y=k,H=w,F=v,U=m,M=p,z=IZ;else{let QZ=N-L,d=O(MK(_Z.key,QZ),v),NZ=B9(j,_Z.key,void 0),o=L+1;Z=O(n,D),Q=S,J=q,W=T,G=NZ,K=o,X=E,V=N,Y=k,H=w,F=d,U=m,M=p,z=IZ}}else{let n=N-L,t=O(RK(n),v),QZ=dQ(IZ,w,N,yQ),d=L-1;Z=VZ,Q=S,J=q,W=T,G=j,K=d,X=E,V=N,Y=k,H=w,F=t,U=m,M=p,z=QZ}else if(KZ){let n=N-L,t=sQ(IZ,p,w,N,_Z),QZ=xW(I([_Z]),n),d=O(QZ,v);Z=D,Q=S,J=zZ,W=T,G=j,K=L+1,X=E,V=N+1,Y=k,H=w,F=d,U=m,M=p,z=t}else{let n=S9(N-L,_Z),t,d=dQ(IZ,w,N,yQ);t=sQ(d,p,w,N,_Z);let NZ=t;Z=VZ,Q=S,J=zZ,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=O(n,v),U=m,M=p,z=NZ}}else{let zZ=D.head;if(zZ instanceof DQ){let VZ=q.head;if(VZ instanceof DQ){let $=VZ,KZ=q.tail,n=zZ,t=D.tail,QZ=X9(p,$.mapper),d=qQ(w,N,$.key),NZ=bW(n.children,n.keyed_children,$.children,$.keyed_children,nZ(),0,0,0,N,d,_,_,QZ,IZ),o,DZ=NZ.patch;if(DZ.children instanceof P)if(DZ.changes instanceof P)if(DZ.removed===0)o=m;else o=O(NZ.patch,m);else o=O(NZ.patch,m);else o=O(NZ.patch,m);let AQ=o;Z=t,Q=S,J=KZ,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=v,U=AQ,M=p,z=NZ.events}else{let $=VZ,KZ=q.tail,n=zZ,t=D.tail,QZ=S9(N-L,$),d,o=dQ(IZ,w,N,n);d=sQ(o,p,w,N,$);let DZ=d;Z=t,Q=S,J=KZ,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=O(QZ,v),U=m,M=p,z=DZ}}else if(zZ instanceof OQ){let VZ=q.head;if(VZ instanceof OQ){let $=VZ,KZ=zZ;if(KZ.namespace===$.namespace&&KZ.tag===$.tag){let n=q.tail,t=D.tail,QZ=X9(p,$.mapper),d=qQ(w,N,$.key),NZ=v6(IZ,$.namespace,$.tag,d),o=PK(NZ,d,QZ,IZ,KZ.attributes,$.attributes,_,_),DZ,bQ,AQ;DZ=o.added,bQ=o.removed,AQ=o.events;let R9;if(bQ instanceof P&&DZ instanceof P)R9=_;else R9=I([SW(DZ,bQ)]);let x9=R9,k9=bW(KZ.children,KZ.keyed_children,$.children,$.keyed_children,nZ(),0,0,0,N,d,x9,_,QZ,AQ),aQ,I9=k9.patch;if(I9.children instanceof P)if(I9.changes instanceof P)if(I9.removed===0)aQ=m;else aQ=O(k9.patch,m);else aQ=O(k9.patch,m);else aQ=O(k9.patch,m);let jX=aQ;Z=t,Q=S,J=n,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=v,U=jX,M=p,z=k9.events}else{let n=VZ,t=q.tail,QZ=zZ,d=D.tail,NZ=S9(N-L,n),o,bQ=dQ(IZ,w,N,QZ);o=sQ(bQ,p,w,N,n);let AQ=o;Z=d,Q=S,J=t,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=O(NZ,v),U=m,M=p,z=AQ}}else{let $=VZ,KZ=q.tail,n=zZ,t=D.tail,QZ=S9(N-L,$),d,o=dQ(IZ,w,N,n);d=sQ(o,p,w,N,$);let DZ=d;Z=t,Q=S,J=KZ,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=O(QZ,v),U=m,M=p,z=DZ}}else if(zZ instanceof jQ){let VZ=q.head;if(VZ instanceof jQ){let $=VZ;if(zZ.content===$.content){let n=q.tail;Z=D.tail,Q=S,J=n,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=v,U=m,M=p,z=IZ}else{let n=VZ,t=q.tail,QZ=D.tail,d=BW(N,0,I([UK(n.content)]),_);Z=QZ,Q=S,J=t,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=v,U=O(d,m),M=p,z=IZ}}else{let $=VZ,KZ=q.tail,n=zZ,t=D.tail,QZ=S9(N-L,$),d,o=dQ(IZ,w,N,n);d=sQ(o,p,w,N,$);let DZ=d;Z=t,Q=S,J=KZ,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=O(QZ,v),U=m,M=p,z=DZ}}else{let VZ=q.head;if(VZ instanceof s9){let $=VZ,KZ=q.tail,n=zZ,t=D.tail,QZ=X9(p,$.mapper),d=qQ(w,N,$.key),NZ=PK(!1,d,QZ,IZ,n.attributes,$.attributes,_,_),o,DZ,bQ;o=NZ.added,DZ=NZ.removed,bQ=NZ.events;let AQ;if(DZ instanceof P&&o instanceof P)AQ=_;else AQ=I([SW(o,DZ)]);let R9=AQ,x9;if(n.inner_html===$.inner_html)x9=R9;else x9=O(FK($.inner_html),R9);let aQ=x9,I9;if(aQ instanceof P)I9=m;else I9=O(BW(N,0,aQ,I([])),m);let FG=I9;Z=t,Q=S,J=KZ,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=v,U=FG,M=p,z=bQ}else{let $=VZ,KZ=q.tail,n=zZ,t=D.tail,QZ=S9(N-L,$),d,o=dQ(IZ,w,N,n);d=sQ(o,p,w,N,$);let DZ=d;Z=t,Q=S,J=KZ,W=T,G=j,K=L,X=E,V=N+1,Y=k,H=w,F=O(QZ,v),U=m,M=p,z=DZ}}}}}}function r9(Z,Q,J){return bW(I([Q]),nZ(),I([J]),nZ(),nZ(),0,0,0,0,I8,_,_,jZ,s0(Z))}var{setTimeout:g6,clearTimeout:fW}=globalThis,u6=(Z,Q)=>GQ().createElementNS(Z,Q),_6=(Z)=>GQ().createTextNode(Z),$6=()=>GQ().createDocumentFragment(),a9=(Z,Q,J)=>Z.insertBefore(Q,J),CK=O0?(Z,Q,J)=>Z.moveBefore(Q,J):a9,m6=(Z,Q)=>Z.removeChild(Q),c6=(Z,Q)=>Z.getAttribute(Q),LK=(Z,Q,J)=>Z.setAttribute(Q,J),p6=(Z,Q)=>Z.removeAttribute(Q),d6=(Z,Q,J,W)=>Z.addEventListener(Q,J,W),EK=(Z,Q,J)=>Z.removeEventListener(Q,J),s6=(Z,Q)=>Z.innerHTML=Q,n6=(Z,Q)=>Z.data=Q,nQ=Symbol("lustre");class kK{constructor(Z,Q,J,W){this.kind=Z,this.key=W,this.parent=Q,this.children=[],this.node=J,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===BQ?this.node.parentNode:this.node}}var lQ=(Z,Q,J,W,G)=>{let K=new kK(Z,Q,J,G);return J[nQ]=K,Q?.children.splice(W,0,K),K},l6=(Z)=>{let Q="";for(let J=Z[nQ];J.parent;J=J.parent)if(J.key)Q=`${BJ}${J.key}${Q}`;else{let W=J.parent.children.indexOf(J);Q=`${BJ}${W}${Q}`}return Q.slice(1)};class vW{#Z=null;#G=()=>{};#W=!1;#J=!1;constructor(Z,Q,{useServerEvents:J=!1,exposeKeys:W=!1}={}){this.#Z=Z,this.#G=Q,this.#W=J,this.#J=W}mount(Z){lQ(A9,null,this.#Z,0,null),this.#D(this.#Z,null,this.#Z[nQ],0,Z)}push(Z){this.#Q.push({node:this.#Z[nQ],patch:Z}),this.#K()}#Q=[];#K(){let Z=this.#Q;while(Z.length){let{node:Q,patch:J}=Z.pop(),{children:W}=Q,{changes:G,removed:K,children:X}=J;if(C9(G,(V)=>this.#V(Q,V)),K)this.#I(Q,W.length-K,K);C9(X,(V)=>{let Y=W[V.index|0];this.#Q.push({node:Y,patch:V})})}}#V(Z,Q){switch(Q.kind){case AW:this.#P(Z,Q);break;case PW:this.#O(Z,Q);break;case TW:this.#z(Z,Q);break;case CW:this.#U(Z,Q);break;case LW:this.#M(Z,Q);break;case EW:this.#F(Z,Q);break;case wW:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:J}){let W=$6(),G=this.#H(Z,J);this.#q(W,null,Z,J|0,Q),a9(Z.parentNode,W,G)}#F(Z,{index:Q,with:J}){this.#I(Z,Q|0,1);let W=this.#H(Z,Q);this.#D(Z.parentNode,W,Z,Q|0,J)}#H(Z,Q){Q=Q|0;let{children:J}=Z,W=J.length;if(Q<W)return J[Q].node;let G=J[W-1];if(!G&&Z.kind!==BQ)return null;if(!G)G=Z;while(G.kind===BQ&&G.children.length)G=G.children[G.children.length-1];return G.node.nextSibling}#U(Z,{key:Q,before:J}){J=J|0;let{children:W,parentNode:G}=Z,K=W[J].node,X=W[J];for(let F=J+1;F<W.length;++F){let U=W[F];if(W[F]=X,X=U,U.key===Q){W[J]=U;break}}let{kind:V,node:Y,children:H}=X;if(CK(G,Y,K),V===BQ)this.#X(G,H,K)}#X(Z,Q,J){for(let W=0;W<Q.length;++W){let{kind:G,node:K,children:X}=Q[W];if(CK(Z,K,J),G===BQ)this.#X(Z,X,J)}}#M(Z,{index:Q}){this.#I(Z,Q,1)}#I(Z,Q,J){let{children:W,parentNode:G}=Z,K=W.splice(Q,J);for(let X=0;X<K.length;++X){let{kind:V,node:Y,children:H}=K[X];if(m6(G,Y),this.#R(K[X]),V===BQ)K.push(...H)}}#R(Z){let{debouncers:Q,children:J}=Z;for(let{timeout:W}of Q.values())if(W)fW(W);Q.clear(),C9(J,(W)=>this.#R(W))}#z({node:Z,handlers:Q,throttles:J,debouncers:W},{added:G,removed:K}){C9(K,({name:X})=>{if(Q.delete(X))EK(Z,X,hW),this.#N(J,X,0),this.#N(W,X,0);else p6(Z,X),xK[X]?.removed?.(Z,X)}),C9(G,(X)=>this.#A(Z,X))}#P({node:Z},{content:Q}){n6(Z,Q??"")}#O({node:Z},{inner_html:Q}){s6(Z,Q??"")}#q(Z,Q,J,W,G){C9(G,(K)=>this.#D(Z,Q,J,W++,K))}#D(Z,Q,J,W,G){switch(G.kind){case A9:{let K=this.#j(J,W,G);this.#q(K,null,K[nQ],0,G.children),a9(Z,K,Q);break}case n9:{let K=this.#B(J,W,G);a9(Z,K,Q);break}case BQ:{let K=this.#B(J,W,G);a9(Z,K,Q),this.#q(Z,Q,K[nQ],0,G.children);break}case m0:{let K=this.#j(J,W,G);this.#O({node:K},G),a9(Z,K,Q);break}}}#j(Z,Q,{kind:J,key:W,tag:G,namespace:K,attributes:X}){let V=u6(K||Q8,G);if(lQ(J,Z,V,Q,W),this.#J&&W)LK(V,"data-lustre-key",W);return C9(X,(Y)=>this.#A(V,Y)),V}#B(Z,Q,{kind:J,key:W,content:G}){let K=_6(G??"");return lQ(J,Z,K,Q,W),K}#A(Z,Q){let{debouncers:J,handlers:W,throttles:G}=Z[nQ],{kind:K,name:X,value:V,prevent_default:Y,debounce:H,throttle:F}=Q;switch(K){case VW:{let U=V??"";if(X==="virtual:defaultValue"){Z.defaultValue=U;return}if(U!==c6(Z,X))LK(Z,X,U);xK[X]?.added?.(Z,U);break}case E0:Z[X]=V;break;case YW:{if(W.has(X))EK(Z,X,hW);let U=Y.kind===HW;d6(Z,X,hW,{passive:U}),this.#N(G,X,F),this.#N(J,X,H),W.set(X,(M)=>this.#T(Q,M));break}}}#N(Z,Q,J){let W=Z.get(Q);if(J>0)if(W)W.delay=J;else Z.set(Q,{delay:J});else if(W){let{timeout:G}=W;if(G)fW(G);Z.delete(Q)}}#T(Z,Q){let{currentTarget:J,type:W}=Q,{debouncers:G,throttles:K}=J[nQ],X=l6(J),{prevent_default:V,stop_propagation:Y,include:H,immediate:F}=Z;if(V.kind===X8)Q.preventDefault();if(Y.kind===X8)Q.stopPropagation();if(W==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let U=this.#W?r6(Q,H??[]):Q,M=K.get(W);if(M){let D=Date.now(),S=M.last||0;if(D>S+M.delay)M.last=D,M.lastEvent=Q,this.#G(U,X,W,F)}let z=G.get(W);if(z)fW(z.timeout),z.timeout=g6(()=>{if(Q===K.get(W)?.lastEvent)return;this.#G(U,X,W,F)},z.delay);if(!M&&!z)this.#G(U,X,W,F)}}var C9=(Z,Q)=>{if(Array.isArray(Z))for(let J=0;J<Z.length;J++)Q(Z[J]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},hW=(Z)=>{let{currentTarget:Q,type:J}=Z;Q[nQ].handlers.get(J)(Z)},r6=(Z,Q=[])=>{let J={};if(Z.type==="input"||Z.type==="change")Q.push("target.value");if(Z.type==="submit")Q.push("detail.formData");for(let W of Q){let G=W.split(".");for(let K=0,X=Z,V=J;K<G.length;K++){if(K===G.length-1){V[G[K]]=X[G[K]];break}V=V[G[K]]??={},X=X[G[K]]}}return J},wK=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},a6=(Z)=>{return{added(Q,J){Q[Z]=J}}},xK={checked:wK("checked"),selected:wK("selected"),value:a6("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function i6(Z,Q,J){while(!0){let W=Z,G=Q,K=J;if(W instanceof P)return[G,e(K)];else{let X=W.tail,V=W.head[0],Y=W.head[1],H=$0(V,Y),F;if(V==="")F=G;else F=B9(G,V,H);let U=F,M=O(H,K);Z=X,Q=U,J=M}}}function gW(Z){return i6(Z,nZ(),_)}function yK(Z,Q,J){let W=gW(J),G,K;return G=W[0],K=W[1],AJ("",jZ,"",Z,Q,K,G,!1,!1)}function bK(Z,Q,J,W){let G=gW(W),K,X;return K=G[0],X=G[1],AJ("",jZ,Z,Q,J,X,K,!1,!1)}function fK(Z){let Q=gW(Z),J,W;return J=Q[0],W=Q[1],NW("",jZ,W,J)}var hK=(Z)=>{let Q=lQ(A9,null,Z,0,null),J=0;for(let X=Z.firstChild;X;X=X.nextSibling)if(vK(X))J+=1;if(J===0){let X=GQ().createTextNode("");return lQ(n9,Q,X,0,null),Z.replaceChildren(X),o0()}if(J===1)return uW(Q,Z).head[1];let W=GQ().createTextNode(""),G=lQ(BQ,Q,W,0,null),K=uW(G,Z);return Z.insertBefore(W,Z.firstChild),fK(K)},vK=(Z)=>{switch(Z.nodeType){case J8:return!0;case GW:return!!Z.data;default:return!1}},t6=(Z,Q,J,W)=>{if(!vK(Q))return null;switch(Q.nodeType){case J8:{let G=lQ(A9,Z,Q,W,J),K=Q.localName,X=Q.namespaceURI,V=!X||X===Q8;if(V&&o6.includes(K))e6(K,Q);let Y=Z7(Q),H=uW(G,Q);return V?yK(K,Y,H):bK(X,K,Y,H)}case GW:return lQ(n9,Z,Q,W,null),N8(Q.data);default:return null}},o6=["input","select","textarea"],e6=(Z,Q)=>{let{value:J,checked:W}=Q;if(Z==="input"&&Q.type==="checkbox"&&!W)return;if(Z==="input"&&Q.type==="radio"&&!W)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!J)return;queueMicrotask(()=>{if(Q.value=J,Q.checked=W,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),GQ().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},uW=(Z,Q)=>{let J=null,W=Q.firstChild,G=null,K=0;while(W){let X=W.nodeType===J8?W.getAttribute("data-lustre-key"):null;if(X!=null)W.removeAttribute("data-lustre-key");let V=t6(Z,W,X,K),Y=W.nextSibling;if(V){let H=new KQ([X??"",V],null);if(G)G=G.tail=H;else G=J=H;K+=1}else Q.removeChild(W);W=Y}if(!G)return _;return G.tail=_,J},Z7=(Z)=>{let Q=Z.attributes.length,J=_;while(Q-- >0){let W=Z.attributes[Q];if(W.name==="xmlns")continue;J=new KQ(Q7(W),J)}return J},Q7=(Z)=>{let{localName:Q,value:J}=Z;return mQ(Q,J)};var EJ=()=>!!GQ();class T8{constructor(Z,[Q,J],W,G){this.root=Z,this.#Z=Q,this.#G=W,this.#W=G,this.root.addEventListener("context-request",(K)=>{if(!(K.context&&K.callback))return;if(!this.#V.has(K.context))return;K.stopImmediatePropagation();let X=this.#V.get(K.context);if(K.subscribe){let V=()=>{X.subscribers=X.subscribers.filter((Y)=>Y!==K.callback)};X.subscribers.push([K.callback,V]),K.callback(X.value,V)}else K.callback(X.value)}),this.#K=new vW(this.root,(K,X,V)=>{let[Y,H]=TJ(this.#Q,X,V,K);if(this.#Q=Y,H.isOk()){let F=H[0];if(F.stop_propagation)K.stopPropagation();if(F.prevent_default)K.preventDefault();this.dispatch(F.message,!1)}}),this.#J=hK(this.root),this.#Q=jW(),this.#M=!0,this.#R(J)}root=null;dispatch(Z,Q=!1){if(this.#M||=Q,this.#Y)this.#F.push(Z);else{let[J,W]=this.#W(this.#Z,Z);this.#Z=J,this.#R(W)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#V.has(Z))this.#V.set(Z,{value:Q,subscribers:[]});else{let J=this.#V.get(Z);J.value=Q;for(let W=J.subscribers.length-1;W>=0;W--){let[G,K]=J.subscribers[W];if(!G){J.subscribers.splice(W,1);continue}G(Q,K)}}}#Z;#G;#W;#J;#Q;#K;#V=new Map;#Y=!1;#F=[];#H=_;#U=_;#X=null;#M=!1;#I={dispatch:(Z,Q)=>this.dispatch(Z,Q),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#R(Z){this.#Y=!0;while(!0){for(let Q=Z.synchronous;Q.tail;Q=Q.tail)Q.head(this.#I);if(this.#H=uK(this.#H,Z.before_paint),this.#U=uK(this.#U,Z.after_paint),!this.#F.length)break;[this.#Z,Z]=this.#W(this.#Z,this.#F.shift())}if(this.#Y=!1,this.#M)cancelAnimationFrame(this.#X),this.#z();else if(!this.#X)this.#X=requestAnimationFrame(()=>{this.#z()})}#z(){this.#M=!1,this.#X=null;let Z=this.#G(this.#Z),{patch:Q,events:J}=r9(this.#Q,this.#J,Z);if(this.#Q=J,this.#J=Z,this.#K.push(Q),this.#H instanceof KQ){let W=gK(this.#H);this.#H=_,queueMicrotask(()=>{this.#M=!0,this.#R(W)})}if(this.#U instanceof KQ){let W=gK(this.#U);this.#U=_,requestAnimationFrame(()=>{this.#M=!0,this.#R(W)})}}}function gK(Z){return{synchronous:Z,after_paint:_,before_paint:_}}function uK(Z,Q){if(Z instanceof P)return Q;else if(Q instanceof P)return Z;else return Z9(Z,Q)}class $W extends R{constructor(Z){super();this.message=Z}}class mW extends R{constructor(Z){super();this.callback=Z}}class cW extends R{constructor(Z){super();this.callback=Z}}class U9 extends R{constructor(Z){super();this.message=Z}}class L9 extends R{constructor(Z,Q){super();this.name=Z,this.data=Q}}class S8 extends R{constructor(Z,Q){super();this.key=Z,this.value=Q}}class E9 extends R{}class $K extends R{constructor(Z,Q,J,W,G,K,X,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=J,this.attributes=W,this.properties=G,this.contexts=K,this.is_form_associated=X,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function mK(Z){let Q=new $K(!0,!0,!1,_,_,_,!1,W8,W8,W8);return EZ(Z,Q,(J,W)=>{return W.apply(J)})}class pK{#Z;constructor(Z,[Q,J],W,G){this.#Z=new T8(Z,[Q,J],G,W)}send(Z){switch(Z.constructor){case U9:{this.dispatch(Z.message,!1);break}case L9:{this.emit(Z.name,Z.data);break}case E9:break}}dispatch(Z,Q){this.#Z.dispatch(Z,Q)}emit(Z,Q){this.#Z.emit(Z,Q)}}var dK=({init:Z,update:Q,view:J},W,G)=>{if(!EJ())return new b(new wJ);let K=W instanceof HTMLElement?W:GQ().querySelector(W);if(!K)return new b(new pW(W));return new x(new pK(K,Z(G),Q,J))};class J7{#Z;#G;#W;#J;#Q;#K;#V=oZ();#Y=new Set;constructor([Z,Q],J,W,G){this.#Z=Z,this.#G=J,this.#W=W,this.#J=G,this.#Q=this.#W(this.#Z),this.#K=i0(this.#Q),this.#X(Q)}send(Z){switch(Z.constructor){case $W:{let{message:Q}=Z,J=this.#F(Q),W=r9(this.#K,this.#Q,J);this.#Q=J,this.#K=W.events,this.broadcast(yW(W.patch));return}case mW:{let{callback:Q}=Z;this.#Y.add(Q),Q(OK(this.#J.open_shadow_root,this.#J.adopt_styles,YQ(this.#J.attributes),YQ(this.#J.properties),YQ(this.#J.contexts),this.#V,this.#Q));return}case cW:{let{callback:Q}=Z;this.#Y.delete(Q);return}case U9:{let{message:Q}=Z,[J,W]=this.#G(this.#Z,Q),G=this.#W(J),K=r9(this.#K,this.#Q,G);this.#X(W),this.#Z=J,this.#Q=G,this.#K=K.events,this.broadcast(yW(K.patch));return}case L9:{let{name:Q,data:J}=Z;this.broadcast(jK(Q,J));return}case S8:{let{key:Q,value:J}=Z;this.#V=AZ(this.#V,Q,J),this.broadcast(BK(Q,J));return}case E9:{this.#Z=null,this.#G=null,this.#W=null,this.#J=null,this.#Q=null,this.#K=null,this.#V=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#F(Z){switch(Z.constructor){case O8:{let{messages:Q}=Z,J=this.#Z,W=qJ();for(let G=Q;G.head;G=G.tail){let K=this.#F(G.head);if(K instanceof x){J=K[0][0],W=h0(fQ.fromArray([W,K[0][1]]));break}}return this.#X(W),this.#Z=J,this.#W(this.#Z)}case j8:{let{name:Q,value:J}=Z,W=this.#H(Q,J);if(W instanceof b)return this.#Q;else{let[G,K]=this.#G(this.#Z,W[0]);return this.#X(K),this.#Z=G,this.#W(this.#Z)}}case B8:{let{name:Q,value:J}=Z,W=this.#U(Q,J);if(W instanceof b)return this.#Q;else{let[G,K]=this.#G(this.#Z,W[0]);return this.#X(K),this.#Z=G,this.#W(this.#Z)}}case A8:{let{path:Q,name:J,event:W}=Z,[G,K]=TJ(this.#K,Q,J,W);if(this.#K=G,K instanceof b)return this.#Q;else{let[X,V]=this.#G(this.#Z,K[0].message);return this.#X(V),this.#Z=X,this.#W(this.#Z)}}case kW:{let{key:Q,value:J}=Z,W=XZ(this.#J.contexts,Q);if(W instanceof b)return this.#Q;if(W=N9(J,W[0]),W instanceof b)return this.#Q;let[G,K]=this.#G(this.#Z,W[0]);return this.#X(K),this.#Z=G,this.#W(this.#Z)}}}#H(Z,Q){let J=XZ(this.#J.attributes,Z);switch(J.constructor){case x:return J[0](Q);case b:return new b(void 0)}}#U(Z,Q){let J=XZ(this.#J.properties,Z);switch(J.constructor){case x:return J[0](Q);case b:return new b(void 0)}}#X(Z){let Q=(X)=>this.send(new U9(X)),J=(X,V)=>this.send(new L9(X,V)),W=()=>{return},G=()=>{return},K=(X,V)=>this.send(new S8(X,V));globalThis.queueMicrotask(()=>{b0(Z,Q,J,W,G,K)})}}class sK extends R{constructor(Z,Q,J,W){super();this.init=Z,this.update=Q,this.view=J,this.config=W}}class pW extends R{constructor(Z){super();this.selector=Z}}class wJ extends R{}function nK(Z,Q,J){return new sK(Z,Q,J,mK(_))}function lK(Z,Q,J){return r(!EJ(),new b(new wJ),()=>{return dK(Z,Q,J)})}var rK="src/chess/algebraic_notation.gleam";class aK extends R{}class C8 extends R{}class rW extends R{}class xJ extends R{}class L8 extends R{}function G7(Z){if(Z instanceof rW)return"#";else if(Z instanceof xJ)return"+";else return""}function dW(Z){if(Z)return"x";else return""}function E8(Z){if(Z instanceof s)return"";else if(Z instanceof ZQ)return"N";else if(Z instanceof mZ)return"B";else if(Z instanceof qZ)return"R";else if(Z instanceof QQ)return"Q";else return"K"}function K7(Z){if(Z instanceof C){let Q=Z[0];return"="+E8(Q)}else return""}function iK(Z){if(Z instanceof h)return"1";else if(Z instanceof UZ)return"2";else if(Z instanceof cZ)return"3";else if(Z instanceof kZ)return"4";else if(Z instanceof yZ)return"5";else if(Z instanceof pZ)return"6";else if(Z instanceof FZ)return"7";else return"8"}function lW(Z){if(Z instanceof ZZ)return"a";else if(Z instanceof OZ)return"b";else if(Z instanceof WZ)return"c";else if(Z instanceof MZ)return"d";else if(Z instanceof c)return"e";else if(Z instanceof RZ)return"f";else if(Z instanceof GZ)return"g";else return"h"}function tK(Z){let Q=lW(Z.file),J=iK(Z.row);return Q+J}function sW(Z){return tK(Z)}function nW(Z,Q,J,W,G){let K=WQ(Z,J),X;if(K instanceof C)X=K[0];else throw g("let_assert",rK,"chess/algebraic_notation",195,"describe_disambiguation","Pattern match failed, no pattern matched the value.",{value:K,start:5438,end:5488,pattern_start:5449,pattern_end:5461});let V=X[0];if(V instanceof s&&G)return lW(J.file);else{let Y=V,H=X[1],F,M=YQ(Q);F=h9(M,(T)=>{return r(A(T,J),!1,()=>{let j=WQ(Z,T);return A(j,new C([Y,H]))})});let z=F,D;D=h9(z,(T)=>{let L=XZ(Q,T),E=J9(L,()=>{throw g("panic",rK,"chess/algebraic_notation",218,"describe_disambiguation","`panic` expression evaluated.",{})}),N=D9(E);return VJ(N,(k)=>{if(k instanceof fZ){let w=k.to;return A(w,W)}else if(k instanceof RQ){let w=k.to;return A(w,W)}else if(k instanceof IQ){let w=k.to;return A(w,W)}else if(k instanceof zQ)return!1;else return!1})});let q=D;return r(xG(q),"",()=>{let T;return T=XJ(q,(E)=>{return!A(E.file,J.file)}),r(T,(()=>{let E=J.file;return lW(E)})(),()=>{let E;return E=XJ(q,(w)=>{return!A(w.row,J.row)}),r(E,(()=>{let w=J.row;return iK(w)})(),()=>{return tK(J)})})})}}function oK(Z,Q,J){let W,G=U0(Z);return W=i8(G,(X)=>{return new aK}),HQ(W,(X)=>{let V;{let U=QW(J);V=QW(Z)>U}let Y=V,H;if(Q instanceof FQ){let{from:U,to:M}=Q,z,D=WQ(Z,U);z=y9(D,new C8),H=HQ(z,(q)=>{let T;T=q[0];let j=E8(T)+nW(Z,X,U,M,Y)+dW(Y)+sW(M);return new x(j)})}else if(Q instanceof MQ){let{from:U,to:M}=Q,z,D=WQ(Z,U);z=y9(D,new C8),H=HQ(z,(q)=>{let T;T=q[0];let j=E8(T)+nW(Z,X,U,M,Y)+dW(Y)+sW(M);return new x(j)})}else if(Q instanceof LQ){let{from:U,to:M}=Q,z,D=WQ(Z,U);z=y9(D,new C8),H=HQ(z,(q)=>{let T;T=q[0];let j=E8(T)+nW(Z,X,U,M,Y)+dW(Y)+sW(M);return new x(j)})}else if(Q instanceof EQ)H=new x("O-O");else H=new x("O-O-O");return HQ(H,(U)=>{let M;{let j;if(Q instanceof MQ){let E=Q.new_figure;j=new C(E)}else j=new y;M=K7(j)}let D=U+M,S;{let j,L=K9(J);if(L instanceof JQ){let N=L.info;if(N instanceof sJ)if(N.by instanceof nJ)j=new rW;else{let w;if(w=oJ(J),w)j=new xJ;else j=new L8}else{let k;if(k=oJ(J),k)j=new xJ;else j=new L8}}else{let N;if(N=oJ(J),N)j=new xJ;else j=new L8}S=G7(j)}let T=D+S;return new x(T)})})}var kJ=new B(new WZ,new h);var yJ=new B(new WZ,new u);var aW=new B(new c,new h);var iW=new B(new c,new u);var bJ=new B(new GZ,new h);var fJ=new B(new GZ,new u);var i9="src/web_chess/internal/game_logic.gleam";class vZ extends R{constructor(Z,Q,J,W,G){super();this.root_state=Z,this.state=Q,this.selected_move_history_index=J,this.move_history=W,this.figure_selection_state=G}}class rZ extends R{}class w9 extends R{constructor(Z,Q){super();this.selected_figure=Z,this.moves=Q}}class t9 extends R{constructor(Z,Q,J){super();this.selected_figure=Z,this.moves=Q,this.dragging_over=J}}class F9 extends R{constructor(Z,Q){super();this.white=Z,this.black=Q}}class x8 extends R{constructor(Z){super();this.white=Z}}class w8 extends R{constructor(Z,Q,J){super();this.san_description=Z,this.move=Q,this.index=J}}function QX(){let Z=M0();return new vZ(Z,Z,0,I([]),new rZ)}function JX(Z,Q){let J,W=Z.root_state;J=I0(W,Q);let G=J,K;if(G instanceof x)K=G[0];else throw g("let_assert",i9,"web_chess/internal/game_logic",63,"handle_select_past_position","Pattern match failed, no pattern matched the value.",{value:G,start:1647,end:1733,pattern_start:1658,pattern_end:1676});return new vZ(Z.root_state,K,Q,Z.move_history,Z.figure_selection_state)}function WX(Z,Q){let J=K9(Z.state),W;if(J instanceof j9)W=J.next_player;else throw g("let_assert",i9,"web_chess/internal/game_logic",101,"handle_drag_start","Pattern match failed, no pattern matched the value.",{value:J,start:2908,end:2993,pattern_start:2919,pattern_end:2957});let G=WQ(Z.state,Q);if(G instanceof C){let K=G[0][1];if(A(K,W)){let X,V=JW(Z.state,Q),Y=J9(V,()=>{return wZ()}),H=D9(Y),F=LZ(H,(M)=>{if(M instanceof fZ)return[M.to,M];else if(M instanceof RQ)return[M.to,M];else if(M instanceof IQ)return[M.to,M];else if(M instanceof zQ)if(W instanceof f)return[bJ,M];else return[fJ,M];else if(W instanceof f)return[kJ,M];else return[yJ,M]});X=tQ(F);let U=X;return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new t9(Q,U,new y))}else return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}else return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}function GX(Z,Q){let J=Z.figure_selection_state;if(J instanceof t9){let{selected_figure:W,moves:G}=J;return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new t9(W,G,new C(Q)))}else return Z}function KX(Z){let Q=Z.figure_selection_state;if(Q instanceof t9){let{selected_figure:J,moves:W}=Q;return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new w9(J,W))}else return Z}function V7(Z,Q,J){if(Z instanceof P)return[I([new x8(new w8(Q,J,1))]),1];else{let W=Z.head;if(W instanceof F9){let G=W;return[O(new x8(new w8(Q,J,G.black.index+1)),Z),G.black.index+1]}else{let G=Z.tail,K=W.white;return[O(new F9(K,new w8(Q,J,K.index+1)),G),K.index+1]}}}function tW(Z,Q){return r(Q===0,I([]),()=>{if(Z instanceof P)throw g("panic",i9,"web_chess/internal/game_logic",304,"take_until_move_history","index too large",{});else{let J=Z.head;if(J instanceof F9)if(J.black.index===Q)return Z;else{let G=J.white;if(G.index===Q){let K=Z.tail;return O(new x8(G),K)}else{let K=Z.tail;return tW(K,Q)}}else if(J.white.index===Q)return Z;else{let G=Z.tail;return tW(G,Q)}}})}function XX(Z,Q,J){let W;if(J instanceof fZ){let U=J.to;W=new FQ(Q,U)}else if(J instanceof RQ){let U=J.to;W=new MQ(Q,U,new QQ)}else if(J instanceof IQ){let U=J.to;W=new LQ(Q,U)}else if(J instanceof zQ)W=new EQ;else W=new lJ;let G=W,K=z0(Z.state,G),X;if(K instanceof x)X=K[0];else throw g("let_assert",i9,"web_chess/internal/game_logic",225,"try_do_move","Pattern match failed, no pattern matched the value.",{value:K,start:6733,end:6803,pattern_start:6744,pattern_end:6757});let V;{let U=oK(Z.state,G,X),M;if(U instanceof x)M=U[0];else throw g("let_assert",i9,"web_chess/internal/game_logic",228,"try_do_move","Pattern match failed, no pattern matched the value.",{value:U,start:6853,end:6989,pattern_start:6864,pattern_end:6871});let z=Z.move_history,D=tW(z,Z.selected_move_history_index);V=V7(D,M,G)}let Y=V,H,F;return H=Y[0],F=Y[1],new vZ(X,X,F,H,new rZ)}function VX(Z){let Q=Z.figure_selection_state;if(Q instanceof t9){let{selected_figure:J,moves:W,dragging_over:G}=Q;if(G instanceof C){let K=G[0];return RG(A(K,J),()=>{return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new w9(J,W))},()=>{let X=XZ(W,K);if(X instanceof x){let V=X[0];return XX(Z,J,V)}else return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)})}else return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}else return Z}function ZX(Z,Q){let J=K9(Z.state),W;if(J instanceof j9)W=J.next_player;else throw g("let_assert",i9,"web_chess/internal/game_logic",325,"try_select","Pattern match failed, no pattern matched the value.",{value:J,start:9554,end:9645,pattern_start:9565,pattern_end:9603});let G=WQ(Z.state,Q);if(G instanceof C){let K=G[0][1];if(A(K,W)){let X,V=JW(Z.state,Q),Y=J9(V,()=>{return wZ()}),H=D9(Y),F=LZ(H,(M)=>{if(M instanceof fZ)return[M.to,M];else if(M instanceof RQ)return[M.to,M];else if(M instanceof IQ)return[M.to,M];else if(M instanceof zQ)if(W instanceof f)return[bJ,M];else return[fJ,M];else if(W instanceof f)return[kJ,M];else return[yJ,M]});X=tQ(F);let U=X;return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new w9(Q,U))}else return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}else return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}function YX(Z,Q){if((()=>{let W=Z.state;return K9(W)})()instanceof JQ)return Z;else{let W=Z.figure_selection_state;if(W instanceof rZ)return ZX(Z,Q);else if(W instanceof w9){let{selected_figure:G,moves:K}=W,X=XZ(K,Q);if(X instanceof x){let V=X[0];return XX(Z,G,V)}else return ZX(Z,Q)}else return new vZ(Z.root_state,Z.state,Z.selected_move_history_index,Z.move_history,new rZ)}}function eW(Z){window.addEventListener("resize",()=>Z())}function HX(){return[window.innerWidth,window.innerHeight]}function UX(){let Z=parseFloat(getComputedStyle(document.documentElement).fontSize),Q=getComputedStyle(document.documentElement).getPropertyValue("--layout-sidebar-min-width");if(!Q||Q.indexOf("rem")===-1)throw Error("CSS variable --layout-sidebar-min-width missing or invalid format.");return parseFloat(Q.slice(0,Q.indexOf("rem")))*Z}function ZG(){let Z=HX(),Q,J;Q=Z[0],J=Z[1];let W=UX();return Q-W>=J}function U7(Z){if(Z==="input")return!0;else if(Z==="change")return!0;else if(Z==="focus")return!0;else if(Z==="focusin")return!0;else if(Z==="focusout")return!0;else if(Z==="blur")return!0;else if(Z==="select")return!0;else return!1}function M9(Z,Q){return w0(Z,mJ(Q,(J)=>{return new NJ(!1,!1,J)}),_,UW,UW,U7(Z),0,0)}function QG(Z){if(Z instanceof hZ)return new hZ(Z.kind,Z.name,Z.handler,Z.include,x0,Z.stop_propagation,Z.immediate,Z.debounce,Z.throttle);else return Z}function FX(Z){return M9("click",SQ(Z))}function MX(Z){return M9("mousedown",SQ(Z))}var IX="src/web_chess/internal/views/board.gleam";class o9 extends R{}class e9 extends R{}function JG(Z,Q){return r(Q===0,new y,()=>{if(Z instanceof P)throw g("panic",IX,"web_chess/internal/views/board",125,"get_previous_move","`panic` expression evaluated.",{});else{let J=Z.head;if(J instanceof F9){let W=J.white;if(W.index===Q)return new C([W,new f]);else{let G=J.black;if(G.index===Q)return new C([G,new JZ]);else{let K=Z.tail;return JG(K,Q)}}}else{let W=J.white;if(W.index===Q)return new C([W,new f]);else{let G=Z.tail;return JG(G,Q)}}}})}function F7(Z){if(Z)return D8(I([PZ("absolute inset-0 h-full w-full"),F8("./indicators/capture.svg"),U8("This figure can be captured"),V8(!1)]));else return D8(I([PZ("absolute inset-0 h-full w-full"),F8("./indicators/move.svg"),U8("Can move to here"),V8(!1)]))}function M7(Z,Q,J){let W;if(Z[1]instanceof f){let H=Z[0];if(H instanceof s)W=["./figures/pawn_white.svg","White Bishop"];else if(H instanceof ZQ)W=["./figures/knight_white.svg","White Knight"];else if(H instanceof mZ)W=["./figures/bishop_white.svg","White Bishop"];else if(H instanceof qZ)W=["./figures/rook_white.svg","White Rook"];else if(H instanceof QQ)W=["./figures/queen_white.svg","White Queen"];else W=["./figures/king_white.svg","White King"]}else{let H=Z[0];if(H instanceof s)W=["./figures/pawn_black.svg","Black Pawn"];else if(H instanceof ZQ)W=["./figures/knight_black.svg","Black Knight"];else if(H instanceof mZ)W=["./figures/bishop_black.svg","Black Bishop"];else if(H instanceof qZ)W=["./figures/rook_black.svg","Black Rook"];else if(H instanceof QQ)W=["./figures/queen_black.svg","Black Queen"];else W=["./figures/king_black.svg","Black King"]}let K=W,X,V;X=K[0],V=K[1];let Y=Z[1];return D8(I([PZ("absolute inset-0 h-full w-full"),F8(X),U8(V),V8(A(new C(Y),Q)),M9("dragstart",SQ(J()))]))}function R7(Z,Q,J,W,G,K,X,V,Y,H,F,U,M){let z;if(Q instanceof C){let L=Q[0];z=new C(M7(L,J,Y))}else z=Q;let D=z,S;if(G)S=new C(F7(!A(D,new y)));else S=new y;let q=S,T=b8(K,(L)=>{return H9(I([PZ("absolute text-sm right-1.5 bottom-1 font-bold"),xQ(I([["text-[var(--color-square-light)]",A(Z,new e9)],["text-[var(--color-square-dark)]",A(Z,new o9)]]))]),I([lZ(L)]))}),j=b8(X,(L)=>{return H9(I([PZ("absolute text-sm left-1.5 top-1 font-bold"),xQ(I([["text-[var(--color-square-light)]",A(Z,new e9)],["text-[var(--color-square-dark)]",A(Z,new o9)]]))]),I([lZ(L)]))});return Y9(I([xQ(I([["relative",!0],["bg-[var(--color-square-dark)]",A(Z,new e9)&&!W],["bg-[var(--color-square-light)]",A(Z,new o9)&&!W],["bg-[var(--color-square-dark-highlighted)]",A(Z,new e9)&&W],["bg-[var(--color-square-light-highlighted)]",A(Z,new o9)&&W]])),MX(V()),(()=>{let L=M9("dragover",SQ(U()));return QG(L)})(),(()=>{let L=M9("drop",SQ(F()));return QG(L)})(),M9("dragenter",SQ(H())),M9("dragend",SQ(M()))]),(()=>{let L=I([D,q,T,j]);return iQ(L)})())}function I7(Z){let Q,J=Z.file;if(J instanceof ZZ)Q=0;else if(J instanceof OZ)Q=1;else if(J instanceof WZ)Q=2;else if(J instanceof MZ)Q=3;else if(J instanceof c)Q=4;else if(J instanceof RZ)Q=5;else if(J instanceof GZ)Q=6;else Q=7;let W=Q,G,K=Z.row;if(K instanceof h)G=0;else if(K instanceof UZ)G=1;else if(K instanceof cZ)G=2;else if(K instanceof kZ)G=3;else if(K instanceof yZ)G=4;else if(K instanceof pZ)G=5;else if(K instanceof FZ)G=6;else G=7;let V=(W+G)%2;if(V===0)return new e9;else if(V===1)return new o9;else throw g("panic",IX,"web_chess/internal/views/board",309,"coordinate_colour","`panic` expression evaluated.",{})}function z7(){let Z=I([new ZZ,new OZ,new WZ,new MZ,new c,new RZ,new GZ,new TZ]),J=I([new u,new FZ,new pZ,new yZ,new kZ,new cZ,new UZ,new h]);return v9(J,(W)=>{return LZ(Z,(K)=>{return new B(K,W)})})}function N7(Z){let Q,J=Z.figure_selection_state;if(J instanceof rZ)Q=[I([]),I([])];else if(J instanceof w9){let{selected_figure:Y,moves:H}=J;Q=[I([Y]),(()=>{return YQ(H)})()]}else{let{selected_figure:Y,moves:H,dragging_over:F}=J;Q=[(()=>{let U=I([new C(Y),F]);return iQ(U)})(),(()=>{return YQ(H)})()]}let W=Q,G,K;G=W[0],K=W[1];let X;{let Y=JG(Z.move_history,Z.selected_move_history_index);if(Y instanceof C){let H=Y[0][0],F=Y[0][1],U=H.move;if(U instanceof FQ){let{from:M,to:z}=U;X=I([M,z])}else if(U instanceof MQ){let{from:M,to:z}=U;X=I([M,z])}else if(U instanceof LQ){let{from:M,to:z}=U;X=I([M,z])}else if(U instanceof EQ)if(F instanceof f)X=I([aW,bJ]);else X=I([iW,fJ]);else if(F instanceof f)X=I([aW,kJ]);else X=I([iW,yJ])}else X=I([])}let V=X;return[(()=>{let Y=Z9(G,V);return $Z(Y)})(),(()=>{return $Z(K)})()]}function q7(Z){if(Z instanceof ZZ)return"a";else if(Z instanceof OZ)return"b";else if(Z instanceof WZ)return"c";else if(Z instanceof MZ)return"d";else if(Z instanceof c)return"e";else if(Z instanceof RZ)return"f";else if(Z instanceof GZ)return"g";else return"h"}function D7(Z){if(Z instanceof h)return"1";else if(Z instanceof UZ)return"2";else if(Z instanceof cZ)return"3";else if(Z instanceof kZ)return"4";else if(Z instanceof yZ)return"5";else if(Z instanceof pZ)return"6";else if(Z instanceof FZ)return"7";else return"8"}function zX(Z,Q,J,W,G,K,X){let V=N7(Z),Y,H;Y=V[0],H=V[1];let F,U=(()=>{let z=Z.state;return K9(z)})();if(U instanceof JQ)F=new y;else{let z=U.next_player;F=new C(z)}let M=F;return Y9(I([PZ("grid h-[100vmin] w-[100vmin] grid-cols-8 grid-rows-8 select-none")]),LZ(z7(),(z)=>{let D;if(z.row instanceof h)D=new C(q7(z.file));else D=new y;let q=D,T;if(z.file instanceof ZZ)T=new C(D7(z.row));else T=new y;let L=T;return R7(I7(z),WQ(Z.state,z),M,(()=>{return FJ(Y,z)})(),(()=>{return FJ(H,z)})(),q,L,()=>{return Q(z)},()=>{return J(z)},()=>{return W(z)},G,K,X)}))}function NX(){return H9(I([PZ("m-1 text-xs")]),I([q8(I([PZ("whitespace-nowrap"),Y8("https://commons.wikimedia.org/wiki/Category:SVG_chess_pieces"),H8("_blank")]),I([lZ("Chess icons")])),lZ(" by "),q8(I([Y8("https://commons.wikimedia.org/wiki/User:Cburnett"),H8("_blank")]),I([lZ("Cburnett")])),lZ(" "),q8(I([PZ("whitespace-nowrap"),Y8("https://creativecommons.org/licenses/by-sa/3.0/deed.en"),H8("_blank")]),I([lZ("CC BY-SA 3.0")]))]))}function WG(Z,Q,J){return JK(I([PZ("font-bold cursor-pointer hover:bg-white/8 rounded pt-0.5 pb-0.5 pl-1.5 pr-1.5"),xQ(I([["underline bg-white/8",Q]])),FX(J())]),I([lZ(Z)]))}function qX(Z,Q,J){let W,K=e(Z);W=kG(K,(V,Y)=>{return[Y+1,V]});let X=W;return Y9(I([PZ("grid [grid-template-columns:1.5rem_4.5rem_4.5rem] justify-center place-items-center gap-y-1 gap-x-1.5 pt-2 pb-1")]),(()=>{return v9(X,(Y)=>{let H,F;if(H=Y[0],F=Y[1],F instanceof F9){let{white:U,black:M}=F;return I([H9(I([]),I([lZ(gQ(H)+".")])),WG(U.san_description,U.index===Q,()=>{return J(U.index)}),WG(M.san_description,M.index===Q,()=>{return J(M.index)})])}else{let U=F.white;return I([H9(I([]),I([lZ(gQ(H)+".")])),WG(U.san_description,U.index===Q,()=>{return J(U.index)})])}})})())}var A7="src/app.gleam";class rQ extends R{constructor(Z,Q){super();this.is_layout_sideways=Z,this.game=Q}}class GG extends R{}class KG extends R{constructor(Z){super();this.square=Z}}class XG extends R{constructor(Z){super();this.dragging_figure=Z}}class VG extends R{constructor(Z){super();this.over=Z}}class YG extends R{}class HG extends R{}class UG extends R{constructor(Z){super();this.index=Z}}class DX extends R{}function P7(Z){let Q=new rQ(ZG(),QX()),J=f0((W)=>{return eW(()=>{return W(new GG)})});return[Q,J]}function T7(Z){return new rQ(ZG(),Z.game)}function S7(Z,Q){let J;if(Q instanceof GG)J=T7(Z);else if(Q instanceof KG){let G=Q.square;J=new rQ(Z.is_layout_sideways,YX(Z.game,G))}else if(Q instanceof XG){let G=Q.dragging_figure;J=new rQ(Z.is_layout_sideways,WX(Z.game,G))}else if(Q instanceof VG){let G=Q.over;J=new rQ(Z.is_layout_sideways,GX(Z.game,G))}else if(Q instanceof YG)J=new rQ(Z.is_layout_sideways,VX(Z.game));else if(Q instanceof HG)J=new rQ(Z.is_layout_sideways,KX(Z.game));else if(Q instanceof UG){let G=Q.index;J=new rQ(Z.is_layout_sideways,JX(Z.game,G))}else J=Z;return[J,qJ()]}function C7(Z){return e0(I([PZ("flex bg-background text-text font-sans h-screen w-screen overflow-x-hidden"),xQ(I([["flex-row items-stretch",Z.is_layout_sideways],["flex-col items-stretch",!Z.is_layout_sideways]]))]),I([Y9(I([PZ("h-[calc(50vh-50vmin)] flex-none")]),I([])),QK(I([xQ(I([["flex justify-center",!0],["flex-1",Z.is_layout_sideways],["h-[100vmin] min-h-[100vmin]",!Z.is_layout_sideways]]))]),I([zX(Z.game,(Q)=>{return new KG(Q)},(Q)=>{return new XG(Q)},(Q)=>{return new VG(Q)},()=>{return new YG},()=>{return new DX},()=>{return new HG})])),ZK(I([xQ(I([["flex flex-col justify-between",!0],["h-full w-[var(--layout-sidebar-min-width)] overflow-y-scroll",Z.is_layout_sideways],["w-full flex-1",!Z.is_layout_sideways]]))]),I([qX(Z.game.move_history,Z.game.selected_move_history_index,(Q)=>{return new UG(Q)}),Y9(I([PZ("text-center")]),I([NX()]))]))]))}function OX(){let Z=nK(P7,S7,C7),Q=lK(Z,"#app",void 0);if(!(Q instanceof x))throw g("let_assert",A7,"app",15,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:426,end:475,pattern_start:437,pattern_end:442});return}OX();
